<!DOCTYPE html>
<html >
<head><meta charset="utf-8">
<title>Application</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Do">
<meta property="og:description" content="An opinionated framework for .NET">
<meta property="og:image" content="https://do.mouseless.codes/favicon.ico">
<meta property="og:image:width" content="50">
<meta property="og:image:height" content="50">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
<meta property="og:title" content="Application">
<meta name="description" content="Application acts as a container object for all the domain objects, features
and layers of the software you develop.">
<meta property="og:description" content="Application acts as a container object for all the domain objects, features
and layers of the software you develop."><link rel="preload" as="fetch" crossorigin="anonymous" href="/architecture/application/_payload.json"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.d9a3ba70.js"><link rel="preload" as="style" href="/_nuxt/entry.6556be84.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/default.cc23faca.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/nuxt-link.8e4cb539.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/pageStore.8214cd8e.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/query.52fb42f2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/utils.7a713b49.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/preview.81b1575f.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_...content-page_.dd891050.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRenderer.5a140fd6.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRendererMarkdown.bbd87e1e.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.a6ef77ff.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentDoc.dd6ee93f.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentQuery.30f1af35.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/asyncData.dd538b9b.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH1.a3703e9c.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.f07d3bb3.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCodeInline.bc5960e4.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH2.c51d35a2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCode.afb9c127.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseBlockquote.d1964427.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseA.553d4c45.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH3.e5deafd9.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH4.9d1416b1.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseImg.bee7f94e.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseEm.4cce131e.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseOl.6bdc143f.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseLi.698cb451.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/error-component.8cf9aaf1.js"><link rel="stylesheet" href="/_nuxt/entry.6556be84.css"><style>.content[data-v-a76652f4],.full[data-v-a76652f4]{box-sizing:border-box;margin:1em auto auto;max-width:1768px;min-width:270px}@media (max-width:1818px){.content[data-v-a76652f4],.full[data-v-a76652f4]{max-width:1280px}}@media (max-width:1330px){.content[data-v-a76652f4],.full[data-v-a76652f4]{max-width:1024px}}@media (max-width:1074px){.content[data-v-a76652f4],.full[data-v-a76652f4]{max-width:768px}}@media (max-width:818px){.content[data-v-a76652f4],.full[data-v-a76652f4]{max-width:90%}}.content[data-v-a76652f4]{display:grid;grid-template-areas:"side content" "side content";grid-template-columns:250px;grid-template-rows:65px 1fr}.side[data-v-a76652f4]{grid-area:side}article[data-v-a76652f4]{grid-area:content}@media (max-width:1330px){.content[data-v-a76652f4]{margin-top:0}}@media (max-width:1074px){.side[data-v-a76652f4]{grid-column-end:content;z-index:2}article[data-v-a76652f4]{grid-column-start:side}}</style><style>div.top[data-v-f35aacb2]{border-bottom:2px solid var(--color-bg-2)}header[data-v-f35aacb2]{align-items:center;box-sizing:border-box;display:flex;flex-direction:row;justify-content:space-between;margin:auto;max-width:1768px;min-width:270px}@media (max-width:1818px){header[data-v-f35aacb2]{max-width:1280px}}@media (max-width:1330px){header[data-v-f35aacb2]{max-width:1024px}}@media (max-width:1074px){header[data-v-f35aacb2]{max-width:768px}}@media (max-width:818px){header[data-v-f35aacb2]{max-width:90%}}header .bars[data-v-f35aacb2]{display:none}div.logo[data-v-f35aacb2]{margin:20px 0}div.logo a[data-v-f35aacb2]:has(img.logo){display:block;height:25px}div.logo a:has(img.logo) img.do[data-v-f35aacb2]:is(.logo){display:inline-block;height:25px}a[data-v-f35aacb2]{color:var(--color-fg-2);cursor:pointer}a[data-v-f35aacb2]:hover{color:var(--color-brand)}nav a[data-v-f35aacb2]{margin:10px;text-decoration:none}nav a.close[data-v-f35aacb2]{display:none}nav a.active[data-v-f35aacb2]{border-bottom-color:var(--color-bg-2);border-bottom:2px solid var(--color-brand);padding-bottom:22px}@media (max-width:1330px){nav a[data-v-f35aacb2]{font-size:.85em}}@media (max-width:1074px){a.bars[data-v-f35aacb2]{display:block}nav[data-v-f35aacb2]{background:var(--color-bg);border-left:2px solid var(--color-bg-2);display:none;height:100%;padding:20px;position:fixed;right:0;top:0;width:calc(270px - 4em);z-index:99}nav a[data-v-f35aacb2],nav.active[data-v-f35aacb2]{display:block}nav a[data-v-f35aacb2]{height:2em}nav a.close[data-v-f35aacb2]{display:block;margin-bottom:1em}nav a.close i[data-v-f35aacb2]{font-size:larger}nav a.active[data-v-f35aacb2]{border:0;border-left-color:var(--color-bg-2);border-left:2px solid var(--color-brand);margin-left:-22px;padding-bottom:0;padding-left:29px}}@media (max-width:818px){nav[data-v-f35aacb2]{width:calc(270px - 7em)}nav a[data-v-f35aacb2]{font-size:.8em}}</style><style>nav[data-v-b6b18fe8]{align-self:start;margin-top:2.5em;position:sticky;top:1.5em}nav h4[data-v-b6b18fe8]{display:none}nav ul[data-v-b6b18fe8]{margin:0;padding:0}nav ul li[data-v-b6b18fe8]{line-height:24px;list-style:none;margin:0}nav ul li a[data-v-b6b18fe8]{border-radius:5px;color:var(--color-fg-2);display:block;font-size:14.4px;padding:10px;text-decoration:none}nav ul li a[data-v-b6b18fe8]:hover{color:var(--color-brand)}nav ul li a.active[data-v-b6b18fe8]{background-color:var(--color-bg-2)}@media (max-width:1330px){nav[data-v-b6b18fe8]{margin-top:3.5em}}@media (max-width:1074px){nav[data-v-b6b18fe8]{background-color:var(--color-bg);border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-top-left-radius:10px;border-top-right-radius:10px;margin-top:0;top:0;width:50%}nav h4[data-v-b6b18fe8]{display:block;font-size:80%;text-transform:uppercase}nav h4 a[data-v-b6b18fe8]{padding-left:0}nav ul[data-v-b6b18fe8]{background-color:#111;background-color:var(--color-bg-2);border:2px solid var(--color-bg-2);border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-top-left-radius:10px;border-top-right-radius:10px;box-sizing:border-box;display:none;padding:.5em;position:absolute;width:200%}nav ul.active[data-v-b6b18fe8]{display:block}nav ul li a[data-v-b6b18fe8]{font-size:.93em;padding:.61em}}@media (max-width:818px){nav ul li a[data-v-b6b18fe8]{font-size:.86em;padding:.58em}}</style><style>.container[data-v-864711a2]{display:flex}.container .content[data-v-864711a2]{margin:0 4em;width:100%}@media (max-width:1330px){.container[data-v-864711a2]{flex-direction:column-reverse;margin-left:4em}.container .content[data-v-864711a2]{margin:.8em 0 0}.container .content nav[data-v-864711a2]{margin-top:-.9em}.container .no-toc[data-v-864711a2]{margin-top:1em}}@media (max-width:1074px){.container[data-v-864711a2]{margin-left:0}}</style><style>.full .content{margin:0!important}@media (max-width:1330px){.full .container{margin-left:0}}</style><style>div.bottom[data-v-2db7ee99]{border-top:2px solid var(--color-bg-2);margin-top:4em}footer[data-v-2db7ee99]{align-items:flex-start;box-sizing:border-box;display:flex;flex-direction:row;font-size:smaller;justify-content:space-between;margin:1em auto;max-width:1768px;min-width:270px}@media (max-width:1818px){footer[data-v-2db7ee99]{max-width:1280px}}@media (max-width:1330px){footer[data-v-2db7ee99]{max-width:1024px}}@media (max-width:1074px){footer[data-v-2db7ee99]{max-width:768px}}@media (max-width:818px){footer[data-v-2db7ee99]{max-width:90%}}footer[data-v-2db7ee99],footer *[data-v-2db7ee99]{color:var(--color-fg-2)}div.logo[data-v-2db7ee99]{margin:20px 0}div.logo a[data-v-2db7ee99]:has(img.logo){display:block;height:15px}div.logo a:has(img.logo) img.do[data-v-2db7ee99]:is(.logo){display:inline-block;height:15px;opacity:.5}div.logo span[data-v-2db7ee99]{display:inline-block;margin-top:1em}nav[data-v-2db7ee99]{text-align:right}nav a[data-v-2db7ee99]{display:block;margin:5px;text-decoration:none}nav a[data-v-2db7ee99]:hover,nav a:hover i[data-v-2db7ee99]{color:var(--color-brand)}@media (max-width:818px){footer[data-v-2db7ee99]{display:block}footer nav[data-v-2db7ee99]{text-align:left}footer nav a[data-v-2db7ee99]{margin-left:0}}</style><style>.navigation-buttons-container[data-v-64660ab9]{margin-top:4em}.navigation-buttons-container .button[data-v-64660ab9]{margin-top:.9em;padding-left:.4em;padding-right:.4em}.navigation-buttons-container .button a[data-v-64660ab9]{text-decoration:none}.navigation-buttons-container .button.left[data-v-64660ab9]{float:left;text-align:left}.navigation-buttons-container .button.right[data-v-64660ab9]{float:right;text-align:end}.navigation-buttons-container .button .link-text[data-v-64660ab9]{color:var(--color-fg-2);font-size:.75em}.navigation-buttons-container .button .link-text h3[data-v-64660ab9]{color:var(--color-brand);font-size:1.5em;margin-top:.1em}.navigation-buttons-container .button .link-text i[data-v-64660ab9]{color:var(--color-fg-2)}</style><style>h4[data-v-cf020a4e]{margin-bottom:.5em;padding-left:1em}nav[data-v-cf020a4e]{text-wrap:nowrap;align-self:start;font-size:12.8px;margin-top:2.5em;overflow:hidden;position:sticky;top:1.5em;width:250px}nav ul[data-v-cf020a4e]{margin:0;padding-left:0}nav ul li[data-v-cf020a4e]{line-height:24px;list-style:none;margin:0}nav ul li a[data-v-cf020a4e]{border-left:3px solid transparent;color:var(--color-fg-2);cursor:pointer;display:block;margin-top:.25em;overflow:hidden;padding-left:1em;text-decoration:none;text-overflow:ellipsis}nav ul li a[data-v-cf020a4e]:hover{color:var(--color-brand)}nav ul li a.active[data-v-cf020a4e]{border-left-color:var(--color-brand)}nav ul li a.return-to-top[data-v-cf020a4e]{margin-top:.5em}nav ul li ul[data-v-cf020a4e]{margin-bottom:.25em}nav ul li ul a[data-v-cf020a4e]{padding-left:2em}@media (max-width:1818px){a[data-v-cf020a4e]{font-size:12.8px!important}}@media (max-width:1330px){nav[data-v-cf020a4e]{background-color:var(--color-bg);box-shadow:0 5px 5px 0 var(--color-bg);margin:0 0 -2.5em;text-align:right;top:0;width:100%}nav h4 a[data-v-cf020a4e]{display:inline-block;padding-left:0;padding-right:0}nav>ul[data-v-cf020a4e]{background-color:#111;background-color:var(--color-bg-2);border:2px solid var(--color-bg-2);border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-top-left-radius:10px;border-top-right-radius:10px;display:none;margin-bottom:2.5em;padding:1em 1em 1em 0;text-align:left}nav>ul.active[data-v-cf020a4e]{display:block}nav ul li a.active[data-v-cf020a4e]:before{left:0}}</style><style>pre code .line{display:block;min-height:1rem}</style><style>blockquote[data-v-f5babc21]{align-items:flex-start;border:2px solid;border-radius:10px;display:flex;flex-direction:row;justify-content:flex-start;margin:15px 0;padding:0 1em}blockquote i[data-v-f5babc21]{padding-right:1em;padding-top:1.2em}blockquote div[data-v-f5babc21]{width:100%}blockquote.info[data-v-f5babc21]{background-color:color-mix(in srgb,var(--color-info),var(--color-bg) 80%);border-color:color-mix(in srgb,var(--color-info),var(--color-bg) 65%)}blockquote.info[data-v-f5babc21],blockquote.info i[data-v-f5babc21]{color:color-mix(in srgb,var(--color-info),var(--color-bg) 0)}blockquote.warning[data-v-f5babc21]{background-color:color-mix(in srgb,var(--color-warning),var(--color-bg) 80%);border-color:color-mix(in srgb,var(--color-warning),var(--color-bg) 65%)}blockquote.warning[data-v-f5babc21],blockquote.warning i[data-v-f5babc21]{color:color-mix(in srgb,var(--color-warning),var(--color-bg) 0)}blockquote.tip[data-v-f5babc21]{background-color:color-mix(in srgb,var(--color-success),var(--color-bg) 80%);border-color:color-mix(in srgb,var(--color-success),var(--color-bg) 65%)}blockquote.tip[data-v-f5babc21],blockquote.tip i[data-v-f5babc21]{color:color-mix(in srgb,var(--color-success),var(--color-bg) 0)}blockquote.danger[data-v-f5babc21]{background-color:color-mix(in srgb,var(--color-danger),var(--color-bg) 80%);border-color:color-mix(in srgb,var(--color-danger),var(--color-bg) 65%)}blockquote.danger[data-v-f5babc21],blockquote.danger i[data-v-f5babc21]{color:color-mix(in srgb,var(--color-danger),var(--color-bg) 0)}blockquote.default[data-v-f5babc21]{background-color:color-mix(in srgb,var(--color-fg),var(--color-bg) 80%);border-color:color-mix(in srgb,var(--color-fg),var(--color-bg) 65%)}blockquote.default[data-v-f5babc21],blockquote.default i[data-v-f5babc21]{color:color-mix(in srgb,var(--color-fg),var(--color-bg) 0)}</style><style>blockquote.info code{color:var(--color-info)}blockquote.warning code{color:var(--color-warning)}blockquote.tip code{color:var(--color-success)}blockquote.danger code{color:var(--color-danger)}blockquote.default code{color:var(--color-fg)}</style><style>a[data-v-beca98b0]{font-family:Open Sans}i[data-v-beca98b0]{margin-left:.3em}</style><style>img[data-v-45ec8b28]{max-width:100%}</style></head>
<body ><div id="__nuxt"><div data-v-a76652f4><div class="top" data-v-a76652f4 data-v-f35aacb2><header data-v-f35aacb2><div class="logo" data-v-f35aacb2><a href="/" class="" data-v-f35aacb2><img class="do logo" data-v-f35aacb2></a></div><a class="bars" data-v-f35aacb2><i class="fa-solid fa-bars" data-v-f35aacb2></i></a><nav class="" data-v-f35aacb2><a class="close" data-v-f35aacb2><i class="fa-solid fa-close" data-v-f35aacb2></i></a><!--[--><a href="/blueprints" class="" data-v-f35aacb2>Blueprints</a><a href="/features" class="" data-v-f35aacb2>Features</a><a href="/layers" class="" data-v-f35aacb2>Layers</a><a href="/architecture" class="active" data-v-f35aacb2>Architecture</a><a href="/release-notes" class="" data-v-f35aacb2>Release Notes</a><!--]--><a href="https://github.com/mouseless/do" rel="noopener noreferrer" target="_blank" data-v-f35aacb2><i class="fa-brands fa-github" data-v-f35aacb2></i></a></nav></header></div><div class="content" data-v-a76652f4><nav class="side" data-v-a76652f4 data-v-b6b18fe8><h4 data-v-b6b18fe8><a data-v-b6b18fe8>Pages</a></h4><ul class="" data-v-b6b18fe8><li data-v-b6b18fe8><!--[--><!--]--></li></ul></nav><article data-v-a76652f4><!--[--><!--[--><div class="container" data-v-864711a2><div class="content" data-v-864711a2><div class="toc-root" data-v-864711a2><h1 id="application"><!--[-->Application<!--]--></h1><p><!--[--><code><!--[-->Application<!--]--></code> acts as a container object for all the domain objects, features
and layers of the software you develop.<!--]--></p><h2 id="forging-an-application"><!--[-->Forging an Application<!--]--></h2><p><!--[-->DO provides a fluent interface to create an application. You can access it
through <code><!--[-->Forge.New<!--]--></code> under <code><!--[-->Do<!--]--></code> namespace. Below is a sample <code><!--[-->Program.cs<!--]--></code> that
creates and runs a new application;<!--]--></p><!--[--><pre><code><span class="line" line="1"><span class="ct-dd8095">Forge</span><span class="ct-57171e">.</span><span class="ct-dd8095">New
</span></span><span class="line" line="2"><span class="ct-57171e">    .</span><span class="ct-f8c9a8">Application</span><span class="ct-57171e">(</span><span class="ct-dd8095">app</span><span class="ct-57171e"> =&gt;
</span></span><span class="line" line="3"><span class="ct-57171e">    {
</span></span><span class="line" line="4"><span class="ct-57171e">        ...
</span></span><span class="line" line="5"><span class="ct-57171e">    })
</span></span><span class="line" line="6"><span class="ct-57171e">    .</span><span class="ct-f8c9a8">Run</span><span class="ct-57171e">();</span></span></code></pre><!--]--><blockquote class="info" data-v-f5babc21><i class="fa fa-circle-info" data-v-f5babc21></i><div data-v-f5babc21><!--[--><p><!--[--><code><!--[-->Do<!--]--></code> is automatically added as a global using so that you can directly make a
call to <code><!--[-->Forge.New<!--]--></code>.<!--]--></p><!--]--></div></blockquote><h2 id="adding-extensions"><!--[-->Adding Extensions<!--]--></h2><p><!--[-->To add a new extension to an application, you need to make use of the feature /
layer system.<!--]--></p><p><!--[-->DO does not allow you to use <code><!--[-->build.Services.Add<!--]--></code> or <code><!--[-->app.Use<!--]--></code> methods
directly. This is a design decision to avoid any unexpected behavior because
the order of extensions may require a special attention as in <a href="https://learn.microsoft.com/en-us/aspnet/core/security/cors#enable-cors" rel="nofollow" target="_blank" data-v-beca98b0><!--[-->Enabling
Cors<!--]--><i class="fa-solid fa-arrow-up-right-from-square" data-v-beca98b0></i></a>.<!--]--></p><p><!--[--><code><!--[-->As<!--]--></code> method provides an <code><!--[-->ApplicationDescriptor<!--]--></code> instance that has <code><!--[-->Layers<!--]--></code> and
<code><!--[-->Features<!--]--></code> properties. Using these properties, you can add desired extensions
into your application.<!--]--></p><blockquote class="info" data-v-f5babc21><i class="fa fa-circle-info" data-v-f5babc21></i><div data-v-f5babc21><!--[--><p><!--[-->Layers and features come with extension methods exposed directly in <code><!--[-->Do<!--]--></code>
namespace so that you can see options without adding an extra <code><!--[-->using<!--]--></code>.<!--]--></p><!--]--></div></blockquote><h3 id="layers"><!--[-->Layers<!--]--></h3><p><!--[-->Layers are added without any options to configure;<!--]--></p><!--[--><pre><code><span class="line" line="1"><span class="ct-dd8095">app</span><span class="ct-57171e">.</span><span class="ct-dd8095">Layers</span><span class="ct-57171e">.</span><span class="ct-f8c9a8">AddDomain</span><span class="ct-57171e">();
</span></span><span class="line" line="2"><span class="ct-dd8095">app</span><span class="ct-57171e">.</span><span class="ct-dd8095">Layers</span><span class="ct-57171e">.</span><span class="ct-f8c9a8">AddHttpServer</span><span class="ct-57171e">();
</span></span><span class="line" line="3"><span class="ct-dd8095">app</span><span class="ct-57171e">.</span><span class="ct-dd8095">Layers</span><span class="ct-57171e">.</span><span class="ct-f8c9a8">AddDataAccess</span><span class="ct-57171e">();</span></span></code></pre><!--]--><blockquote class="info" data-v-f5babc21><i class="fa fa-circle-info" data-v-f5babc21></i><div data-v-f5babc21><!--[--><p><!--[-->A layer can only be added once.<!--]--></p><!--]--></div></blockquote><p><!--[-->To configure a layer, you need to add a feature mentioned in the next section.<!--]--></p><h3 id="features"><!--[-->Features<!--]--></h3><p><!--[-->Features are added using one of the implementations available in given
configurator;<!--]--></p><!--[--><pre><code><span class="line" line="1"><span class="ct-dd8095">app</span><span class="ct-57171e">.</span><span class="ct-dd8095">Features</span><span class="ct-57171e">.</span><span class="ct-f8c9a8">AddGreeting</span><span class="ct-57171e">(</span><span class="ct-dd8095">c</span><span class="ct-57171e"> =&gt; </span><span class="ct-dd8095">c</span><span class="ct-57171e">.</span><span class="ct-f8c9a8">WelcomePage</span><span class="ct-57171e">());
</span></span><span class="line" line="2"><span class="ct-dd8095">app</span><span class="ct-57171e">.</span><span class="ct-dd8095">Features</span><span class="ct-57171e">.</span><span class="ct-f8c9a8">AddDatabase</span><span class="ct-57171e">(</span><span class="ct-dd8095">c</span><span class="ct-57171e"> =&gt; </span><span class="ct-dd8095">c</span><span class="ct-57171e">.</span><span class="ct-f8c9a8">MySql</span><span class="ct-57171e">());</span></span></code></pre><!--]--><blockquote class="info" data-v-f5babc21><i class="fa fa-circle-info" data-v-f5babc21></i><div data-v-f5babc21><!--[--><p><!--[-->A feature can only be added once.<!--]--></p><!--]--></div></blockquote><p><!--[-->An implementation may ask for additional options within its configurator
method;<!--]--></p><!--[--><pre><code><span class="line" line="1"><span class="ct-dd8095">app</span><span class="ct-57171e">.</span><span class="ct-dd8095">Features</span><span class="ct-57171e">.</span><span class="ct-f8c9a8">AddDatabase</span><span class="ct-57171e">(</span><span class="ct-dd8095">c</span><span class="ct-57171e"> =&gt; </span><span class="ct-dd8095">c</span><span class="ct-57171e">.</span><span class="ct-f8c9a8">MySql</span><span class="ct-57171e">(</span><span class="ct-dd8095">autoUpdateSchema</span><span class="ct-57171e">: </span><span class="ct-593e47">true</span><span class="ct-57171e">));</span></span></code></pre><!--]--><h4 id="overriding-a-configuration"><!--[-->Overriding A Configuration<!--]--></h4><p><!--[-->To override configurations of added features, follow
<a href="/architecture/feature#conventions" class="" data-v-beca98b0><!--[-->feature conventions<!--]--><!----></a>, create a
<code><!--[-->ConfigurationOverrider<!--]--></code> feature and add your overrider after all other
features as shown below;<!--]--></p><!--[--><pre><code><span class="line" line="1"><span class="ct-dd8095">app</span><span class="ct-57171e">.</span><span class="ct-dd8095">Features</span><span class="ct-57171e">.</span><span class="ct-f8c9a8">AddGreeting</span><span class="ct-57171e">(</span><span class="ct-dd8095">c</span><span class="ct-57171e"> =&gt; </span><span class="ct-dd8095">c</span><span class="ct-57171e">.</span><span class="ct-f8c9a8">WelcomePage</span><span class="ct-57171e">());
</span></span><span class="line" line="2"><span class="ct-dd8095">app</span><span class="ct-57171e">.</span><span class="ct-dd8095">Features</span><span class="ct-57171e">.</span><span class="ct-f8c9a8">AddDatabase</span><span class="ct-57171e">(</span><span class="ct-dd8095">c</span><span class="ct-57171e"> =&gt; </span><span class="ct-dd8095">c</span><span class="ct-57171e">.</span><span class="ct-f8c9a8">MySql</span><span class="ct-57171e">());
</span></span><span class="line" line="3"><span class="ct-57171e">...
</span></span><span class="line" line="4"><span class="ct-dd8095">app</span><span class="ct-57171e">.</span><span class="ct-dd8095">Features</span><span class="ct-57171e">.</span><span class="ct-f8c9a8">AddConfigurationOverrider</span><span class="ct-57171e">();</span></span></code></pre><!--]--><h2 id="running-an-application"><!--[-->Running an Application<!--]--></h2><p><!--[-->To run an application you need to call <code><!--[-->Run()<!--]--></code> method after forging it.<!--]--></p><!--[--><pre><code><span class="line" line="1"><span class="ct-dd8095">Forge</span><span class="ct-57171e">.</span><span class="ct-dd8095">New
</span></span><span class="line" line="2"><span class="ct-57171e">    .</span><span class="ct-f8c9a8">Application</span><span class="ct-57171e">(</span><span class="ct-dd8095">app</span><span class="ct-57171e"> =&gt;
</span></span><span class="line" line="3"><span class="ct-57171e">    {
</span></span><span class="line" line="4"><span class="ct-57171e">        </span><span class="ct-dd8095">app</span><span class="ct-57171e">.</span><span class="ct-dd8095">Layers</span><span class="ct-57171e">.</span><span class="ct-f8c9a8">AddHttpServer</span><span class="ct-57171e">();
</span></span><span class="line" line="5"><span class="ct-57171e">    })
</span></span><span class="line" line="6"><span class="ct-57171e">    .</span><span class="ct-f8c9a8">Run</span><span class="ct-57171e">();</span></span></code></pre><!--]--><p><!--[-->Application runs in phases provided by its layers. For example an ASP.NET Core
application typically runs in three phases;<!--]--></p><p><!--[--><img src="./application-1.png" alt="diagram" class="diagram" data-v-45ec8b28><!--]--></p><p><!--[-->These phases come from layers using <code><!--[-->GetPhases()<!--]--></code> method of <code><!--[-->ILayer<!--]--></code>. In the
above example, <code><!--[-->HttpServerLayer<!--]--></code> (ASP.NET Core) introduced these three phases.<!--]--></p><p><!--[-->At the beginning of each phase, application initializes it by providing an
<code><!--[-->ApplicationContext<!--]--></code> instance. This way each phase can add/get certain objects
to/from the context, such as <code><!--[-->IServiceCollection<!--]--></code>, <code><!--[-->IMiddlewareCollection<!--]--></code>,
<code><!--[-->IEndpointRouteBuilder<!--]--></code> etc.<!--]--></p><blockquote class="warning" data-v-f5babc21><i class="fa fa-warning" data-v-f5babc21></i><div data-v-f5babc21><!--[--><p><!--[-->When trying to get a certain object from <code><!--[-->ApplicationContext<!--]--></code>, exact type
should be given. Using any other type that extends or implements the target
object will result in an unsuccessful <code><!--[-->Get<!--]--></code> operation. For example, trying to
<code><!--[-->Get<!--]--></code> a <code><!--[-->WebApplication<!--]--></code> using <code><!--[-->IApplicationBuilder<!--]--></code> type will be unsuccessful.<!--]--></p><!--]--></div></blockquote><p><!--[--><img src="./application-2.png" alt="diagram" class="diagram" data-v-45ec8b28><!--]--></p><p><!--[-->As mentioned <a href="/architecture/#layer" class="" data-v-beca98b0><!--[-->earlier<!--]--><!----></a>, layers provide features with things
to configure. For this to happen, application asks every layer what to configure
at each phase. If a layer has something to get configured at a phase, such as
the <code><!--[-->IMiddlewareCollection<!--]--></code> at the <em><!--[-->Build<!--]--></em> phase, it returns that object within
a phase context in <code><!--[-->ILayer.GetContext()<!--]--></code>. Using this phase context, application
passes the provided object(s) to all of the features through
<code><!--[-->IFeature.Configure()<!--]--></code>. Phase contexts are disposed at the end of their phase.<!--]--></p><p><!--[-->Below sequence diagram shows how an application runs in phases. In this diagram
there are two layers (<code><!--[-->A<!--]--></code> and <code><!--[-->B<!--]--></code>), each having one phase, and two features
(<code><!--[-->X<!--]--></code> and <code><!--[-->Y<!--]--></code>);<!--]--></p><p><!--[--><img src="./application-3.png" alt="diagram" class="diagram" data-v-45ec8b28><!--]--></p><blockquote class="info" data-v-f5babc21><i class="fa fa-circle-info" data-v-f5babc21></i><div data-v-f5babc21><!--[--><p><!--[-->A layer doesn&#39;t necessarily introduce new phases to an application, but all
phases are applied to all layers nevertheless. For example, <code><!--[-->HttpServerLayer<!--]--></code>
introduces <em><!--[-->Build<!--]--></em> phase which is applied to <code><!--[-->Domain<!--]--></code>, <code><!--[-->HttpServer<!--]--></code> and
<code><!--[-->DataAccess<!--]--></code> layers to allow them provide their configuration specific to the
<em><!--[-->Build<!--]--></em> phase.<!--]--></p><!--]--></div></blockquote><h3 id="order-of-phases"><!--[-->Order of Phases<!--]--></h3><p><!--[-->Initialization order of phases are determined by;<!--]--></p><ol><!--[--><li><!--[-->Readiness of a phase through <code><!--[-->IPhase.IsReady()<!--]--></code> method,<!--]--></li><li><!--[-->Value of <code><!--[-->IPhase.Order<!--]--></code> property,<!--]--></li><li><!--[-->And the order they are added to the application.<!--]--></li><!--]--></ol><p><!--[-->Application checks if a phase is ready and if it is not, application keeps it
for the next iteration of initializations.<!--]--></p><p><!--[-->A phase makes use of given application context to determine if it is ready to
be initialized or not. For example, <code><!--[-->Run<!--]--></code> phase looks for <code><!--[-->WebApplication<!--]--></code> in
the given context. If it does not, phase decides not to initialize. This way
application knows that <code><!--[-->Run<!--]--></code> phase is not ready until some other phase, e.g.,
<code><!--[-->Build<!--]--></code> phase, adds <code><!--[-->WebApplication<!--]--></code> to the context.<!--]--></p><p><!--[--><img src="./application-4.png" alt="diagram" class="diagram" data-v-45ec8b28><!--]--></p><blockquote class="info" data-v-f5babc21><i class="fa fa-circle-info" data-v-f5babc21></i><div data-v-f5babc21><!--[--><p><!--[-->All phases need to initialize. Application will cause a
<code><!--[-->CannotProceedException<!--]--></code> if any of the phases never gets initialized.<!--]--></p><!--]--></div></blockquote><p><!--[-->When two phases are ready to be initialized at the same iteration, application
sorts them by their <code><!--[-->Order<!--]--></code> property. A phase can have the following orders;<!--]--></p><ol><!--[--><li><!--[-->Earliest<!--]--></li><li><!--[-->Early<!--]--></li><li><!--[-->Normal<!--]--></li><li><!--[-->Late<!--]--></li><li><!--[-->Latest<!--]--></li><!--]--></ol><p><!--[-->Application may have any number of phases with the same order at the same
iteration. So in that case, they will initialize in the order they are provided
from layers.<!--]--></p><h4 id="earliest-and-latest-phases"><!--[-->Earliest and Latest Phases<!--]--></h4><p><!--[-->There should be only one <em><!--[-->earliest<!--]--></em> phase and one <em><!--[-->latest<!--]--></em> phase per iteration.
If there are multiple <em><!--[-->earliest<!--]--></em> or <em><!--[-->latest<!--]--></em> phases, application will throw an
<code><!--[-->OverlappingPhaseException<!--]--></code> and execution will stop. If you see this exception,
it means you need to reorder phases so that they don&#39;t overlap, or you might
change their readiness so that they run in their own iteration.<!--]--></p><p><!--[-->These special values ensures certain phases are initialized firstly or lastly.
For example, the first phase of <code><!--[-->HttpServerLayer<!--]--></code>, <em><!--[-->Create Builder<!--]--></em>, adds
<code><!--[-->WebApplicationBuilder<!--]--></code> to the application context, which should be the first
thing to be done when running an application. To ensure this, <em><!--[-->Create Builder<!--]--></em>
should be able to declare itself to be the only <em><!--[-->earliest<!--]--></em> phase of its
iteration.<!--]--></p><style>.ct-593e47{color:#569CD6}
.ct-f8c9a8{color:#DCDCAA}
.ct-57171e{color:#D4D4D4}
.ct-dd8095{color:#9CDCFE}</style></div><div class="navigation-buttons-container" data-v-864711a2 data-v-64660ab9><div class="button left" data-v-64660ab9><a href="/architecture" class="" data-v-64660ab9><div class="link-text" data-v-64660ab9><i class="fa-solid fa-caret-left" data-v-64660ab9></i> Previous <h3 data-v-64660ab9>Architecture</h3></div></a></div><div class="button right" data-v-64660ab9><a href="/architecture/layer" class="" data-v-64660ab9><div class="link-text" data-v-64660ab9> Next <i class="fa-solid fa-caret-right" data-v-64660ab9></i><h3 data-v-64660ab9>Layer</h3></div></a></div></div></div><nav data-v-864711a2 data-v-cf020a4e><h4 data-v-cf020a4e><a data-v-cf020a4e>On This Page</a></h4><ul class="" data-v-cf020a4e><!--[--><li data-v-cf020a4e><a aria-current="page" href="/architecture/application#forging-an-application" class="router-link-active router-link-exact-active" data-v-cf020a4e>Forging an Application</a><ul data-v-cf020a4e><!--[--><!--]--></ul></li><li data-v-cf020a4e><a aria-current="page" href="/architecture/application#adding-extensions" class="router-link-active router-link-exact-active" data-v-cf020a4e>Adding Extensions</a><ul data-v-cf020a4e><!--[--><li data-v-cf020a4e><a aria-current="page" href="/architecture/application#layers" class="router-link-active router-link-exact-active" data-v-cf020a4e>Layers</a></li><li data-v-cf020a4e><a aria-current="page" href="/architecture/application#features" class="router-link-active router-link-exact-active" data-v-cf020a4e>Features</a></li><!--]--></ul></li><li data-v-cf020a4e><a aria-current="page" href="/architecture/application#running-an-application" class="router-link-active router-link-exact-active" data-v-cf020a4e>Running an Application</a><ul data-v-cf020a4e><!--[--><li data-v-cf020a4e><a aria-current="page" href="/architecture/application#order-of-phases" class="router-link-active router-link-exact-active" data-v-cf020a4e>Order of Phases</a></li><!--]--></ul></li><!--]--><li data-v-cf020a4e><a class="return-to-top" href="#" data-v-cf020a4e>Return to top</a></li></ul></nav></div><!--]--><!--]--></article></div><div class="bottom" data-v-a76652f4 data-v-2db7ee99><footer data-v-2db7ee99><div class="logo" data-v-2db7ee99><a href="/" class="" data-v-2db7ee99><img class="do logo mono" data-v-2db7ee99></a><span data-v-2db7ee99>Copyright (c) 2023 Mouseless - MIT License</span></div><nav data-v-2db7ee99><!--[--><a href="/blueprints" class="" data-v-2db7ee99>Blueprints</a><a href="/features" class="" data-v-2db7ee99>Features</a><a href="/layers" class="" data-v-2db7ee99>Layers</a><a href="/architecture" class="active" data-v-2db7ee99>Architecture</a><a href="/release-notes" class="" data-v-2db7ee99>Release Notes</a><!--]--><a href="https://github.com/mouseless/do" rel="noopener noreferrer" target="_blank" data-v-2db7ee99><i class="fa-brands fa-github" data-v-2db7ee99></i> /mouseless/do</a></nav></footer></div></div></div><script type="application/json" id="__NUXT_DATA__" data-ssr="true" data-src="/architecture/application/_payload.json">[{"state":1,"_errors":3,"serverRendered":6,"pinia":7,"prerenderedAt":43},["Reactive",2],{},["Reactive",4],{"content-query-2FQT24X9cd":5},null,true,["Reactive",8],{"sectionStore":9,"pageStore":27},{"sections":10},[11,15,18,21,24],{"_path":12,"_dir":13,"title":14},"/blueprints","","Blueprints",{"_path":16,"_dir":13,"title":17},"/features","Features",{"_path":19,"_dir":13,"title":20},"/layers","Layers",{"_path":22,"_dir":13,"title":23},"/architecture","Architecture",{"_path":25,"_dir":13,"title":26},"/release-notes","Release Notes",{"pages":28},[29,34,37,40],{"_path":22,"title":23,"pages":30},[31,32,33],"application","layer","feature",{"_path":35,"title":36},"/architecture/application","Application",{"_path":38,"title":39},"/architecture/layer","Layer",{"_path":41,"title":42},"/architecture/feature","Feature",1696348442473]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{content:{locales:[],defaultLocale:"",integrity:1696348424866,experimental:{stripQueryParameters:false,clientDB:false,advancedIgnoresPattern:false},api:{baseURL:"/api/_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{theme:"dark-plus",preload:["diff","ts","js","css","java","markdown","sql","xml","json","csharp","md","bash"]},wsUrl:"",documentDriven:false,host:"",trailingSlash:false,anchorLinks:{depth:0,exclude:[1]}},baseURL:"",githubURL:"/mouseless/do"},app:{baseURL:"/",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script><script type="module" src="/_nuxt/entry.d9a3ba70.js" crossorigin></script></body>
</html>