[{"data":1,"prerenderedAt":1508},["Reactive",2],{"content-query-2FQT24X9cd":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"_empty":6,"title":8,"description":9,"body":10,"_type":1503,"_id":1504,"_source":1505,"_file":1506,"_extension":1507},"/architecture/application","architecture",false,"","Application","Application acts as a container object for all the domain objects, features\nand layers of the software you develop.",{"type":11,"children":12,"toc":1493},"root",[13,21,32,39,65,182,205,211,216,245,276,300,306,311,406,418,423,428,433,569,581,586,676,683,703,867,873,885,998,1003,1012,1038,1071,1117,1124,1165,1197,1204,1253,1259,1264,1298,1303,1338,1345,1364,1376,1404,1409,1415,1452,1488],{"type":14,"tag":15,"props":16,"children":18},"element","h1",{"id":17},"application",[19],{"type":20,"value":8},"text",{"type":14,"tag":22,"props":23,"children":24},"p",{},[25,30],{"type":14,"tag":26,"props":27,"children":28},"code-inline",{},[29],{"type":20,"value":8},{"type":20,"value":31}," acts as a container object for all the domain objects, features\nand layers of the software you develop.",{"type":14,"tag":33,"props":34,"children":36},"h2",{"id":35},"forging-an-application",[37],{"type":20,"value":38},"Forging an Application",{"type":14,"tag":22,"props":40,"children":41},{},[42,44,49,51,56,58,63],{"type":20,"value":43},"DO provides a fluent interface to create an application. You can access it\nthrough ",{"type":14,"tag":26,"props":45,"children":46},{},[47],{"type":20,"value":48},"Forge.New",{"type":20,"value":50}," under ",{"type":14,"tag":26,"props":52,"children":53},{},[54],{"type":20,"value":55},"Do",{"type":20,"value":57}," namespace. Below is a sample ",{"type":14,"tag":26,"props":59,"children":60},{},[61],{"type":20,"value":62},"Program.cs",{"type":20,"value":64}," that\ncreates and runs a new application;",{"type":14,"tag":66,"props":67,"children":71},"code",{"code":68,"language":69,"meta":70},"Forge.New\n    .Application(app =>\n    {\n        ...\n    })\n    .Run();\n","csharp",null,[72],{"type":14,"tag":73,"props":74,"children":75},"pre",{},[76],{"type":14,"tag":66,"props":77,"children":78},{"__ignoreMap":7},[79,102,137,146,155,164],{"type":14,"tag":80,"props":81,"children":84},"span",{"class":82,"line":83},"line",1,[85,91,97],{"type":14,"tag":80,"props":86,"children":88},{"class":87},"ct-6e52d6",[89],{"type":20,"value":90},"Forge",{"type":14,"tag":80,"props":92,"children":94},{"class":93},"ct-39388b",[95],{"type":20,"value":96},".",{"type":14,"tag":80,"props":98,"children":99},{"class":87},[100],{"type":20,"value":101},"New\n",{"type":14,"tag":80,"props":103,"children":105},{"class":82,"line":104},2,[106,111,116,121,126,131],{"type":14,"tag":80,"props":107,"children":108},{"class":93},[109],{"type":20,"value":110},"    .",{"type":14,"tag":80,"props":112,"children":114},{"class":113},"ct-290622",[115],{"type":20,"value":8},{"type":14,"tag":80,"props":117,"children":118},{"class":93},[119],{"type":20,"value":120},"(",{"type":14,"tag":80,"props":122,"children":123},{"class":87},[124],{"type":20,"value":125},"app",{"type":14,"tag":80,"props":127,"children":128},{"class":93},[129],{"type":20,"value":130}," ",{"type":14,"tag":80,"props":132,"children":134},{"class":133},"ct-91cdab",[135],{"type":20,"value":136},"=>\n",{"type":14,"tag":80,"props":138,"children":140},{"class":82,"line":139},3,[141],{"type":14,"tag":80,"props":142,"children":143},{"class":93},[144],{"type":20,"value":145},"    {\n",{"type":14,"tag":80,"props":147,"children":149},{"class":82,"line":148},4,[150],{"type":14,"tag":80,"props":151,"children":152},{"class":93},[153],{"type":20,"value":154},"        ...\n",{"type":14,"tag":80,"props":156,"children":158},{"class":82,"line":157},5,[159],{"type":14,"tag":80,"props":160,"children":161},{"class":93},[162],{"type":20,"value":163},"    })\n",{"type":14,"tag":80,"props":165,"children":167},{"class":82,"line":166},6,[168,172,177],{"type":14,"tag":80,"props":169,"children":170},{"class":93},[171],{"type":20,"value":110},{"type":14,"tag":80,"props":173,"children":174},{"class":113},[175],{"type":20,"value":176},"Run",{"type":14,"tag":80,"props":178,"children":179},{"class":93},[180],{"type":20,"value":181},"();",{"type":14,"tag":183,"props":184,"children":185},"blockquote",{},[186,191],{"type":14,"tag":22,"props":187,"children":188},{},[189],{"type":20,"value":190},":information_source:",{"type":14,"tag":22,"props":192,"children":193},{},[194,198,200,204],{"type":14,"tag":26,"props":195,"children":196},{},[197],{"type":20,"value":55},{"type":20,"value":199}," is automatically added as a global using so that you can directly make a\ncall to ",{"type":14,"tag":26,"props":201,"children":202},{},[203],{"type":20,"value":48},{"type":20,"value":96},{"type":14,"tag":33,"props":206,"children":208},{"id":207},"adding-extensions",[209],{"type":20,"value":210},"Adding Extensions",{"type":14,"tag":22,"props":212,"children":213},{},[214],{"type":20,"value":215},"To add a new extension to an application, you need to make use of the feature /\nlayer system.",{"type":14,"tag":22,"props":217,"children":218},{},[219,221,226,228,233,235,244],{"type":20,"value":220},"DO does not allow you to use ",{"type":14,"tag":26,"props":222,"children":223},{},[224],{"type":20,"value":225},"build.Services.Add",{"type":20,"value":227}," or ",{"type":14,"tag":26,"props":229,"children":230},{},[231],{"type":20,"value":232},"app.Use",{"type":20,"value":234}," methods\ndirectly. This is a design decision to avoid any unexpected behavior because\nthe order of extensions may require a special attention as in ",{"type":14,"tag":236,"props":237,"children":241},"a",{"href":238,"rel":239},"https://learn.microsoft.com/en-us/aspnet/core/security/cors#enable-cors",[240],"nofollow",[242],{"type":20,"value":243},"Enabling\nCors",{"type":20,"value":96},{"type":14,"tag":22,"props":246,"children":247},{},[248,253,255,260,262,267,269,274],{"type":14,"tag":26,"props":249,"children":250},{},[251],{"type":20,"value":252},"As",{"type":20,"value":254}," method provides an ",{"type":14,"tag":26,"props":256,"children":257},{},[258],{"type":20,"value":259},"ApplicationDescriptor",{"type":20,"value":261}," instance that has ",{"type":14,"tag":26,"props":263,"children":264},{},[265],{"type":20,"value":266},"Layers",{"type":20,"value":268}," and\n",{"type":14,"tag":26,"props":270,"children":271},{},[272],{"type":20,"value":273},"Features",{"type":20,"value":275}," properties. Using these properties, you can add desired extensions\ninto your application.",{"type":14,"tag":183,"props":277,"children":278},{},[279,283],{"type":14,"tag":22,"props":280,"children":281},{},[282],{"type":20,"value":190},{"type":14,"tag":22,"props":284,"children":285},{},[286,288,292,294,299],{"type":20,"value":287},"Layers and features come with extension methods exposed directly in ",{"type":14,"tag":26,"props":289,"children":290},{},[291],{"type":20,"value":55},{"type":20,"value":293},"\nnamespace so that you can see options without adding an extra ",{"type":14,"tag":26,"props":295,"children":296},{},[297],{"type":20,"value":298},"using",{"type":20,"value":96},{"type":14,"tag":301,"props":302,"children":304},"h3",{"id":303},"layers",[305],{"type":20,"value":266},{"type":14,"tag":22,"props":307,"children":308},{},[309],{"type":20,"value":310},"Layers are added without any options to configure;",{"type":14,"tag":66,"props":312,"children":314},{"code":313,"language":69,"meta":70},"app.Layers.AddDomain();\napp.Layers.AddHttpServer();\napp.Layers.AddDataAccess();\n",[315],{"type":14,"tag":73,"props":316,"children":317},{},[318],{"type":14,"tag":66,"props":319,"children":320},{"__ignoreMap":7},[321,350,378],{"type":14,"tag":80,"props":322,"children":323},{"class":82,"line":83},[324,328,332,336,340,345],{"type":14,"tag":80,"props":325,"children":326},{"class":87},[327],{"type":20,"value":125},{"type":14,"tag":80,"props":329,"children":330},{"class":93},[331],{"type":20,"value":96},{"type":14,"tag":80,"props":333,"children":334},{"class":87},[335],{"type":20,"value":266},{"type":14,"tag":80,"props":337,"children":338},{"class":93},[339],{"type":20,"value":96},{"type":14,"tag":80,"props":341,"children":342},{"class":113},[343],{"type":20,"value":344},"AddDomain",{"type":14,"tag":80,"props":346,"children":347},{"class":93},[348],{"type":20,"value":349},"();\n",{"type":14,"tag":80,"props":351,"children":352},{"class":82,"line":104},[353,357,361,365,369,374],{"type":14,"tag":80,"props":354,"children":355},{"class":87},[356],{"type":20,"value":125},{"type":14,"tag":80,"props":358,"children":359},{"class":93},[360],{"type":20,"value":96},{"type":14,"tag":80,"props":362,"children":363},{"class":87},[364],{"type":20,"value":266},{"type":14,"tag":80,"props":366,"children":367},{"class":93},[368],{"type":20,"value":96},{"type":14,"tag":80,"props":370,"children":371},{"class":113},[372],{"type":20,"value":373},"AddHttpServer",{"type":14,"tag":80,"props":375,"children":376},{"class":93},[377],{"type":20,"value":349},{"type":14,"tag":80,"props":379,"children":380},{"class":82,"line":139},[381,385,389,393,397,402],{"type":14,"tag":80,"props":382,"children":383},{"class":87},[384],{"type":20,"value":125},{"type":14,"tag":80,"props":386,"children":387},{"class":93},[388],{"type":20,"value":96},{"type":14,"tag":80,"props":390,"children":391},{"class":87},[392],{"type":20,"value":266},{"type":14,"tag":80,"props":394,"children":395},{"class":93},[396],{"type":20,"value":96},{"type":14,"tag":80,"props":398,"children":399},{"class":113},[400],{"type":20,"value":401},"AddDataAccess",{"type":14,"tag":80,"props":403,"children":404},{"class":93},[405],{"type":20,"value":181},{"type":14,"tag":183,"props":407,"children":408},{},[409,413],{"type":14,"tag":22,"props":410,"children":411},{},[412],{"type":20,"value":190},{"type":14,"tag":22,"props":414,"children":415},{},[416],{"type":20,"value":417},"A layer can only be added once.",{"type":14,"tag":22,"props":419,"children":420},{},[421],{"type":20,"value":422},"To configure a layer, you need to add a feature mentioned in the next section.",{"type":14,"tag":301,"props":424,"children":426},{"id":425},"features",[427],{"type":20,"value":273},{"type":14,"tag":22,"props":429,"children":430},{},[431],{"type":20,"value":432},"Features are added using one of the implementations available in given\nconfigurator;",{"type":14,"tag":66,"props":434,"children":436},{"code":435,"language":69,"meta":70},"app.Features.AddGreeting(c => c.WelcomePage());\napp.Features.AddDatabase(c => c.MySql());\n",[437],{"type":14,"tag":73,"props":438,"children":439},{},[440],{"type":14,"tag":66,"props":441,"children":442},{"__ignoreMap":7},[443,507],{"type":14,"tag":80,"props":444,"children":445},{"class":82,"line":83},[446,450,454,458,462,467,471,476,480,485,489,493,497,502],{"type":14,"tag":80,"props":447,"children":448},{"class":87},[449],{"type":20,"value":125},{"type":14,"tag":80,"props":451,"children":452},{"class":93},[453],{"type":20,"value":96},{"type":14,"tag":80,"props":455,"children":456},{"class":87},[457],{"type":20,"value":273},{"type":14,"tag":80,"props":459,"children":460},{"class":93},[461],{"type":20,"value":96},{"type":14,"tag":80,"props":463,"children":464},{"class":113},[465],{"type":20,"value":466},"AddGreeting",{"type":14,"tag":80,"props":468,"children":469},{"class":93},[470],{"type":20,"value":120},{"type":14,"tag":80,"props":472,"children":473},{"class":87},[474],{"type":20,"value":475},"c",{"type":14,"tag":80,"props":477,"children":478},{"class":93},[479],{"type":20,"value":130},{"type":14,"tag":80,"props":481,"children":482},{"class":133},[483],{"type":20,"value":484},"=>",{"type":14,"tag":80,"props":486,"children":487},{"class":93},[488],{"type":20,"value":130},{"type":14,"tag":80,"props":490,"children":491},{"class":87},[492],{"type":20,"value":475},{"type":14,"tag":80,"props":494,"children":495},{"class":93},[496],{"type":20,"value":96},{"type":14,"tag":80,"props":498,"children":499},{"class":113},[500],{"type":20,"value":501},"WelcomePage",{"type":14,"tag":80,"props":503,"children":504},{"class":93},[505],{"type":20,"value":506},"());\n",{"type":14,"tag":80,"props":508,"children":509},{"class":82,"line":104},[510,514,518,522,526,531,535,539,543,547,551,555,559,564],{"type":14,"tag":80,"props":511,"children":512},{"class":87},[513],{"type":20,"value":125},{"type":14,"tag":80,"props":515,"children":516},{"class":93},[517],{"type":20,"value":96},{"type":14,"tag":80,"props":519,"children":520},{"class":87},[521],{"type":20,"value":273},{"type":14,"tag":80,"props":523,"children":524},{"class":93},[525],{"type":20,"value":96},{"type":14,"tag":80,"props":527,"children":528},{"class":113},[529],{"type":20,"value":530},"AddDatabase",{"type":14,"tag":80,"props":532,"children":533},{"class":93},[534],{"type":20,"value":120},{"type":14,"tag":80,"props":536,"children":537},{"class":87},[538],{"type":20,"value":475},{"type":14,"tag":80,"props":540,"children":541},{"class":93},[542],{"type":20,"value":130},{"type":14,"tag":80,"props":544,"children":545},{"class":133},[546],{"type":20,"value":484},{"type":14,"tag":80,"props":548,"children":549},{"class":93},[550],{"type":20,"value":130},{"type":14,"tag":80,"props":552,"children":553},{"class":87},[554],{"type":20,"value":475},{"type":14,"tag":80,"props":556,"children":557},{"class":93},[558],{"type":20,"value":96},{"type":14,"tag":80,"props":560,"children":561},{"class":113},[562],{"type":20,"value":563},"MySql",{"type":14,"tag":80,"props":565,"children":566},{"class":93},[567],{"type":20,"value":568},"());",{"type":14,"tag":183,"props":570,"children":571},{},[572,576],{"type":14,"tag":22,"props":573,"children":574},{},[575],{"type":20,"value":190},{"type":14,"tag":22,"props":577,"children":578},{},[579],{"type":20,"value":580},"A feature can only be added once.",{"type":14,"tag":22,"props":582,"children":583},{},[584],{"type":20,"value":585},"An implementation may ask for additional options within its configurator\nmethod;",{"type":14,"tag":66,"props":587,"children":589},{"code":588,"language":69,"meta":70},"app.Features.AddDatabase(c => c.MySql(autoUpdateSchema: true));\n",[590],{"type":14,"tag":73,"props":591,"children":592},{},[593],{"type":14,"tag":66,"props":594,"children":595},{"__ignoreMap":7},[596],{"type":14,"tag":80,"props":597,"children":598},{"class":82,"line":83},[599,603,607,611,615,619,623,627,631,635,639,643,647,651,655,660,665,671],{"type":14,"tag":80,"props":600,"children":601},{"class":87},[602],{"type":20,"value":125},{"type":14,"tag":80,"props":604,"children":605},{"class":93},[606],{"type":20,"value":96},{"type":14,"tag":80,"props":608,"children":609},{"class":87},[610],{"type":20,"value":273},{"type":14,"tag":80,"props":612,"children":613},{"class":93},[614],{"type":20,"value":96},{"type":14,"tag":80,"props":616,"children":617},{"class":113},[618],{"type":20,"value":530},{"type":14,"tag":80,"props":620,"children":621},{"class":93},[622],{"type":20,"value":120},{"type":14,"tag":80,"props":624,"children":625},{"class":87},[626],{"type":20,"value":475},{"type":14,"tag":80,"props":628,"children":629},{"class":93},[630],{"type":20,"value":130},{"type":14,"tag":80,"props":632,"children":633},{"class":133},[634],{"type":20,"value":484},{"type":14,"tag":80,"props":636,"children":637},{"class":93},[638],{"type":20,"value":130},{"type":14,"tag":80,"props":640,"children":641},{"class":87},[642],{"type":20,"value":475},{"type":14,"tag":80,"props":644,"children":645},{"class":93},[646],{"type":20,"value":96},{"type":14,"tag":80,"props":648,"children":649},{"class":113},[650],{"type":20,"value":563},{"type":14,"tag":80,"props":652,"children":653},{"class":93},[654],{"type":20,"value":120},{"type":14,"tag":80,"props":656,"children":657},{"class":87},[658],{"type":20,"value":659},"autoUpdateSchema",{"type":14,"tag":80,"props":661,"children":662},{"class":93},[663],{"type":20,"value":664},": ",{"type":14,"tag":80,"props":666,"children":668},{"class":667},"ct-380311",[669],{"type":20,"value":670},"true",{"type":14,"tag":80,"props":672,"children":673},{"class":93},[674],{"type":20,"value":675},"));",{"type":14,"tag":677,"props":678,"children":680},"h4",{"id":679},"overriding-a-configuration",[681],{"type":20,"value":682},"Overriding A Configuration",{"type":14,"tag":22,"props":684,"children":685},{},[686,688,694,696,701],{"type":20,"value":687},"To override configurations of added features, follow\n",{"type":14,"tag":236,"props":689,"children":691},{"href":690},"feature.md#conventions",[692],{"type":20,"value":693},"feature conventions",{"type":20,"value":695},", create a\n",{"type":14,"tag":26,"props":697,"children":698},{},[699],{"type":20,"value":700},"ConfigurationOverrider",{"type":20,"value":702}," feature and add your overrider after all other\nfeatures as shown below;",{"type":14,"tag":66,"props":704,"children":706},{"code":705,"language":69,"meta":70},"app.Features.AddGreeting(c => c.WelcomePage());\napp.Features.AddDatabase(c => c.MySql());\n...\napp.Features.AddConfigurationOverrider();\n",[707],{"type":14,"tag":73,"props":708,"children":709},{},[710],{"type":14,"tag":66,"props":711,"children":712},{"__ignoreMap":7},[713,772,831,839],{"type":14,"tag":80,"props":714,"children":715},{"class":82,"line":83},[716,720,724,728,732,736,740,744,748,752,756,760,764,768],{"type":14,"tag":80,"props":717,"children":718},{"class":87},[719],{"type":20,"value":125},{"type":14,"tag":80,"props":721,"children":722},{"class":93},[723],{"type":20,"value":96},{"type":14,"tag":80,"props":725,"children":726},{"class":87},[727],{"type":20,"value":273},{"type":14,"tag":80,"props":729,"children":730},{"class":93},[731],{"type":20,"value":96},{"type":14,"tag":80,"props":733,"children":734},{"class":113},[735],{"type":20,"value":466},{"type":14,"tag":80,"props":737,"children":738},{"class":93},[739],{"type":20,"value":120},{"type":14,"tag":80,"props":741,"children":742},{"class":87},[743],{"type":20,"value":475},{"type":14,"tag":80,"props":745,"children":746},{"class":93},[747],{"type":20,"value":130},{"type":14,"tag":80,"props":749,"children":750},{"class":133},[751],{"type":20,"value":484},{"type":14,"tag":80,"props":753,"children":754},{"class":93},[755],{"type":20,"value":130},{"type":14,"tag":80,"props":757,"children":758},{"class":87},[759],{"type":20,"value":475},{"type":14,"tag":80,"props":761,"children":762},{"class":93},[763],{"type":20,"value":96},{"type":14,"tag":80,"props":765,"children":766},{"class":113},[767],{"type":20,"value":501},{"type":14,"tag":80,"props":769,"children":770},{"class":93},[771],{"type":20,"value":506},{"type":14,"tag":80,"props":773,"children":774},{"class":82,"line":104},[775,779,783,787,791,795,799,803,807,811,815,819,823,827],{"type":14,"tag":80,"props":776,"children":777},{"class":87},[778],{"type":20,"value":125},{"type":14,"tag":80,"props":780,"children":781},{"class":93},[782],{"type":20,"value":96},{"type":14,"tag":80,"props":784,"children":785},{"class":87},[786],{"type":20,"value":273},{"type":14,"tag":80,"props":788,"children":789},{"class":93},[790],{"type":20,"value":96},{"type":14,"tag":80,"props":792,"children":793},{"class":113},[794],{"type":20,"value":530},{"type":14,"tag":80,"props":796,"children":797},{"class":93},[798],{"type":20,"value":120},{"type":14,"tag":80,"props":800,"children":801},{"class":87},[802],{"type":20,"value":475},{"type":14,"tag":80,"props":804,"children":805},{"class":93},[806],{"type":20,"value":130},{"type":14,"tag":80,"props":808,"children":809},{"class":133},[810],{"type":20,"value":484},{"type":14,"tag":80,"props":812,"children":813},{"class":93},[814],{"type":20,"value":130},{"type":14,"tag":80,"props":816,"children":817},{"class":87},[818],{"type":20,"value":475},{"type":14,"tag":80,"props":820,"children":821},{"class":93},[822],{"type":20,"value":96},{"type":14,"tag":80,"props":824,"children":825},{"class":113},[826],{"type":20,"value":563},{"type":14,"tag":80,"props":828,"children":829},{"class":93},[830],{"type":20,"value":506},{"type":14,"tag":80,"props":832,"children":833},{"class":82,"line":139},[834],{"type":14,"tag":80,"props":835,"children":836},{"class":93},[837],{"type":20,"value":838},"...\n",{"type":14,"tag":80,"props":840,"children":841},{"class":82,"line":148},[842,846,850,854,858,863],{"type":14,"tag":80,"props":843,"children":844},{"class":87},[845],{"type":20,"value":125},{"type":14,"tag":80,"props":847,"children":848},{"class":93},[849],{"type":20,"value":96},{"type":14,"tag":80,"props":851,"children":852},{"class":87},[853],{"type":20,"value":273},{"type":14,"tag":80,"props":855,"children":856},{"class":93},[857],{"type":20,"value":96},{"type":14,"tag":80,"props":859,"children":860},{"class":113},[861],{"type":20,"value":862},"AddConfigurationOverrider",{"type":14,"tag":80,"props":864,"children":865},{"class":93},[866],{"type":20,"value":181},{"type":14,"tag":33,"props":868,"children":870},{"id":869},"running-an-application",[871],{"type":20,"value":872},"Running an Application",{"type":14,"tag":22,"props":874,"children":875},{},[876,878,883],{"type":20,"value":877},"To run an application you need to call ",{"type":14,"tag":26,"props":879,"children":880},{},[881],{"type":20,"value":882},"Run()",{"type":20,"value":884}," method after forging it.",{"type":14,"tag":66,"props":886,"children":888},{"code":887,"language":69,"meta":70},"Forge.New\n    .Application(app =>\n    {\n        app.Layers.AddHttpServer();\n    })\n    .Run();\n",[889],{"type":14,"tag":73,"props":890,"children":891},{},[892],{"type":14,"tag":66,"props":893,"children":894},{"__ignoreMap":7},[895,910,937,944,976,983],{"type":14,"tag":80,"props":896,"children":897},{"class":82,"line":83},[898,902,906],{"type":14,"tag":80,"props":899,"children":900},{"class":87},[901],{"type":20,"value":90},{"type":14,"tag":80,"props":903,"children":904},{"class":93},[905],{"type":20,"value":96},{"type":14,"tag":80,"props":907,"children":908},{"class":87},[909],{"type":20,"value":101},{"type":14,"tag":80,"props":911,"children":912},{"class":82,"line":104},[913,917,921,925,929,933],{"type":14,"tag":80,"props":914,"children":915},{"class":93},[916],{"type":20,"value":110},{"type":14,"tag":80,"props":918,"children":919},{"class":113},[920],{"type":20,"value":8},{"type":14,"tag":80,"props":922,"children":923},{"class":93},[924],{"type":20,"value":120},{"type":14,"tag":80,"props":926,"children":927},{"class":87},[928],{"type":20,"value":125},{"type":14,"tag":80,"props":930,"children":931},{"class":93},[932],{"type":20,"value":130},{"type":14,"tag":80,"props":934,"children":935},{"class":133},[936],{"type":20,"value":136},{"type":14,"tag":80,"props":938,"children":939},{"class":82,"line":139},[940],{"type":14,"tag":80,"props":941,"children":942},{"class":93},[943],{"type":20,"value":145},{"type":14,"tag":80,"props":945,"children":946},{"class":82,"line":148},[947,952,956,960,964,968,972],{"type":14,"tag":80,"props":948,"children":949},{"class":93},[950],{"type":20,"value":951},"        ",{"type":14,"tag":80,"props":953,"children":954},{"class":87},[955],{"type":20,"value":125},{"type":14,"tag":80,"props":957,"children":958},{"class":93},[959],{"type":20,"value":96},{"type":14,"tag":80,"props":961,"children":962},{"class":87},[963],{"type":20,"value":266},{"type":14,"tag":80,"props":965,"children":966},{"class":93},[967],{"type":20,"value":96},{"type":14,"tag":80,"props":969,"children":970},{"class":113},[971],{"type":20,"value":373},{"type":14,"tag":80,"props":973,"children":974},{"class":93},[975],{"type":20,"value":349},{"type":14,"tag":80,"props":977,"children":978},{"class":82,"line":157},[979],{"type":14,"tag":80,"props":980,"children":981},{"class":93},[982],{"type":20,"value":163},{"type":14,"tag":80,"props":984,"children":985},{"class":82,"line":166},[986,990,994],{"type":14,"tag":80,"props":987,"children":988},{"class":93},[989],{"type":20,"value":110},{"type":14,"tag":80,"props":991,"children":992},{"class":113},[993],{"type":20,"value":176},{"type":14,"tag":80,"props":995,"children":996},{"class":93},[997],{"type":20,"value":181},{"type":14,"tag":22,"props":999,"children":1000},{},[1001],{"type":20,"value":1002},"Application runs in phases provided by its layers. For example an ASP.NET Core\napplication typically runs in three phases;",{"type":14,"tag":22,"props":1004,"children":1005},{},[1006],{"type":14,"tag":1007,"props":1008,"children":1011},"img",{"alt":1009,"src":1010},"diagram","./application-1.png",[],{"type":14,"tag":22,"props":1013,"children":1014},{},[1015,1017,1022,1024,1029,1031,1036],{"type":20,"value":1016},"These phases come from layers using ",{"type":14,"tag":26,"props":1018,"children":1019},{},[1020],{"type":20,"value":1021},"GetPhases()",{"type":20,"value":1023}," method of ",{"type":14,"tag":26,"props":1025,"children":1026},{},[1027],{"type":20,"value":1028},"ILayer",{"type":20,"value":1030},". In the\nabove example, ",{"type":14,"tag":26,"props":1032,"children":1033},{},[1034],{"type":20,"value":1035},"HttpServerLayer",{"type":20,"value":1037}," (ASP.NET Core) introduced these three phases.",{"type":14,"tag":22,"props":1039,"children":1040},{},[1041,1043,1048,1050,1055,1057,1062,1064,1069],{"type":20,"value":1042},"At the beginning of each phase, application initializes it by providing an\n",{"type":14,"tag":26,"props":1044,"children":1045},{},[1046],{"type":20,"value":1047},"ApplicationContext",{"type":20,"value":1049}," instance. This way each phase can add/get certain objects\nto/from the context, such as ",{"type":14,"tag":26,"props":1051,"children":1052},{},[1053],{"type":20,"value":1054},"IServiceCollection",{"type":20,"value":1056},", ",{"type":14,"tag":26,"props":1058,"children":1059},{},[1060],{"type":20,"value":1061},"IMiddlewareCollection",{"type":20,"value":1063},",\n",{"type":14,"tag":26,"props":1065,"children":1066},{},[1067],{"type":20,"value":1068},"IEndpointRouteBuilder",{"type":20,"value":1070}," etc.",{"type":14,"tag":183,"props":1072,"children":1073},{},[1074,1079],{"type":14,"tag":22,"props":1075,"children":1076},{},[1077],{"type":20,"value":1078},":warning:",{"type":14,"tag":22,"props":1080,"children":1081},{},[1082,1084,1088,1090,1095,1097,1101,1103,1108,1110,1115],{"type":20,"value":1083},"When trying to get a certain object from ",{"type":14,"tag":26,"props":1085,"children":1086},{},[1087],{"type":20,"value":1047},{"type":20,"value":1089},", exact type\nshould be given. Using any other type that extends or implements the target\nobject will result in an unsuccessful ",{"type":14,"tag":26,"props":1091,"children":1092},{},[1093],{"type":20,"value":1094},"Get",{"type":20,"value":1096}," operation. For example, trying to\n",{"type":14,"tag":26,"props":1098,"children":1099},{},[1100],{"type":20,"value":1094},{"type":20,"value":1102}," a ",{"type":14,"tag":26,"props":1104,"children":1105},{},[1106],{"type":20,"value":1107},"WebApplication",{"type":20,"value":1109}," using ",{"type":14,"tag":26,"props":1111,"children":1112},{},[1113],{"type":20,"value":1114},"IApplicationBuilder",{"type":20,"value":1116}," type will be unsuccessful.",{"type":14,"tag":22,"props":1118,"children":1119},{},[1120],{"type":14,"tag":1007,"props":1121,"children":1123},{"alt":1009,"src":1122},"./application-2.png",[],{"type":14,"tag":22,"props":1125,"children":1126},{},[1127,1129,1135,1137,1141,1143,1149,1151,1156,1158,1163],{"type":20,"value":1128},"As mentioned ",{"type":14,"tag":236,"props":1130,"children":1132},{"href":1131},"./index.md#layer",[1133],{"type":20,"value":1134},"earlier",{"type":20,"value":1136},", layers provide features with things\nto configure. For this to happen, application asks every layer what to configure\nat each phase. If a layer has something to get configured at a phase, such as\nthe ",{"type":14,"tag":26,"props":1138,"children":1139},{},[1140],{"type":20,"value":1061},{"type":20,"value":1142}," at the ",{"type":14,"tag":1144,"props":1145,"children":1146},"em",{},[1147],{"type":20,"value":1148},"Build",{"type":20,"value":1150}," phase, it returns that object within\na phase context in ",{"type":14,"tag":26,"props":1152,"children":1153},{},[1154],{"type":20,"value":1155},"ILayer.GetContext()",{"type":20,"value":1157},". Using this phase context, application\npasses the provided object(s) to all of the features through\n",{"type":14,"tag":26,"props":1159,"children":1160},{},[1161],{"type":20,"value":1162},"IFeature.Configure()",{"type":20,"value":1164},". Phase contexts are disposed at the end of their phase.",{"type":14,"tag":22,"props":1166,"children":1167},{},[1168,1170,1175,1177,1182,1184,1189,1190,1195],{"type":20,"value":1169},"Below sequence diagram shows how an application runs in phases. In this diagram\nthere are two layers (",{"type":14,"tag":26,"props":1171,"children":1172},{},[1173],{"type":20,"value":1174},"A",{"type":20,"value":1176}," and ",{"type":14,"tag":26,"props":1178,"children":1179},{},[1180],{"type":20,"value":1181},"B",{"type":20,"value":1183},"), each having one phase, and two features\n(",{"type":14,"tag":26,"props":1185,"children":1186},{},[1187],{"type":20,"value":1188},"X",{"type":20,"value":1176},{"type":14,"tag":26,"props":1191,"children":1192},{},[1193],{"type":20,"value":1194},"Y",{"type":20,"value":1196},");",{"type":14,"tag":22,"props":1198,"children":1199},{},[1200],{"type":14,"tag":1007,"props":1201,"children":1203},{"alt":1009,"src":1202},"./application-3.png",[],{"type":14,"tag":183,"props":1205,"children":1206},{},[1207,1211],{"type":14,"tag":22,"props":1208,"children":1209},{},[1210],{"type":20,"value":190},{"type":14,"tag":22,"props":1212,"children":1213},{},[1214,1216,1220,1222,1226,1228,1233,1234,1239,1240,1245,1247,1251],{"type":20,"value":1215},"A layer doesn't necessarily introduce new phases to an application, but all\nphases are applied to all layers nevertheless. For example, ",{"type":14,"tag":26,"props":1217,"children":1218},{},[1219],{"type":20,"value":1035},{"type":20,"value":1221},"\nintroduces ",{"type":14,"tag":1144,"props":1223,"children":1224},{},[1225],{"type":20,"value":1148},{"type":20,"value":1227}," phase which is applied to ",{"type":14,"tag":26,"props":1229,"children":1230},{},[1231],{"type":20,"value":1232},"Domain",{"type":20,"value":1056},{"type":14,"tag":26,"props":1235,"children":1236},{},[1237],{"type":20,"value":1238},"HttpServer",{"type":20,"value":268},{"type":14,"tag":26,"props":1241,"children":1242},{},[1243],{"type":20,"value":1244},"DataAccess",{"type":20,"value":1246}," layers to allow them provide their configuration specific to the\n",{"type":14,"tag":1144,"props":1248,"children":1249},{},[1250],{"type":20,"value":1148},{"type":20,"value":1252}," phase.",{"type":14,"tag":301,"props":1254,"children":1256},{"id":1255},"order-of-phases",[1257],{"type":20,"value":1258},"Order of Phases",{"type":14,"tag":22,"props":1260,"children":1261},{},[1262],{"type":20,"value":1263},"Initialization order of phases are determined by;",{"type":14,"tag":1265,"props":1266,"children":1267},"ol",{},[1268,1281,1293],{"type":14,"tag":1269,"props":1270,"children":1271},"li",{},[1272,1274,1279],{"type":20,"value":1273},"Readiness of a phase through ",{"type":14,"tag":26,"props":1275,"children":1276},{},[1277],{"type":20,"value":1278},"IPhase.IsReady()",{"type":20,"value":1280}," method,",{"type":14,"tag":1269,"props":1282,"children":1283},{},[1284,1286,1291],{"type":20,"value":1285},"Value of ",{"type":14,"tag":26,"props":1287,"children":1288},{},[1289],{"type":20,"value":1290},"IPhase.Order",{"type":20,"value":1292}," property,",{"type":14,"tag":1269,"props":1294,"children":1295},{},[1296],{"type":20,"value":1297},"And the order they are added to the application.",{"type":14,"tag":22,"props":1299,"children":1300},{},[1301],{"type":20,"value":1302},"Application checks if a phase is ready and if it is not, application keeps it\nfor the next iteration of initializations.",{"type":14,"tag":22,"props":1304,"children":1305},{},[1306,1308,1312,1314,1318,1320,1324,1326,1330,1332,1336],{"type":20,"value":1307},"A phase makes use of given application context to determine if it is ready to\nbe initialized or not. For example, ",{"type":14,"tag":26,"props":1309,"children":1310},{},[1311],{"type":20,"value":176},{"type":20,"value":1313}," phase looks for ",{"type":14,"tag":26,"props":1315,"children":1316},{},[1317],{"type":20,"value":1107},{"type":20,"value":1319}," in\nthe given context. If it does not, phase decides not to initialize. This way\napplication knows that ",{"type":14,"tag":26,"props":1321,"children":1322},{},[1323],{"type":20,"value":176},{"type":20,"value":1325}," phase is not ready until some other phase, e.g.,\n",{"type":14,"tag":26,"props":1327,"children":1328},{},[1329],{"type":20,"value":1148},{"type":20,"value":1331}," phase, adds ",{"type":14,"tag":26,"props":1333,"children":1334},{},[1335],{"type":20,"value":1107},{"type":20,"value":1337}," to the context.",{"type":14,"tag":22,"props":1339,"children":1340},{},[1341],{"type":14,"tag":1007,"props":1342,"children":1344},{"alt":1009,"src":1343},"./application-4.png",[],{"type":14,"tag":183,"props":1346,"children":1347},{},[1348,1352],{"type":14,"tag":22,"props":1349,"children":1350},{},[1351],{"type":20,"value":190},{"type":14,"tag":22,"props":1353,"children":1354},{},[1355,1357,1362],{"type":20,"value":1356},"All phases need to initialize. Application will cause a\n",{"type":14,"tag":26,"props":1358,"children":1359},{},[1360],{"type":20,"value":1361},"CannotProceedException",{"type":20,"value":1363}," if any of the phases never gets initialized.",{"type":14,"tag":22,"props":1365,"children":1366},{},[1367,1369,1374],{"type":20,"value":1368},"When two phases are ready to be initialized at the same iteration, application\nsorts them by their ",{"type":14,"tag":26,"props":1370,"children":1371},{},[1372],{"type":20,"value":1373},"Order",{"type":20,"value":1375}," property. A phase can have the following orders;",{"type":14,"tag":1265,"props":1377,"children":1378},{},[1379,1384,1389,1394,1399],{"type":14,"tag":1269,"props":1380,"children":1381},{},[1382],{"type":20,"value":1383},"Earliest",{"type":14,"tag":1269,"props":1385,"children":1386},{},[1387],{"type":20,"value":1388},"Early",{"type":14,"tag":1269,"props":1390,"children":1391},{},[1392],{"type":20,"value":1393},"Normal",{"type":14,"tag":1269,"props":1395,"children":1396},{},[1397],{"type":20,"value":1398},"Late",{"type":14,"tag":1269,"props":1400,"children":1401},{},[1402],{"type":20,"value":1403},"Latest",{"type":14,"tag":22,"props":1405,"children":1406},{},[1407],{"type":20,"value":1408},"Application may have any number of phases with the same order at the same\niteration. So in that case, they will initialize in the order they are provided\nfrom layers.",{"type":14,"tag":677,"props":1410,"children":1412},{"id":1411},"earliest-and-latest-phases",[1413],{"type":20,"value":1414},"Earliest and Latest Phases",{"type":14,"tag":22,"props":1416,"children":1417},{},[1418,1420,1425,1427,1432,1434,1438,1439,1443,1445,1450],{"type":20,"value":1419},"There should be only one ",{"type":14,"tag":1144,"props":1421,"children":1422},{},[1423],{"type":20,"value":1424},"earliest",{"type":20,"value":1426}," phase and one ",{"type":14,"tag":1144,"props":1428,"children":1429},{},[1430],{"type":20,"value":1431},"latest",{"type":20,"value":1433}," phase per iteration.\nIf there are multiple ",{"type":14,"tag":1144,"props":1435,"children":1436},{},[1437],{"type":20,"value":1424},{"type":20,"value":227},{"type":14,"tag":1144,"props":1440,"children":1441},{},[1442],{"type":20,"value":1431},{"type":20,"value":1444}," phases, application will throw an\n",{"type":14,"tag":26,"props":1446,"children":1447},{},[1448],{"type":20,"value":1449},"OverlappingPhaseException",{"type":20,"value":1451}," and execution will stop. If you see this exception,\nit means you need to reorder phases so that they don't overlap, or you might\nchange their readiness so that they run in their own iteration.",{"type":14,"tag":22,"props":1453,"children":1454},{},[1455,1457,1461,1462,1467,1469,1474,1476,1480,1482,1486],{"type":20,"value":1456},"These special values ensures certain phases are initialized firstly or lastly.\nFor example, the first phase of ",{"type":14,"tag":26,"props":1458,"children":1459},{},[1460],{"type":20,"value":1035},{"type":20,"value":1056},{"type":14,"tag":1144,"props":1463,"children":1464},{},[1465],{"type":20,"value":1466},"Create Builder",{"type":20,"value":1468},", adds\n",{"type":14,"tag":26,"props":1470,"children":1471},{},[1472],{"type":20,"value":1473},"WebApplicationBuilder",{"type":20,"value":1475}," to the application context, which should be the first\nthing to be done when running an application. To ensure this, ",{"type":14,"tag":1144,"props":1477,"children":1478},{},[1479],{"type":20,"value":1466},{"type":20,"value":1481},"\nshould be able to declare itself to be the only ",{"type":14,"tag":1144,"props":1483,"children":1484},{},[1485],{"type":20,"value":1424},{"type":20,"value":1487}," phase of its\niteration.",{"type":14,"tag":1489,"children":1490},"style",[1491],{"type":20,"value":1492},".ct-380311{color:#569CD6}\n.ct-91cdab{color:#D4D4D4}\n.ct-290622{color:#DCDCAA}\n.ct-39388b{color:#E6E6E6}\n.ct-6e52d6{color:#9CDCFE}",{"title":7,"searchDepth":104,"depth":104,"links":1494},[1495,1496,1500],{"id":35,"depth":104,"text":38},{"id":207,"depth":104,"text":210,"children":1497},[1498,1499],{"id":303,"depth":139,"text":266},{"id":425,"depth":139,"text":273},{"id":869,"depth":104,"text":872,"children":1501},[1502],{"id":1255,"depth":139,"text":1258},"markdown","content:architecture:application.md","content","architecture/application.md","md",1697014212435]