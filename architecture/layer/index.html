<!DOCTYPE html><html  data-capo=""><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Layer</title>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
<link rel="stylesheet" type="text/css" href="https://brand.mouseless.codes/assets/css/default.css">
<link rel="stylesheet" href="/_nuxt/entry.B0G4llYu.css" crossorigin>
<link rel="stylesheet" href="/_nuxt/default.CiEEWF9e.css" crossorigin>
<link rel="stylesheet" href="/_nuxt/Header.DXgBZrgY.css" crossorigin>
<link rel="stylesheet" href="/_nuxt/Side.Csw0E9aP.css" crossorigin>
<link rel="stylesheet" href="/_nuxt/Footer.CrcZ2jrz.css" crossorigin>
<link rel="stylesheet" href="/_nuxt/_...DX__pLc2.css" crossorigin>
<link rel="stylesheet" href="/_nuxt/BottomNavigation.K5MZMzit.css" crossorigin>
<link rel="stylesheet" href="/_nuxt/Toc.vB_GBQoB.css" crossorigin>
<link rel="stylesheet" href="/_nuxt/ProseA.DXx_909P.css" crossorigin>
<link rel="stylesheet" href="/_nuxt/ProsePre.B_fgAJq0.css" crossorigin>
<link rel="stylesheet" href="/_nuxt/ProseBlockquote.Cuq1vwaP.css" crossorigin>
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/2lwfFFTD.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CCstnE0d.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/B-q9G-Wd.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DNw1WgFb.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/B7tuWIi3.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CAYdnnqU.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C4aJ5RSL.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/D2OKCmka.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/qd8yMbKY.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BnNIxdwi.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/of5sZTY8.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/jpg5JYwg.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DAeGG84K.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BRG15eB_.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dym_awWQ.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CxYJgpPD.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CC_Ke2im.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/COQ0XZeZ.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/X56K7Am1.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DGhkV-oW.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/pjIS-xU3.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BstO1n3a.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Px9XmdkY.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BCCicoyX.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dmhy0C4Y.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C1_tNf-g.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C60JM3Kp.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dv7wH1bB.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/MXfg-MWY.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CcN4UkXQ.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BZhSNY08.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/dQ6j7i8H.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ResCqnjn.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CnZsJevX.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BKXeA3vp.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/B059DtfC.js">
<link rel="prefetch" as="style" crossorigin href="/_nuxt/error-404.C3V-3Mc4.css">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/D28_8m5d.js">
<link rel="prefetch" as="style" crossorigin href="/_nuxt/error-500.dGVH929u.css">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/Ci7EbI4b.js">
<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Baked (Objects)">
<meta property="og:image" content="https://baked.mouseless.codes/favicon.ico">
<meta property="og:image:width" content="50">
<meta property="og:image:height" content="50">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<meta property="og:title" content="Layer">
<meta name="description" content="Each ILayer implementation represents an internal system component of the
software you develop. A layer provides application features with configuration
of this system component so that the features can bind domain objects and
system components together.">
<meta property="og:description" content="Each ILayer implementation represents an internal system component of the
software you develop. A layer provides application features with configuration
of this system component so that the features can bind domain objects and
system components together.">
<script type="module" src="/_nuxt/2lwfFFTD.js" crossorigin></script>
<link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/6520cdaf-27af-4791-aa13-eb5ae8be67b6.json"></head><body><div id="__nuxt"><!--[--><div class="top" data-v-43e4ab6d data-v-89e91d7a><header data-v-89e91d7a><div class="logo" data-v-89e91d7a><a href="/" class="" data-v-89e91d7a><img class="baked logo" data-v-89e91d7a></a></div><!----><a class="bars" data-v-89e91d7a><i class="fa-solid fa-bars" data-v-89e91d7a></i></a><nav class="" data-v-89e91d7a><a class="close" data-v-89e91d7a><i class="fa-solid fa-close" data-v-89e91d7a></i></a><!--[--><a href="/recipes/" class="" data-v-89e91d7a>Recipes</a><a href="/features/" class="" data-v-89e91d7a>Features</a><a href="/layers/" class="" data-v-89e91d7a>Layers</a><a href="/architecture/" class="active" data-v-89e91d7a>Architecture</a><a href="/release-notes/" class="" data-v-89e91d7a>Release Notes</a><!--]--><a href="https://github.com/mouseless/baked" rel="noopener noreferrer" target="_blank" data-v-89e91d7a><i class="fa-brands fa-github" data-v-89e91d7a></i></a><a href="https://matrix.to/#/#baked:mouseless.org" rel="noopener noreferrer" target="_blank" class="matrix" data-v-89e91d7a><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" style="" data-v-89e91d7a><g clip-path="url(#clip0_602_4)" data-v-89e91d7a><path d="M0.844 0.735023V31.266H3.041V32.001H0V0.00102344H3.041V0.736023L0.844 0.735023ZM10.235 10.412V11.959H10.276C10.6603 11.3936 11.1698 10.9244 11.765 10.588C12.344 10.265 13.016 10.104 13.765 10.104C14.484 10.104 15.145 10.245 15.74 10.521C16.339 10.802 16.787 11.297 17.099 12C17.438 11.5 17.902 11.057 18.479 10.677C19.058 10.297 19.746 10.104 20.542 10.104C21.1088 10.0983 21.6736 10.1737 22.219 10.328C22.74 10.473 23.178 10.708 23.547 11.031C23.912 11.36 24.198 11.782 24.407 12.303C24.61 12.823 24.714 13.454 24.714 14.194V21.829H21.585V15.361C21.5859 14.9991 21.5699 14.6374 21.537 14.277C21.518 13.9705 21.4366 13.6711 21.298 13.397C21.1674 13.1451 20.9639 12.9384 20.714 12.804C20.459 12.652 20.105 12.58 19.667 12.58C19.224 12.58 18.87 12.663 18.599 12.829C18.3333 12.9945 18.1133 13.2238 17.959 13.496C17.7987 13.7828 17.6942 14.0974 17.651 14.423C17.6005 14.7702 17.5728 15.1203 17.568 15.471V21.83H14.437V15.429C14.437 15.09 14.432 14.757 14.412 14.429C14.4029 14.1146 14.3375 13.8044 14.219 13.513C14.1146 13.234 13.9204 12.9976 13.667 12.841C13.412 12.674 13.031 12.586 12.531 12.586C12.38 12.586 12.183 12.617 11.943 12.685C11.703 12.752 11.464 12.877 11.24 13.06C10.9866 13.2784 10.7854 13.5507 10.651 13.857C10.49 14.2 10.412 14.653 10.412 15.216V21.836H7.281V10.415L10.235 10.412ZM31.156 31.265V0.734023H28.959V-0.000976562H32V31.999H28.959V31.264L31.156 31.265Z" fill="black" data-v-89e91d7a></path></g><defs data-v-89e91d7a><clipPath id="clip0_602_4" data-v-89e91d7a><rect width="32" height="32" fill="black" data-v-89e91d7a></rect></clipPath></defs></svg></a></nav></header></div><div class="content" data-v-43e4ab6d><nav class="side" data-v-43e4ab6d data-v-3a8dc5b3><h4 data-v-3a8dc5b3><a data-v-3a8dc5b3>Pages</a></h4><ul class="" data-v-3a8dc5b3><li data-v-3a8dc5b3><!--[--><!--]--></li></ul></nav><article data-v-43e4ab6d><!--[--><!--[--><div class="container" data-v-162c8372><div class="content" data-v-162c8372><div class="toc-root" data-v-162c8372><h1 id="layer"><!--[-->Layer<!--]--></h1><p><!--[-->Each <code class=""><!--[-->ILayer<!--]--></code> implementation represents an internal system component of the
software you develop. A layer provides application features with configuration
of this system component so that the features can bind domain objects and
system components together.<!--]--></p><p><!--[-->Let&#39;s take relational database as an example. A relational database is treated
as an internal system component and is introduced by the <code class=""><!--[-->DataAccessLayer<!--]--></code> along
with a configuration API. This API enables a feature to map your domain entities
to database tables.<!--]--></p><p><!--[-->Another good example is the <code class=""><!--[-->HttpServerLayer<!--]--></code>. This layer introduces the ASP.NET
Core framework into your application. It provides three phases, as mentioned in
<a href="/architecture/application" class="" data-v-af122455><!--[-->Application<!--]--><!----></a>, along with <code class=""><!--[-->IMiddlewareCollection<!--]--></code> and
<code class=""><!--[-->IEndpointRouteBuilder<!--]--></code> objects as its configuration API. This way, any feature
has the ability to use a middleware or add routes to the application.<!--]--></p><h2 id="conventions"><!--[-->Conventions<!--]--></h2><p><!--[-->For a consistent developer experience, follow below conventions when
implementing a new layer;<!--]--></p><ol><!--[--><li><!--[-->Place all layer related classes under the same folder named after layer,
e.g., <code class=""><!--[-->Runtime/<!--]--></code><!--]--></li><li><!--[-->Use <code class=""><!--[-->Layer<!--]--></code> suffix in layer class name, e.g.,
<code class=""><!--[-->Runtime/RuntimeLayer.cs<!--]--></code><!--]--></li><li><!--[-->Provide extension methods in <code class=""><!--[-->Baked<!--]--></code> namespace, e.g.,
<code class=""><!--[-->Runtime/RuntimeExtensions.cs<!--]--></code>;
<ol><!--[--><li><!--[--><code class=""><!--[-->Add<!--]--></code> extension to <code class=""><!--[-->List&lt;ILayer&gt;<!--]--></code>, e.g., <code class=""><!--[-->AddRuntime()<!--]--></code><!--]--></li><li><!--[--><code class=""><!--[-->Get<!--]--></code> extensions to <code class=""><!--[-->ApplicationContext<!--]--></code>, e.g.,
<code class=""><!--[-->GetWebApplicationBuilder()<!--]--></code>, <code class=""><!--[-->GetWebApplication()<!--]--></code><!--]--></li><li><!--[--><code class=""><!--[-->Configure<!--]--></code> extensions to <code class=""><!--[-->LayerConfigurator<!--]--></code> per configuration
target(s), e.g., <code class=""><!--[-->ConfigureServiceCollection()<!--]--></code><!--]--></li><!--]--></ol><!--]--></li><li><!--[-->Place phase implementations as nested classes under the layer class<!--]--></li><li><!--[-->Don&#39;t use any suffix for phases and use method-like names, e.g., <code class=""><!--[-->Build<!--]--></code> and
<code class=""><!--[-->Run<!--]--></code><!--]--></li><!--]--></ol><p><!--[-->Please refer to existing layers in <a href="https://github.com/mouseless/baked" rel="nofollow" target="_blank" class="external" data-v-af122455><!--[-->github.com/mouseless/baked<!--]--><i class="fa-solid fa-arrow-up-right-from-square" data-v-af122455></i></a> for examples.<!--]--></p><h2 id="creating-a-layer"><!--[-->Creating A Layer<!--]--></h2><p><!--[-->To create a layer, create a class using above conventions and extend
<code class=""><!--[-->LayerBase<!--]--></code>.<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> LayerX</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#E6E6E6">    ...
</span></span><span class="line" line="4"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><blockquote class="tip" data-v-52748c37><i class="fa fa-lightbulb" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->You can directly implement provided interface <code class=""><!--[-->ILayer<!--]--></code>, however we&#39;ve created
some base classes to make it easier for you to create layers. All examples
demonstrate usage of these base classes.<!--]--></p><!--]--></div></blockquote><h3 id="id-of-a-layer"><!--[--><code class=""><!--[-->Id<!--]--></code> of a Layer<!--]--></h3><p><!--[--><code class=""><!--[-->ILayer<!--]--></code> has an <code class=""><!--[-->Id<!--]--></code> property which should be a unique per <code class=""><!--[-->Application<!--]--></code>
instance. <code class=""><!--[-->LayerBase<!--]--></code> sets the <code class=""><!--[-->Id<!--]--></code> as name of the concrete class e.g.,
<code class=""><!--[-->LayerX<!--]--></code> at above example.<!--]--></p><p><!--[-->You can override its value in layer implementation class as shown below;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> LayerX</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#569CD6"> string</span><span style="--shiki-default:#9CDCFE"> Id</span><span style="--shiki-default:#D4D4D4"> =&gt;</span><span style="--shiki-default:#CE9178"> &quot;CustomUniqueId&quot;
</span></span><span class="line" line="4"><span style="--shiki-default:#D4D4D4">    ..</span><span style="--shiki-default:#E6E6E6">.
</span></span><span class="line" line="5"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><h2 id="adding-phases"><!--[-->Adding Phases<!--]--></h2><p><!--[-->By default <code class=""><!--[-->LayerBase<!--]--></code> returns no phases. To add one or more phases into the
application, you need to override <code class=""><!--[-->GetStartPhases()<!--]--></code> or <code class=""><!--[-->GetGeneratePhases()<!--]--></code> methods
as shown below;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> SampleLayer</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#4EC9B0"> IEnumerable</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">IPhase</span><span style="--shiki-default:#E6E6E6">&gt; </span><span style="--shiki-default:#DCDCAA">GetStartPhases</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="4"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="5"><span style="--shiki-default:#C586C0">        yield</span><span style="--shiki-default:#C586C0"> return</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#4EC9B0"> DoA</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="6"><span style="--shiki-default:#E6E6E6">    }
</span></span><span class="line" line="7"><span emptylineplaceholder="true">
</span></span><span class="line" line="8"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#4EC9B0"> IEnumerable</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">IPhase</span><span style="--shiki-default:#E6E6E6">&gt; </span><span style="--shiki-default:#DCDCAA">GetGeneratePhases</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="9"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="10"><span style="--shiki-default:#C586C0">        yield</span><span style="--shiki-default:#C586C0"> return</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#4EC9B0"> DoB</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="11"><span style="--shiki-default:#E6E6E6">    }
</span></span><span class="line" line="12"><span emptylineplaceholder="true">
</span></span><span class="line" line="13"><span style="--shiki-default:#569CD6">    public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> DoA</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">PhaseBase</span><span style="--shiki-default:#E6E6E6"> { ... }
</span></span><span class="line" line="14"><span style="--shiki-default:#569CD6">    public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> DoB</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">PhaseBase</span><span style="--shiki-default:#E6E6E6"> { ... }
</span></span><span class="line" line="15"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><p><!--[-->Here <code class=""><!--[-->SampleLayer<!--]--></code> adds two phases, <code class=""><!--[-->DoA<!--]--></code> to <code class=""><!--[-->Start<!--]--></code> mode and <code class=""><!--[-->DoB<!--]--></code> to <code class=""><!--[-->Generate<!--]--></code>
mode of the application.<!--]--></p><blockquote class="tip" data-v-52748c37><i class="fa fa-lightbulb" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->By convention place the phase implementations as a nested class in the layer
it is added.<!--]--></p><!--]--></div></blockquote><h3 id="initializing-a-phase"><!--[-->Initializing a Phase<!--]--></h3><p><!--[--><code class=""><!--[-->PhaseBase<!--]--></code> class has <code class=""><!--[-->Initialize()<!--]--></code> method to override so that it can add an
object to the application context via <code class=""><!--[-->Context<!--]--></code> property. Base <code class=""><!--[-->Initialize()<!--]--></code>
method does not add any objects to the application. Below, you can see how
<code class=""><!--[-->CreateBuilder<!--]--></code> phase adds <code class=""><!--[-->WebApplicationBuilder<!--]--></code> to the context;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> CreateBuilder</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">PhaseBase
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#569CD6"> void</span><span style="--shiki-default:#DCDCAA"> Initialize</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="4"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="5"><span style="--shiki-default:#569CD6">        var</span><span style="--shiki-default:#9CDCFE"> build</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#9CDCFE"> WebApplication</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateBuilder</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="6"><span emptylineplaceholder="true">
</span></span><span class="line" line="7"><span style="--shiki-default:#9CDCFE">        Context</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">Add</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">build</span><span style="--shiki-default:#E6E6E6">);
</span></span><span class="line" line="8"><span style="--shiki-default:#E6E6E6">    }
</span></span><span class="line" line="9"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><blockquote class="tip" data-v-52748c37><i class="fa fa-lightbulb" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->You can directly implement provided interface <code class=""><!--[-->IPhase<!--]--></code>, however we&#39;ve created
some base classes to make it easier for you to create phases. All examples
demonstrate usage of these base classes.<!--]--></p><!--]--></div></blockquote><h3 id="readiness-via-dependencies"><!--[-->Readiness via Dependencies<!--]--></h3><p><!--[-->You can define context dependencies via generic <code class=""><!--[-->PhaseBase&lt;&gt;<!--]--></code> classes to make
the phase wait until context is ready to provide that dependency. For example,
<code class=""><!--[-->Build<!--]--></code> depends on the <code class=""><!--[-->WebApplicationBuilder<!--]--></code> instance as shown below;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> Build</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">PhaseBase</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">WebApplicationBuilder</span><span style="--shiki-default:#E6E6E6">&gt;
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#569CD6"> void</span><span style="--shiki-default:#DCDCAA"> Initialize</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">WebApplicationBuilder</span><span style="--shiki-default:#9CDCFE"> build</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="4"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="5"><span style="--shiki-default:#569CD6">        var</span><span style="--shiki-default:#9CDCFE"> app</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#9CDCFE"> build</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">Build</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="6"><span emptylineplaceholder="true">
</span></span><span class="line" line="7"><span style="--shiki-default:#9CDCFE">        Context</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">Add</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">app</span><span style="--shiki-default:#E6E6E6">);
</span></span><span class="line" line="8"><span style="--shiki-default:#E6E6E6">    }
</span></span><span class="line" line="9"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><p><!--[--><code class=""><!--[-->PhaseBase&lt;T&gt;<!--]--></code> class requires <code class=""><!--[-->Initialize(T t)<!--]--></code> method to be implemented.<!--]--></p><blockquote class="info" data-v-52748c37><i class="fa fa-circle-info" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->You can provide more than one dependency for a phase. E.g., <code class=""><!--[-->Phase&lt;X, Y&gt;<!--]--></code>
will require <code class=""><!--[-->Initialize(X x, Y y)<!--]--></code> method to be implemented.<!--]--></p><!--]--></div></blockquote><blockquote class="warning" data-v-52748c37><i class="fa fa-warning" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->Type of the dependency provided, must be exactly the same as the type of
dependency in <code class=""><!--[-->ApplicationContext<!--]--></code>. For more information
<a href="/architecture/application#running-an-application" class="" data-v-af122455><!--[-->Running an Application<!--]--><!----></a><!--]--></p><!--]--></div></blockquote><p><!--[-->Phases can also define context dependencies from other phase artifacts. For
example <code class=""><!--[-->HttpServerLayer.Build<!--]--></code> phase can require <code class=""><!--[-->IServiceCollection<!--]--></code> which
will be provided during <code class=""><!--[-->DependencyInjectionLayer.AddServices<!--]--></code> phase.<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#6A9955">// DependencyInjectionLayer
</span></span><span class="line" line="2"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> AddServices</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">IServiceCollection</span><span style="--shiki-default:#9CDCFE"> _services</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="3"><span style="--shiki-default:#E6E6E6">    : </span><span style="--shiki-default:#4EC9B0">PhaseBase</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">PhaseOrder</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#4EC9B0">Early</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="4"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="5"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#569CD6"> void</span><span style="--shiki-default:#DCDCAA"> Initialize</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="6"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="7"><span style="--shiki-default:#9CDCFE">        Context</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">Add</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_services</span><span style="--shiki-default:#E6E6E6">);
</span></span><span class="line" line="8"><span style="--shiki-default:#E6E6E6">    }
</span></span><span class="line" line="9"><span style="--shiki-default:#E6E6E6">}
</span></span><span class="line" line="10"><span emptylineplaceholder="true">
</span></span><span class="line" line="11"><span style="--shiki-default:#6A9955">// HttpServerLayer
</span></span><span class="line" line="12"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> Build</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="13"><span style="--shiki-default:#E6E6E6">    : </span><span style="--shiki-default:#4EC9B0">PhaseBase</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">WebApplicationBuilder</span><span style="--shiki-default:#E6E6E6">, </span><span style="--shiki-default:#4EC9B0">IServiceCollection</span><span style="--shiki-default:#E6E6E6">&gt;(</span><span style="--shiki-default:#4EC9B0">PhaseOrder</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#4EC9B0">Latest</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="14"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="15"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#569CD6"> void</span><span style="--shiki-default:#DCDCAA"> Initialize</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">WebApplicationBuilder</span><span style="--shiki-default:#9CDCFE"> build</span><span style="--shiki-default:#E6E6E6">, </span><span style="--shiki-default:#4EC9B0">IServiceCollection</span><span style="--shiki-default:#9CDCFE"> services</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="16"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="17"><span style="--shiki-default:#D4D4D4">        ..</span><span style="--shiki-default:#E6E6E6">.
</span></span><span class="line" line="18"><span style="--shiki-default:#E6E6E6">    }
</span></span><span class="line" line="19"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><blockquote class="warning" data-v-52748c37><i class="fa fa-warning" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->This type of artifact requirement will create a dependency between phases
which results to a layer to layer dependency. In the above example <code class=""><!--[-->Build<!--]--></code>
phase will never execute unless <code class=""><!--[-->DependencyLayer<!--]--></code> is added to the application<!--]--></p><!--]--></div></blockquote><h3 id="order-of-a-phase"><!--[-->Order of a Phase<!--]--></h3><p><!--[--><code class=""><!--[-->PhaseBase<!--]--></code> classes has <code class=""><!--[-->order<!--]--></code> parameter in their constructors. Default order
is <code class=""><!--[-->PhaseOrder.Normal<!--]--></code>. If you need to change the order, pass the desired order
to this parameter as shown below;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> DoThisEarlyOn</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">    : </span><span style="--shiki-default:#4EC9B0">PhaseBase</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">PhaseOrder</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#4EC9B0">Early</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="3"><span style="--shiki-default:#E6E6E6">{ }
</span></span></code><!--]--></pre><!--]--><h2 id="providing-configuration"><!--[-->Providing Configuration<!--]--></h2><p><!--[-->Layers provide configuration objects phase by phase. This means a layer can
provide two different configuration objects for two different phases. For this
reason, a layer returns <code class=""><!--[-->PhaseContext<!--]--></code> instance per phase to which it provides
configuration.<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> LayerX</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#E6E6E6">&gt;
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> LayerXConfiguration</span><span style="--shiki-default:#9CDCFE"> _configuration</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#4EC9B0"> PhaseContext</span><span style="--shiki-default:#DCDCAA"> GetContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="6"><span style="--shiki-default:#9CDCFE">        phase</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_configuration</span><span style="--shiki-default:#E6E6E6">);
</span></span><span class="line" line="7"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><p><!--[-->In this example, you see a layer named <code class=""><!--[-->LayerX<!--]--></code> providing a
<code class=""><!--[-->LayerXConfiguration<!--]--></code> instance during <code class=""><!--[-->AddServices<!--]--></code> phase.<!--]--></p><blockquote class="info" data-v-52748c37><i class="fa fa-circle-info" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->By default, a layer returns <code class=""><!--[-->PhaseContext.Empty<!--]--></code> instance for the phases it
does not provide a configuration. This means <code class=""><!--[-->Application<!--]--></code> skips that layer
for the phases it doesn&#39;t have anything to configure.<!--]--></p><!--]--></div></blockquote><h3 id="using-non-generic-layerbase"><!--[-->Using non-generic <code class=""><!--[-->LayerBase<!--]--></code><!--]--></h3><p><!--[--><code class=""><!--[-->LayerBase&lt;&gt;<!--]--></code> classes allow up to three generic arguments. If you need to
implement a layer that has things to configure during more than three phases,
use non-generic <code class=""><!--[-->LayerBase<!--]--></code> class, override <code class=""><!--[-->GetContext(IPhase phase)<!--]--></code> method
and switch given phase according to its type;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> MyLayer</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#4EC9B0"> PhaseContext</span><span style="--shiki-default:#DCDCAA"> GetContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">IPhase</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="4"><span style="--shiki-default:#9CDCFE">        phase</span><span style="--shiki-default:#C586C0"> switch
</span></span><span class="line" line="5"><span style="--shiki-default:#E6E6E6">        {
</span></span><span class="line" line="6"><span style="--shiki-default:#4EC9B0">            PhaseA</span><span style="--shiki-default:#D4D4D4"> =&gt;</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#D4D4D4">..</span><span style="--shiki-default:#E6E6E6">.),
</span></span><span class="line" line="7"><span style="--shiki-default:#4EC9B0">            PhaseB</span><span style="--shiki-default:#D4D4D4"> =&gt;</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#D4D4D4">..</span><span style="--shiki-default:#E6E6E6">.),
</span></span><span class="line" line="8"><span style="--shiki-default:#569CD6">            _</span><span style="--shiki-default:#D4D4D4"> =&gt;</span><span style="--shiki-default:#569CD6"> base</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">GetContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">phase</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="9"><span style="--shiki-default:#E6E6E6">        };
</span></span><span class="line" line="10"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><h3 id="before-and-after-a-phase"><!--[-->Before and After a Phase<!--]--></h3><p><!--[-->Layers might need to do some standard stuff before and after a phase is applied
to all features for all layers. Use <code class=""><!--[-->GetContext()<!--]--></code> method to do stuff before,
and <code class=""><!--[-->onDispose:<!--]--></code> delegate to do stuff after.<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> LayerX</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#E6E6E6">&gt;
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> LayerXConfiguration</span><span style="--shiki-default:#9CDCFE"> _configuration</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#4EC9B0"> PhaseContext</span><span style="--shiki-default:#DCDCAA"> GetContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="6"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="7"><span style="--shiki-default:#569CD6">        var</span><span style="--shiki-default:#9CDCFE"> services</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#9CDCFE"> Context</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">GetServiceCollection</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span style="--shiki-default:#9CDCFE">        services</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">AddStandardStuffBefore</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="10"><span emptylineplaceholder="true">
</span></span><span class="line" line="11"><span style="--shiki-default:#9CDCFE">        phase</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_configuration</span><span style="--shiki-default:#E6E6E6">,
</span></span><span class="line" line="12"><span style="--shiki-default:#9CDCFE">            onDispose</span><span style="--shiki-default:#E6E6E6">: () </span><span style="--shiki-default:#D4D4D4">=&gt;</span><span style="--shiki-default:#9CDCFE"> services</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">AddStandardStuffAfter</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="13"><span style="--shiki-default:#E6E6E6">        );
</span></span><span class="line" line="14"><span style="--shiki-default:#E6E6E6">    }
</span></span><span class="line" line="15"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><blockquote class="info" data-v-52748c37><i class="fa fa-circle-info" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->Notice that a layer has access to the <code class=""><!--[-->ApplicationContext<!--]--></code> instance through
<code class=""><!--[-->Context<!--]--></code> property provided in <code class=""><!--[-->LayerBase<!--]--></code> base class.<!--]--></p><!--]--></div></blockquote><blockquote class="warning" data-v-52748c37><i class="fa fa-warning" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[--><code class=""><!--[-->GetContext()<!--]--></code> method is called for every layer before applying any of them
to features. And <code class=""><!--[-->onDispose:<!--]--></code> actions are called after applying these
contexts to all features.<!--]--></p><!--]--></div></blockquote><h3 id="providing-multiple-targets"><!--[-->Providing Multiple Targets<!--]--></h3><p><!--[-->It is possible to provide up to three configuration objects for the same phase.
There are two ways of providing multiple targets; at once or one by one.<!--]--></p><h4 id="at-once"><!--[-->At Once<!--]--></h4><p><!--[-->Below code demonstrates providing two configuration objects at once;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> LayerX</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#E6E6E6">&gt;
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> Configuration1</span><span style="--shiki-default:#9CDCFE"> _configuration1</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="4"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> Configuration2</span><span style="--shiki-default:#9CDCFE"> _configuration2</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="5"><span emptylineplaceholder="true">
</span></span><span class="line" line="6"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#4EC9B0"> PhaseContext</span><span style="--shiki-default:#DCDCAA"> GetContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="7"><span style="--shiki-default:#9CDCFE">        phase</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_configuration1</span><span style="--shiki-default:#E6E6E6">, </span><span style="--shiki-default:#9CDCFE">_configuration2</span><span style="--shiki-default:#E6E6E6">);
</span></span><span class="line" line="8"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><p><!--[-->This phase context will require an action with two parameter in a feature;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D4D4D4">..</span><span style="--shiki-default:#E6E6E6">.
</span></span><span class="line" line="2"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> void</span><span style="--shiki-default:#DCDCAA"> Configure</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">LayerConfigurator</span><span style="--shiki-default:#9CDCFE"> configurator</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="3"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="4"><span style="--shiki-default:#9CDCFE">    configurator</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">Configure</span><span style="--shiki-default:#E6E6E6">((</span><span style="--shiki-default:#4EC9B0">Configuration1</span><span style="--shiki-default:#9CDCFE"> configuration1</span><span style="--shiki-default:#E6E6E6">, </span><span style="--shiki-default:#4EC9B0">Configuration2</span><span style="--shiki-default:#9CDCFE"> configuration2</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="5"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="6"><span style="--shiki-default:#6A9955">        // use both objects to configure
</span></span><span class="line" line="7"><span style="--shiki-default:#E6E6E6">    });
</span></span><span class="line" line="8"><span style="--shiki-default:#E6E6E6">}
</span></span><span class="line" line="9"><span style="--shiki-default:#D4D4D4">..</span><span style="--shiki-default:#E6E6E6">.
</span></span></code><!--]--></pre><!--]--><p><!--[-->See <a href="/architecture/feature" class="" data-v-af122455><!--[-->Feature<!--]--><!----></a> for more information on using layer configurators
for features.<!--]--></p><h4 id="one-by-one"><!--[-->One by One<!--]--></h4><p><!--[-->Below code demonstrates providing configuration objects one by one;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> LayerX</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#E6E6E6">&gt;
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> Configuration1</span><span style="--shiki-default:#9CDCFE"> _configuration1</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="4"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> Configuration2</span><span style="--shiki-default:#9CDCFE"> _configuration2</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="5"><span emptylineplaceholder="true">
</span></span><span class="line" line="6"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#4EC9B0"> PhaseContext</span><span style="--shiki-default:#DCDCAA"> GetContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="7"><span style="--shiki-default:#9CDCFE">        phase</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateContextBuilder</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="8"><span style="--shiki-default:#E6E6E6">            .</span><span style="--shiki-default:#DCDCAA">Add</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_configuration1</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="9"><span style="--shiki-default:#E6E6E6">            .</span><span style="--shiki-default:#DCDCAA">Add</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_configuration2</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="10"><span style="--shiki-default:#E6E6E6">            .</span><span style="--shiki-default:#DCDCAA">Build</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="11"><span style="--shiki-default:#E6E6E6">        ;
</span></span><span class="line" line="12"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><p><!--[-->This phase context will require two different actions in a feature;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D4D4D4">..</span><span style="--shiki-default:#E6E6E6">.
</span></span><span class="line" line="2"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> void</span><span style="--shiki-default:#DCDCAA"> Configure</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">LayerConfigurator</span><span style="--shiki-default:#9CDCFE"> configurator</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="3"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="4"><span style="--shiki-default:#9CDCFE">    configurator</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">Configure</span><span style="--shiki-default:#E6E6E6">((</span><span style="--shiki-default:#4EC9B0">Configuration1</span><span style="--shiki-default:#9CDCFE"> configuration1</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="5"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="6"><span style="--shiki-default:#6A9955">        // configure one by one
</span></span><span class="line" line="7"><span style="--shiki-default:#E6E6E6">    });
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span style="--shiki-default:#9CDCFE">    configurator</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">Configure</span><span style="--shiki-default:#E6E6E6">((</span><span style="--shiki-default:#4EC9B0">Configuration2</span><span style="--shiki-default:#9CDCFE"> configuration2</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="10"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="11"><span style="--shiki-default:#6A9955">        // configure one by one
</span></span><span class="line" line="12"><span style="--shiki-default:#E6E6E6">    });
</span></span><span class="line" line="13"><span style="--shiki-default:#E6E6E6">}
</span></span><span class="line" line="14"><span style="--shiki-default:#D4D4D4">..</span><span style="--shiki-default:#E6E6E6">.
</span></span></code><!--]--></pre><!--]--><blockquote class="tip" data-v-52748c37><i class="fa fa-lightbulb" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[--><code class=""><!--[-->phase.CreateContext()<!--]--></code> is a helper method that utilizes
<code class=""><!--[-->phase.CreateContextBuilder()<!--]--></code> behind the scenes.<!--]--></p><!--]--></div></blockquote><h4 id="using-in-combination"><!--[-->Using in Combination<!--]--></h4><p><!--[-->You may combine these two ways to provide configuration;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> LayerX</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#E6E6E6">&gt;
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> Configuration1</span><span style="--shiki-default:#9CDCFE"> _configuration1</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="4"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> Configuration2</span><span style="--shiki-default:#9CDCFE"> _configuration2</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="5"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> Configuration3</span><span style="--shiki-default:#9CDCFE"> _configuration3</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="6"><span emptylineplaceholder="true">
</span></span><span class="line" line="7"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#4EC9B0"> PhaseContext</span><span style="--shiki-default:#DCDCAA"> GetContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="8"><span style="--shiki-default:#9CDCFE">        phase</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateContextBuilder</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="9"><span style="--shiki-default:#E6E6E6">            .</span><span style="--shiki-default:#DCDCAA">Add</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_configuration1</span><span style="--shiki-default:#E6E6E6">, </span><span style="--shiki-default:#9CDCFE">_configuration2</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="10"><span style="--shiki-default:#E6E6E6">            .</span><span style="--shiki-default:#DCDCAA">Add</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_configuration3</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="11"><span style="--shiki-default:#E6E6E6">            .</span><span style="--shiki-default:#DCDCAA">Build</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="12"><span style="--shiki-default:#E6E6E6">        ;
</span></span><span class="line" line="13"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><p><!--[-->This phase context will require two different actions;<!--]--></p><ol><!--[--><li><!--[-->For the first two configuration objects: <code class=""><!--[-->(Configuration1 configuration1, Configuration2 configuration2)<!--]--></code><!--]--></li><li><!--[-->For the last configuration object: <code class=""><!--[-->(Configuration3 configuration3)<!--]--></code>.<!--]--></li><!--]--></ol><style>html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}</style></div><div class="navigation-buttons-container" data-v-162c8372 data-v-cb256488><div class="button left" data-v-cb256488><a href="/architecture/application" class="" data-v-cb256488><div class="link-text" data-v-cb256488><i class="fa-solid fa-caret-left" data-v-cb256488></i> Previous <h3 data-v-cb256488>Application</h3></div></a></div><div class="button right" data-v-cb256488><a href="/architecture/feature" class="" data-v-cb256488><div class="link-text" data-v-cb256488> Next <i class="fa-solid fa-caret-right" data-v-cb256488></i><h3 data-v-cb256488>Feature</h3></div></a></div></div></div><nav data-v-162c8372 data-v-39cd5078><h4 data-v-39cd5078><a data-v-39cd5078>On This Page</a></h4><ul class="" data-v-39cd5078><!--[--><li data-v-39cd5078><a href="#conventions" class="" data-v-39cd5078>Conventions</a><ul data-v-39cd5078><!--[--><!--]--></ul></li><li data-v-39cd5078><a href="#creating-a-layer" class="" data-v-39cd5078>Creating A Layer</a><ul data-v-39cd5078><!--[--><li data-v-39cd5078><a href="#id-of-a-layer" class="" data-v-39cd5078>Id of a Layer</a></li><!--]--></ul></li><li data-v-39cd5078><a href="#adding-phases" class="" data-v-39cd5078>Adding Phases</a><ul data-v-39cd5078><!--[--><li data-v-39cd5078><a href="#initializing-a-phase" class="" data-v-39cd5078>Initializing a Phase</a></li><li data-v-39cd5078><a href="#readiness-via-dependencies" class="" data-v-39cd5078>Readiness via Dependencies</a></li><li data-v-39cd5078><a href="#order-of-a-phase" class="" data-v-39cd5078>Order of a Phase</a></li><!--]--></ul></li><li data-v-39cd5078><a href="#providing-configuration" class="" data-v-39cd5078>Providing Configuration</a><ul data-v-39cd5078><!--[--><li data-v-39cd5078><a href="#using-non-generic-layerbase" class="" data-v-39cd5078>Using non-generic LayerBase</a></li><li data-v-39cd5078><a href="#before-and-after-a-phase" class="" data-v-39cd5078>Before and After a Phase</a></li><li data-v-39cd5078><a href="#providing-multiple-targets" class="" data-v-39cd5078>Providing Multiple Targets</a></li><!--]--></ul></li><!--]--><li data-v-39cd5078><a class="return-to-top" href="#" data-v-39cd5078>Return to top</a></li></ul></nav></div><!--]--><!--]--></article></div><div class="bottom" data-v-43e4ab6d data-v-137c8203><footer data-v-137c8203><div class="logo" data-v-137c8203><a href="/" class="" data-v-137c8203><img class="baked logo mono" data-v-137c8203></a><span data-v-137c8203>Copyright (c) 2024 Mouseless - MIT License</span></div><nav data-v-137c8203><!--[--><a href="/recipes/" class="" data-v-137c8203>Recipes</a><a href="/features/" class="" data-v-137c8203>Features</a><a href="/layers/" class="" data-v-137c8203>Layers</a><a href="/architecture/" class="" data-v-137c8203>Architecture</a><a href="/release-notes/" class="" data-v-137c8203>Release Notes</a><!--]--><a href="https://github.com/mouseless/baked" rel="noopener noreferrer" target="_blank" data-v-137c8203><i class="fa-brands fa-github" data-v-137c8203></i> /mouseless/baked</a><a href="https://matrix.to/#/#baked:mouseless.org" rel="noopener noreferrer" target="_blank" class="matrix" data-v-137c8203><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" style="" data-v-137c8203><g clip-path="url(#clip0_602_4)" data-v-137c8203><path d="M0.844 0.735023V31.266H3.041V32.001H0V0.00102344H3.041V0.736023L0.844 0.735023ZM10.235 10.412V11.959H10.276C10.6603 11.3936 11.1698 10.9244 11.765 10.588C12.344 10.265 13.016 10.104 13.765 10.104C14.484 10.104 15.145 10.245 15.74 10.521C16.339 10.802 16.787 11.297 17.099 12C17.438 11.5 17.902 11.057 18.479 10.677C19.058 10.297 19.746 10.104 20.542 10.104C21.1088 10.0983 21.6736 10.1737 22.219 10.328C22.74 10.473 23.178 10.708 23.547 11.031C23.912 11.36 24.198 11.782 24.407 12.303C24.61 12.823 24.714 13.454 24.714 14.194V21.829H21.585V15.361C21.5859 14.9991 21.5699 14.6374 21.537 14.277C21.518 13.9705 21.4366 13.6711 21.298 13.397C21.1674 13.1451 20.9639 12.9384 20.714 12.804C20.459 12.652 20.105 12.58 19.667 12.58C19.224 12.58 18.87 12.663 18.599 12.829C18.3333 12.9945 18.1133 13.2238 17.959 13.496C17.7987 13.7828 17.6942 14.0974 17.651 14.423C17.6005 14.7702 17.5728 15.1203 17.568 15.471V21.83H14.437V15.429C14.437 15.09 14.432 14.757 14.412 14.429C14.4029 14.1146 14.3375 13.8044 14.219 13.513C14.1146 13.234 13.9204 12.9976 13.667 12.841C13.412 12.674 13.031 12.586 12.531 12.586C12.38 12.586 12.183 12.617 11.943 12.685C11.703 12.752 11.464 12.877 11.24 13.06C10.9866 13.2784 10.7854 13.5507 10.651 13.857C10.49 14.2 10.412 14.653 10.412 15.216V21.836H7.281V10.415L10.235 10.412ZM31.156 31.265V0.734023H28.959V-0.000976562H32V31.999H28.959V31.264L31.156 31.265Z" fill="black" data-v-137c8203></path></g><defs data-v-137c8203><clipPath id="clip0_602_4" data-v-137c8203><rect width="32" height="32" fill="black" data-v-137c8203></rect></clipPath></defs></svg> #baked:mouseless.org</a></nav></footer></div><!--]--></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__">[["ShallowReactive",1],{"prerenderedAt":2,"data":3,"state":4049,"once":4051,"_errors":4052,"serverRendered":717,"path":6,"pinia":4055},1738777564477,["ShallowReactive",4],{"content-query-hBLt6OxXWy":5},{"_path":6,"_dir":7,"_draft":8,"_partial":8,"_locale":9,"title":10,"description":11,"body":12,"_type":4043,"_id":4044,"_source":4045,"_file":4046,"_stem":4047,"_extension":4048},"/architecture/layer","architecture",false,"","Layer","Each ILayer implementation represents an internal system component of the\nsoftware you develop. A layer provides application features with configuration\nof this system component so that the features can bind domain objects and\nsystem components together.",{"type":13,"children":14,"toc":4025},"root",[15,23,38,51,89,96,101,264,279,285,298,369,393,406,452,457,551,557,585,874,918,933,939,988,1146,1167,1173,1200,1375,1394,1425,1454,1483,1820,1850,1856,1882,1948,1954,1967,2135,2161,2191,2202,2228,2453,2459,2480,2758,2794,2821,2827,2832,2839,2844,3041,3046,3198,3211,3217,3222,3468,3473,3667,3696,3702,3707,3988,3993,4019],{"type":16,"tag":17,"props":18,"children":20},"element","h1",{"id":19},"layer",[21],{"type":22,"value":10},"text",{"type":16,"tag":24,"props":25,"children":26},"p",{},[27,29,36],{"type":22,"value":28},"Each ",{"type":16,"tag":30,"props":31,"children":33},"code",{"className":32},[],[34],{"type":22,"value":35},"ILayer",{"type":22,"value":37}," implementation represents an internal system component of the\nsoftware you develop. A layer provides application features with configuration\nof this system component so that the features can bind domain objects and\nsystem components together.",{"type":16,"tag":24,"props":39,"children":40},{},[41,43,49],{"type":22,"value":42},"Let's take relational database as an example. A relational database is treated\nas an internal system component and is introduced by the ",{"type":16,"tag":30,"props":44,"children":46},{"className":45},[],[47],{"type":22,"value":48},"DataAccessLayer",{"type":22,"value":50}," along\nwith a configuration API. This API enables a feature to map your domain entities\nto database tables.",{"type":16,"tag":24,"props":52,"children":53},{},[54,56,62,64,71,73,79,81,87],{"type":22,"value":55},"Another good example is the ",{"type":16,"tag":30,"props":57,"children":59},{"className":58},[],[60],{"type":22,"value":61},"HttpServerLayer",{"type":22,"value":63},". This layer introduces the ASP.NET\nCore framework into your application. It provides three phases, as mentioned in\n",{"type":16,"tag":65,"props":66,"children":68},"a",{"href":67},"./application",[69],{"type":22,"value":70},"Application",{"type":22,"value":72},", along with ",{"type":16,"tag":30,"props":74,"children":76},{"className":75},[],[77],{"type":22,"value":78},"IMiddlewareCollection",{"type":22,"value":80}," and\n",{"type":16,"tag":30,"props":82,"children":84},{"className":83},[],[85],{"type":22,"value":86},"IEndpointRouteBuilder",{"type":22,"value":88}," objects as its configuration API. This way, any feature\nhas the ability to use a middleware or add routes to the application.",{"type":16,"tag":90,"props":91,"children":93},"h2",{"id":92},"conventions",[94],{"type":22,"value":95},"Conventions",{"type":16,"tag":24,"props":97,"children":98},{},[99],{"type":22,"value":100},"For a consistent developer experience, follow below conventions when\nimplementing a new layer;",{"type":16,"tag":102,"props":103,"children":104},"ol",{},[105,117,135,241,246],{"type":16,"tag":106,"props":107,"children":108},"li",{},[109,111],{"type":22,"value":110},"Place all layer related classes under the same folder named after layer,\ne.g., ",{"type":16,"tag":30,"props":112,"children":114},{"className":113},[],[115],{"type":22,"value":116},"Runtime/",{"type":16,"tag":106,"props":118,"children":119},{},[120,122,127,129],{"type":22,"value":121},"Use ",{"type":16,"tag":30,"props":123,"children":125},{"className":124},[],[126],{"type":22,"value":10},{"type":22,"value":128}," suffix in layer class name, e.g.,\n",{"type":16,"tag":30,"props":130,"children":132},{"className":131},[],[133],{"type":22,"value":134},"Runtime/RuntimeLayer.cs",{"type":16,"tag":106,"props":136,"children":137},{},[138,140,146,148,154,156],{"type":22,"value":139},"Provide extension methods in ",{"type":16,"tag":30,"props":141,"children":143},{"className":142},[],[144],{"type":22,"value":145},"Baked",{"type":22,"value":147}," namespace, e.g.,\n",{"type":16,"tag":30,"props":149,"children":151},{"className":150},[],[152],{"type":22,"value":153},"Runtime/RuntimeExtensions.cs",{"type":22,"value":155},";\n",{"type":16,"tag":102,"props":157,"children":158},{},[159,184,217],{"type":16,"tag":106,"props":160,"children":161},{},[162,168,170,176,178],{"type":16,"tag":30,"props":163,"children":165},{"className":164},[],[166],{"type":22,"value":167},"Add",{"type":22,"value":169}," extension to ",{"type":16,"tag":30,"props":171,"children":173},{"className":172},[],[174],{"type":22,"value":175},"List\u003CILayer>",{"type":22,"value":177},", e.g., ",{"type":16,"tag":30,"props":179,"children":181},{"className":180},[],[182],{"type":22,"value":183},"AddRuntime()",{"type":16,"tag":106,"props":185,"children":186},{},[187,193,195,201,203,209,211],{"type":16,"tag":30,"props":188,"children":190},{"className":189},[],[191],{"type":22,"value":192},"Get",{"type":22,"value":194}," extensions to ",{"type":16,"tag":30,"props":196,"children":198},{"className":197},[],[199],{"type":22,"value":200},"ApplicationContext",{"type":22,"value":202},", e.g.,\n",{"type":16,"tag":30,"props":204,"children":206},{"className":205},[],[207],{"type":22,"value":208},"GetWebApplicationBuilder()",{"type":22,"value":210},", ",{"type":16,"tag":30,"props":212,"children":214},{"className":213},[],[215],{"type":22,"value":216},"GetWebApplication()",{"type":16,"tag":106,"props":218,"children":219},{},[220,226,227,233,235],{"type":16,"tag":30,"props":221,"children":223},{"className":222},[],[224],{"type":22,"value":225},"Configure",{"type":22,"value":194},{"type":16,"tag":30,"props":228,"children":230},{"className":229},[],[231],{"type":22,"value":232},"LayerConfigurator",{"type":22,"value":234}," per configuration\ntarget(s), e.g., ",{"type":16,"tag":30,"props":236,"children":238},{"className":237},[],[239],{"type":22,"value":240},"ConfigureServiceCollection()",{"type":16,"tag":106,"props":242,"children":243},{},[244],{"type":22,"value":245},"Place phase implementations as nested classes under the layer class",{"type":16,"tag":106,"props":247,"children":248},{},[249,251,257,258],{"type":22,"value":250},"Don't use any suffix for phases and use method-like names, e.g., ",{"type":16,"tag":30,"props":252,"children":254},{"className":253},[],[255],{"type":22,"value":256},"Build",{"type":22,"value":80},{"type":16,"tag":30,"props":259,"children":261},{"className":260},[],[262],{"type":22,"value":263},"Run",{"type":16,"tag":24,"props":265,"children":266},{},[267,269,277],{"type":22,"value":268},"Please refer to existing layers in ",{"type":16,"tag":65,"props":270,"children":274},{"href":271,"rel":272},"https://github.com/mouseless/baked",[273],"nofollow",[275],{"type":22,"value":276},"github.com/mouseless/baked",{"type":22,"value":278}," for examples.",{"type":16,"tag":90,"props":280,"children":282},{"id":281},"creating-a-layer",[283],{"type":22,"value":284},"Creating A Layer",{"type":16,"tag":24,"props":286,"children":287},{},[288,290,296],{"type":22,"value":289},"To create a layer, create a class using above conventions and extend\n",{"type":16,"tag":30,"props":291,"children":293},{"className":292},[],[294],{"type":22,"value":295},"LayerBase",{"type":22,"value":297},".",{"type":16,"tag":299,"props":300,"children":304},"pre",{"className":301,"code":302,"language":303,"meta":9,"style":9},"language-csharp shiki shiki-themes slack-dark","public class LayerX : LayerBase\n{\n    ...\n}\n","csharp",[305],{"type":16,"tag":30,"props":306,"children":307},{"__ignoreMap":9},[308,342,351,360],{"type":16,"tag":309,"props":310,"children":313},"span",{"class":311,"line":312},"line",1,[314,320,325,331,337],{"type":16,"tag":309,"props":315,"children":317},{"style":316},"--shiki-default:#569CD6",[318],{"type":22,"value":319},"public",{"type":16,"tag":309,"props":321,"children":322},{"style":316},[323],{"type":22,"value":324}," class",{"type":16,"tag":309,"props":326,"children":328},{"style":327},"--shiki-default:#4EC9B0",[329],{"type":22,"value":330}," LayerX",{"type":16,"tag":309,"props":332,"children":334},{"style":333},"--shiki-default:#E6E6E6",[335],{"type":22,"value":336}," : ",{"type":16,"tag":309,"props":338,"children":339},{"style":327},[340],{"type":22,"value":341},"LayerBase\n",{"type":16,"tag":309,"props":343,"children":345},{"class":311,"line":344},2,[346],{"type":16,"tag":309,"props":347,"children":348},{"style":333},[349],{"type":22,"value":350},"{\n",{"type":16,"tag":309,"props":352,"children":354},{"class":311,"line":353},3,[355],{"type":16,"tag":309,"props":356,"children":357},{"style":333},[358],{"type":22,"value":359},"    ...\n",{"type":16,"tag":309,"props":361,"children":363},{"class":311,"line":362},4,[364],{"type":16,"tag":309,"props":365,"children":366},{"style":333},[367],{"type":22,"value":368},"}\n",{"type":16,"tag":370,"props":371,"children":372},"blockquote",{},[373,381],{"type":16,"tag":24,"props":374,"children":375},{},[376],{"type":16,"tag":309,"props":377,"children":378},{},[379],{"type":22,"value":380},"!TIP",{"type":16,"tag":24,"props":382,"children":383},{},[384,386,391],{"type":22,"value":385},"You can directly implement provided interface ",{"type":16,"tag":30,"props":387,"children":389},{"className":388},[],[390],{"type":22,"value":35},{"type":22,"value":392},", however we've created\nsome base classes to make it easier for you to create layers. All examples\ndemonstrate usage of these base classes.",{"type":16,"tag":394,"props":395,"children":397},"h3",{"id":396},"id-of-a-layer",[398,404],{"type":16,"tag":30,"props":399,"children":401},{"className":400},[],[402],{"type":22,"value":403},"Id",{"type":22,"value":405}," of a Layer",{"type":16,"tag":24,"props":407,"children":408},{},[409,414,416,421,423,428,430,435,437,442,444,450],{"type":16,"tag":30,"props":410,"children":412},{"className":411},[],[413],{"type":22,"value":35},{"type":22,"value":415}," has an ",{"type":16,"tag":30,"props":417,"children":419},{"className":418},[],[420],{"type":22,"value":403},{"type":22,"value":422}," property which should be a unique per ",{"type":16,"tag":30,"props":424,"children":426},{"className":425},[],[427],{"type":22,"value":70},{"type":22,"value":429},"\ninstance. ",{"type":16,"tag":30,"props":431,"children":433},{"className":432},[],[434],{"type":22,"value":295},{"type":22,"value":436}," sets the ",{"type":16,"tag":30,"props":438,"children":440},{"className":439},[],[441],{"type":22,"value":403},{"type":22,"value":443}," as name of the concrete class e.g.,\n",{"type":16,"tag":30,"props":445,"children":447},{"className":446},[],[448],{"type":22,"value":449},"LayerX",{"type":22,"value":451}," at above example.",{"type":16,"tag":24,"props":453,"children":454},{},[455],{"type":22,"value":456},"You can override its value in layer implementation class as shown below;",{"type":16,"tag":299,"props":458,"children":460},{"className":301,"code":459,"language":303,"meta":9,"style":9},"public class LayerX : LayerBase\n{\n    protected override string Id => \"CustomUniqueId\"\n    ...\n}\n",[461],{"type":16,"tag":30,"props":462,"children":463},{"__ignoreMap":9},[464,487,494,530,543],{"type":16,"tag":309,"props":465,"children":466},{"class":311,"line":312},[467,471,475,479,483],{"type":16,"tag":309,"props":468,"children":469},{"style":316},[470],{"type":22,"value":319},{"type":16,"tag":309,"props":472,"children":473},{"style":316},[474],{"type":22,"value":324},{"type":16,"tag":309,"props":476,"children":477},{"style":327},[478],{"type":22,"value":330},{"type":16,"tag":309,"props":480,"children":481},{"style":333},[482],{"type":22,"value":336},{"type":16,"tag":309,"props":484,"children":485},{"style":327},[486],{"type":22,"value":341},{"type":16,"tag":309,"props":488,"children":489},{"class":311,"line":344},[490],{"type":16,"tag":309,"props":491,"children":492},{"style":333},[493],{"type":22,"value":350},{"type":16,"tag":309,"props":495,"children":496},{"class":311,"line":353},[497,502,507,512,518,524],{"type":16,"tag":309,"props":498,"children":499},{"style":316},[500],{"type":22,"value":501},"    protected",{"type":16,"tag":309,"props":503,"children":504},{"style":316},[505],{"type":22,"value":506}," override",{"type":16,"tag":309,"props":508,"children":509},{"style":316},[510],{"type":22,"value":511}," string",{"type":16,"tag":309,"props":513,"children":515},{"style":514},"--shiki-default:#9CDCFE",[516],{"type":22,"value":517}," Id",{"type":16,"tag":309,"props":519,"children":521},{"style":520},"--shiki-default:#D4D4D4",[522],{"type":22,"value":523}," =>",{"type":16,"tag":309,"props":525,"children":527},{"style":526},"--shiki-default:#CE9178",[528],{"type":22,"value":529}," \"CustomUniqueId\"\n",{"type":16,"tag":309,"props":531,"children":532},{"class":311,"line":362},[533,538],{"type":16,"tag":309,"props":534,"children":535},{"style":520},[536],{"type":22,"value":537},"    ..",{"type":16,"tag":309,"props":539,"children":540},{"style":333},[541],{"type":22,"value":542},".\n",{"type":16,"tag":309,"props":544,"children":546},{"class":311,"line":545},5,[547],{"type":16,"tag":309,"props":548,"children":549},{"style":333},[550],{"type":22,"value":368},{"type":16,"tag":90,"props":552,"children":554},{"id":553},"adding-phases",[555],{"type":22,"value":556},"Adding Phases",{"type":16,"tag":24,"props":558,"children":559},{},[560,562,567,569,575,577,583],{"type":22,"value":561},"By default ",{"type":16,"tag":30,"props":563,"children":565},{"className":564},[],[566],{"type":22,"value":295},{"type":22,"value":568}," returns no phases. To add one or more phases into the\napplication, you need to override ",{"type":16,"tag":30,"props":570,"children":572},{"className":571},[],[573],{"type":22,"value":574},"GetStartPhases()",{"type":22,"value":576}," or ",{"type":16,"tag":30,"props":578,"children":580},{"className":579},[],[581],{"type":22,"value":582},"GetGeneratePhases()",{"type":22,"value":584}," methods\nas shown below;",{"type":16,"tag":299,"props":586,"children":588},{"className":301,"code":587,"language":303,"meta":9,"style":9},"public class SampleLayer : LayerBase\n{\n    protected override IEnumerable\u003CIPhase> GetStartPhases()\n    {\n        yield return new DoA();\n    }\n\n    protected override IEnumerable\u003CIPhase> GetGeneratePhases()\n    {\n        yield return new DoB();\n    }\n\n    public class DoA : PhaseBase { ... }\n    public class DoB : PhaseBase { ... }\n}\n",[589],{"type":16,"tag":30,"props":590,"children":591},{"__ignoreMap":9},[592,616,623,665,673,702,711,721,758,766,791,799,807,838,866],{"type":16,"tag":309,"props":593,"children":594},{"class":311,"line":312},[595,599,603,608,612],{"type":16,"tag":309,"props":596,"children":597},{"style":316},[598],{"type":22,"value":319},{"type":16,"tag":309,"props":600,"children":601},{"style":316},[602],{"type":22,"value":324},{"type":16,"tag":309,"props":604,"children":605},{"style":327},[606],{"type":22,"value":607}," SampleLayer",{"type":16,"tag":309,"props":609,"children":610},{"style":333},[611],{"type":22,"value":336},{"type":16,"tag":309,"props":613,"children":614},{"style":327},[615],{"type":22,"value":341},{"type":16,"tag":309,"props":617,"children":618},{"class":311,"line":344},[619],{"type":16,"tag":309,"props":620,"children":621},{"style":333},[622],{"type":22,"value":350},{"type":16,"tag":309,"props":624,"children":625},{"class":311,"line":353},[626,630,634,639,644,649,654,660],{"type":16,"tag":309,"props":627,"children":628},{"style":316},[629],{"type":22,"value":501},{"type":16,"tag":309,"props":631,"children":632},{"style":316},[633],{"type":22,"value":506},{"type":16,"tag":309,"props":635,"children":636},{"style":327},[637],{"type":22,"value":638}," IEnumerable",{"type":16,"tag":309,"props":640,"children":641},{"style":333},[642],{"type":22,"value":643},"\u003C",{"type":16,"tag":309,"props":645,"children":646},{"style":327},[647],{"type":22,"value":648},"IPhase",{"type":16,"tag":309,"props":650,"children":651},{"style":333},[652],{"type":22,"value":653},"> ",{"type":16,"tag":309,"props":655,"children":657},{"style":656},"--shiki-default:#DCDCAA",[658],{"type":22,"value":659},"GetStartPhases",{"type":16,"tag":309,"props":661,"children":662},{"style":333},[663],{"type":22,"value":664},"()\n",{"type":16,"tag":309,"props":666,"children":667},{"class":311,"line":362},[668],{"type":16,"tag":309,"props":669,"children":670},{"style":333},[671],{"type":22,"value":672},"    {\n",{"type":16,"tag":309,"props":674,"children":675},{"class":311,"line":545},[676,682,687,692,697],{"type":16,"tag":309,"props":677,"children":679},{"style":678},"--shiki-default:#C586C0",[680],{"type":22,"value":681},"        yield",{"type":16,"tag":309,"props":683,"children":684},{"style":678},[685],{"type":22,"value":686}," return",{"type":16,"tag":309,"props":688,"children":689},{"style":316},[690],{"type":22,"value":691}," new",{"type":16,"tag":309,"props":693,"children":694},{"style":327},[695],{"type":22,"value":696}," DoA",{"type":16,"tag":309,"props":698,"children":699},{"style":333},[700],{"type":22,"value":701},"();\n",{"type":16,"tag":309,"props":703,"children":705},{"class":311,"line":704},6,[706],{"type":16,"tag":309,"props":707,"children":708},{"style":333},[709],{"type":22,"value":710},"    }\n",{"type":16,"tag":309,"props":712,"children":714},{"class":311,"line":713},7,[715],{"type":16,"tag":309,"props":716,"children":718},{"emptyLinePlaceholder":717},true,[719],{"type":22,"value":720},"\n",{"type":16,"tag":309,"props":722,"children":724},{"class":311,"line":723},8,[725,729,733,737,741,745,749,754],{"type":16,"tag":309,"props":726,"children":727},{"style":316},[728],{"type":22,"value":501},{"type":16,"tag":309,"props":730,"children":731},{"style":316},[732],{"type":22,"value":506},{"type":16,"tag":309,"props":734,"children":735},{"style":327},[736],{"type":22,"value":638},{"type":16,"tag":309,"props":738,"children":739},{"style":333},[740],{"type":22,"value":643},{"type":16,"tag":309,"props":742,"children":743},{"style":327},[744],{"type":22,"value":648},{"type":16,"tag":309,"props":746,"children":747},{"style":333},[748],{"type":22,"value":653},{"type":16,"tag":309,"props":750,"children":751},{"style":656},[752],{"type":22,"value":753},"GetGeneratePhases",{"type":16,"tag":309,"props":755,"children":756},{"style":333},[757],{"type":22,"value":664},{"type":16,"tag":309,"props":759,"children":761},{"class":311,"line":760},9,[762],{"type":16,"tag":309,"props":763,"children":764},{"style":333},[765],{"type":22,"value":672},{"type":16,"tag":309,"props":767,"children":769},{"class":311,"line":768},10,[770,774,778,782,787],{"type":16,"tag":309,"props":771,"children":772},{"style":678},[773],{"type":22,"value":681},{"type":16,"tag":309,"props":775,"children":776},{"style":678},[777],{"type":22,"value":686},{"type":16,"tag":309,"props":779,"children":780},{"style":316},[781],{"type":22,"value":691},{"type":16,"tag":309,"props":783,"children":784},{"style":327},[785],{"type":22,"value":786}," DoB",{"type":16,"tag":309,"props":788,"children":789},{"style":333},[790],{"type":22,"value":701},{"type":16,"tag":309,"props":792,"children":794},{"class":311,"line":793},11,[795],{"type":16,"tag":309,"props":796,"children":797},{"style":333},[798],{"type":22,"value":710},{"type":16,"tag":309,"props":800,"children":802},{"class":311,"line":801},12,[803],{"type":16,"tag":309,"props":804,"children":805},{"emptyLinePlaceholder":717},[806],{"type":22,"value":720},{"type":16,"tag":309,"props":808,"children":810},{"class":311,"line":809},13,[811,816,820,824,828,833],{"type":16,"tag":309,"props":812,"children":813},{"style":316},[814],{"type":22,"value":815},"    public",{"type":16,"tag":309,"props":817,"children":818},{"style":316},[819],{"type":22,"value":324},{"type":16,"tag":309,"props":821,"children":822},{"style":327},[823],{"type":22,"value":696},{"type":16,"tag":309,"props":825,"children":826},{"style":333},[827],{"type":22,"value":336},{"type":16,"tag":309,"props":829,"children":830},{"style":327},[831],{"type":22,"value":832},"PhaseBase",{"type":16,"tag":309,"props":834,"children":835},{"style":333},[836],{"type":22,"value":837}," { ... }\n",{"type":16,"tag":309,"props":839,"children":841},{"class":311,"line":840},14,[842,846,850,854,858,862],{"type":16,"tag":309,"props":843,"children":844},{"style":316},[845],{"type":22,"value":815},{"type":16,"tag":309,"props":847,"children":848},{"style":316},[849],{"type":22,"value":324},{"type":16,"tag":309,"props":851,"children":852},{"style":327},[853],{"type":22,"value":786},{"type":16,"tag":309,"props":855,"children":856},{"style":333},[857],{"type":22,"value":336},{"type":16,"tag":309,"props":859,"children":860},{"style":327},[861],{"type":22,"value":832},{"type":16,"tag":309,"props":863,"children":864},{"style":333},[865],{"type":22,"value":837},{"type":16,"tag":309,"props":867,"children":869},{"class":311,"line":868},15,[870],{"type":16,"tag":309,"props":871,"children":872},{"style":333},[873],{"type":22,"value":368},{"type":16,"tag":24,"props":875,"children":876},{},[877,879,885,887,893,895,901,903,909,910,916],{"type":22,"value":878},"Here ",{"type":16,"tag":30,"props":880,"children":882},{"className":881},[],[883],{"type":22,"value":884},"SampleLayer",{"type":22,"value":886}," adds two phases, ",{"type":16,"tag":30,"props":888,"children":890},{"className":889},[],[891],{"type":22,"value":892},"DoA",{"type":22,"value":894}," to ",{"type":16,"tag":30,"props":896,"children":898},{"className":897},[],[899],{"type":22,"value":900},"Start",{"type":22,"value":902}," mode and ",{"type":16,"tag":30,"props":904,"children":906},{"className":905},[],[907],{"type":22,"value":908},"DoB",{"type":22,"value":894},{"type":16,"tag":30,"props":911,"children":913},{"className":912},[],[914],{"type":22,"value":915},"Generate",{"type":22,"value":917},"\nmode of the application.",{"type":16,"tag":370,"props":919,"children":920},{},[921,928],{"type":16,"tag":24,"props":922,"children":923},{},[924],{"type":16,"tag":309,"props":925,"children":926},{},[927],{"type":22,"value":380},{"type":16,"tag":24,"props":929,"children":930},{},[931],{"type":22,"value":932},"By convention place the phase implementations as a nested class in the layer\nit is added.",{"type":16,"tag":394,"props":934,"children":936},{"id":935},"initializing-a-phase",[937],{"type":22,"value":938},"Initializing a Phase",{"type":16,"tag":24,"props":940,"children":941},{},[942,947,949,955,957,963,965,970,972,978,980,986],{"type":16,"tag":30,"props":943,"children":945},{"className":944},[],[946],{"type":22,"value":832},{"type":22,"value":948}," class has ",{"type":16,"tag":30,"props":950,"children":952},{"className":951},[],[953],{"type":22,"value":954},"Initialize()",{"type":22,"value":956}," method to override so that it can add an\nobject to the application context via ",{"type":16,"tag":30,"props":958,"children":960},{"className":959},[],[961],{"type":22,"value":962},"Context",{"type":22,"value":964}," property. Base ",{"type":16,"tag":30,"props":966,"children":968},{"className":967},[],[969],{"type":22,"value":954},{"type":22,"value":971},"\nmethod does not add any objects to the application. Below, you can see how\n",{"type":16,"tag":30,"props":973,"children":975},{"className":974},[],[976],{"type":22,"value":977},"CreateBuilder",{"type":22,"value":979}," phase adds ",{"type":16,"tag":30,"props":981,"children":983},{"className":982},[],[984],{"type":22,"value":985},"WebApplicationBuilder",{"type":22,"value":987}," to the context;",{"type":16,"tag":299,"props":989,"children":991},{"className":301,"code":990,"language":303,"meta":9,"style":9},"public class CreateBuilder : PhaseBase\n{\n    protected override void Initialize()\n    {\n        var build = WebApplication.CreateBuilder();\n\n        Context.Add(build);\n    }\n}\n",[992],{"type":16,"tag":30,"props":993,"children":994},{"__ignoreMap":9},[995,1020,1027,1052,1059,1094,1101,1132,1139],{"type":16,"tag":309,"props":996,"children":997},{"class":311,"line":312},[998,1002,1006,1011,1015],{"type":16,"tag":309,"props":999,"children":1000},{"style":316},[1001],{"type":22,"value":319},{"type":16,"tag":309,"props":1003,"children":1004},{"style":316},[1005],{"type":22,"value":324},{"type":16,"tag":309,"props":1007,"children":1008},{"style":327},[1009],{"type":22,"value":1010}," CreateBuilder",{"type":16,"tag":309,"props":1012,"children":1013},{"style":333},[1014],{"type":22,"value":336},{"type":16,"tag":309,"props":1016,"children":1017},{"style":327},[1018],{"type":22,"value":1019},"PhaseBase\n",{"type":16,"tag":309,"props":1021,"children":1022},{"class":311,"line":344},[1023],{"type":16,"tag":309,"props":1024,"children":1025},{"style":333},[1026],{"type":22,"value":350},{"type":16,"tag":309,"props":1028,"children":1029},{"class":311,"line":353},[1030,1034,1038,1043,1048],{"type":16,"tag":309,"props":1031,"children":1032},{"style":316},[1033],{"type":22,"value":501},{"type":16,"tag":309,"props":1035,"children":1036},{"style":316},[1037],{"type":22,"value":506},{"type":16,"tag":309,"props":1039,"children":1040},{"style":316},[1041],{"type":22,"value":1042}," void",{"type":16,"tag":309,"props":1044,"children":1045},{"style":656},[1046],{"type":22,"value":1047}," Initialize",{"type":16,"tag":309,"props":1049,"children":1050},{"style":333},[1051],{"type":22,"value":664},{"type":16,"tag":309,"props":1053,"children":1054},{"class":311,"line":362},[1055],{"type":16,"tag":309,"props":1056,"children":1057},{"style":333},[1058],{"type":22,"value":672},{"type":16,"tag":309,"props":1060,"children":1061},{"class":311,"line":545},[1062,1067,1072,1077,1082,1086,1090],{"type":16,"tag":309,"props":1063,"children":1064},{"style":316},[1065],{"type":22,"value":1066},"        var",{"type":16,"tag":309,"props":1068,"children":1069},{"style":514},[1070],{"type":22,"value":1071}," build",{"type":16,"tag":309,"props":1073,"children":1074},{"style":520},[1075],{"type":22,"value":1076}," =",{"type":16,"tag":309,"props":1078,"children":1079},{"style":514},[1080],{"type":22,"value":1081}," WebApplication",{"type":16,"tag":309,"props":1083,"children":1084},{"style":333},[1085],{"type":22,"value":297},{"type":16,"tag":309,"props":1087,"children":1088},{"style":656},[1089],{"type":22,"value":977},{"type":16,"tag":309,"props":1091,"children":1092},{"style":333},[1093],{"type":22,"value":701},{"type":16,"tag":309,"props":1095,"children":1096},{"class":311,"line":704},[1097],{"type":16,"tag":309,"props":1098,"children":1099},{"emptyLinePlaceholder":717},[1100],{"type":22,"value":720},{"type":16,"tag":309,"props":1102,"children":1103},{"class":311,"line":713},[1104,1109,1113,1117,1122,1127],{"type":16,"tag":309,"props":1105,"children":1106},{"style":514},[1107],{"type":22,"value":1108},"        Context",{"type":16,"tag":309,"props":1110,"children":1111},{"style":333},[1112],{"type":22,"value":297},{"type":16,"tag":309,"props":1114,"children":1115},{"style":656},[1116],{"type":22,"value":167},{"type":16,"tag":309,"props":1118,"children":1119},{"style":333},[1120],{"type":22,"value":1121},"(",{"type":16,"tag":309,"props":1123,"children":1124},{"style":514},[1125],{"type":22,"value":1126},"build",{"type":16,"tag":309,"props":1128,"children":1129},{"style":333},[1130],{"type":22,"value":1131},");\n",{"type":16,"tag":309,"props":1133,"children":1134},{"class":311,"line":723},[1135],{"type":16,"tag":309,"props":1136,"children":1137},{"style":333},[1138],{"type":22,"value":710},{"type":16,"tag":309,"props":1140,"children":1141},{"class":311,"line":760},[1142],{"type":16,"tag":309,"props":1143,"children":1144},{"style":333},[1145],{"type":22,"value":368},{"type":16,"tag":370,"props":1147,"children":1148},{},[1149,1156],{"type":16,"tag":24,"props":1150,"children":1151},{},[1152],{"type":16,"tag":309,"props":1153,"children":1154},{},[1155],{"type":22,"value":380},{"type":16,"tag":24,"props":1157,"children":1158},{},[1159,1160,1165],{"type":22,"value":385},{"type":16,"tag":30,"props":1161,"children":1163},{"className":1162},[],[1164],{"type":22,"value":648},{"type":22,"value":1166},", however we've created\nsome base classes to make it easier for you to create phases. All examples\ndemonstrate usage of these base classes.",{"type":16,"tag":394,"props":1168,"children":1170},{"id":1169},"readiness-via-dependencies",[1171],{"type":22,"value":1172},"Readiness via Dependencies",{"type":16,"tag":24,"props":1174,"children":1175},{},[1176,1178,1184,1186,1191,1193,1198],{"type":22,"value":1177},"You can define context dependencies via generic ",{"type":16,"tag":30,"props":1179,"children":1181},{"className":1180},[],[1182],{"type":22,"value":1183},"PhaseBase\u003C>",{"type":22,"value":1185}," classes to make\nthe phase wait until context is ready to provide that dependency. For example,\n",{"type":16,"tag":30,"props":1187,"children":1189},{"className":1188},[],[1190],{"type":22,"value":256},{"type":22,"value":1192}," depends on the ",{"type":16,"tag":30,"props":1194,"children":1196},{"className":1195},[],[1197],{"type":22,"value":985},{"type":22,"value":1199}," instance as shown below;",{"type":16,"tag":299,"props":1201,"children":1203},{"className":301,"code":1202,"language":303,"meta":9,"style":9},"public class Build : PhaseBase\u003CWebApplicationBuilder>\n{\n    protected override void Initialize(WebApplicationBuilder build)\n    {\n        var app = build.Build();\n\n        Context.Add(app);\n    }\n}\n",[1204],{"type":16,"tag":30,"props":1205,"children":1206},{"__ignoreMap":9},[1207,1244,1251,1287,1294,1326,1333,1361,1368],{"type":16,"tag":309,"props":1208,"children":1209},{"class":311,"line":312},[1210,1214,1218,1223,1227,1231,1235,1239],{"type":16,"tag":309,"props":1211,"children":1212},{"style":316},[1213],{"type":22,"value":319},{"type":16,"tag":309,"props":1215,"children":1216},{"style":316},[1217],{"type":22,"value":324},{"type":16,"tag":309,"props":1219,"children":1220},{"style":327},[1221],{"type":22,"value":1222}," Build",{"type":16,"tag":309,"props":1224,"children":1225},{"style":333},[1226],{"type":22,"value":336},{"type":16,"tag":309,"props":1228,"children":1229},{"style":327},[1230],{"type":22,"value":832},{"type":16,"tag":309,"props":1232,"children":1233},{"style":333},[1234],{"type":22,"value":643},{"type":16,"tag":309,"props":1236,"children":1237},{"style":327},[1238],{"type":22,"value":985},{"type":16,"tag":309,"props":1240,"children":1241},{"style":333},[1242],{"type":22,"value":1243},">\n",{"type":16,"tag":309,"props":1245,"children":1246},{"class":311,"line":344},[1247],{"type":16,"tag":309,"props":1248,"children":1249},{"style":333},[1250],{"type":22,"value":350},{"type":16,"tag":309,"props":1252,"children":1253},{"class":311,"line":353},[1254,1258,1262,1266,1270,1274,1278,1282],{"type":16,"tag":309,"props":1255,"children":1256},{"style":316},[1257],{"type":22,"value":501},{"type":16,"tag":309,"props":1259,"children":1260},{"style":316},[1261],{"type":22,"value":506},{"type":16,"tag":309,"props":1263,"children":1264},{"style":316},[1265],{"type":22,"value":1042},{"type":16,"tag":309,"props":1267,"children":1268},{"style":656},[1269],{"type":22,"value":1047},{"type":16,"tag":309,"props":1271,"children":1272},{"style":333},[1273],{"type":22,"value":1121},{"type":16,"tag":309,"props":1275,"children":1276},{"style":327},[1277],{"type":22,"value":985},{"type":16,"tag":309,"props":1279,"children":1280},{"style":514},[1281],{"type":22,"value":1071},{"type":16,"tag":309,"props":1283,"children":1284},{"style":333},[1285],{"type":22,"value":1286},")\n",{"type":16,"tag":309,"props":1288,"children":1289},{"class":311,"line":362},[1290],{"type":16,"tag":309,"props":1291,"children":1292},{"style":333},[1293],{"type":22,"value":672},{"type":16,"tag":309,"props":1295,"children":1296},{"class":311,"line":545},[1297,1301,1306,1310,1314,1318,1322],{"type":16,"tag":309,"props":1298,"children":1299},{"style":316},[1300],{"type":22,"value":1066},{"type":16,"tag":309,"props":1302,"children":1303},{"style":514},[1304],{"type":22,"value":1305}," app",{"type":16,"tag":309,"props":1307,"children":1308},{"style":520},[1309],{"type":22,"value":1076},{"type":16,"tag":309,"props":1311,"children":1312},{"style":514},[1313],{"type":22,"value":1071},{"type":16,"tag":309,"props":1315,"children":1316},{"style":333},[1317],{"type":22,"value":297},{"type":16,"tag":309,"props":1319,"children":1320},{"style":656},[1321],{"type":22,"value":256},{"type":16,"tag":309,"props":1323,"children":1324},{"style":333},[1325],{"type":22,"value":701},{"type":16,"tag":309,"props":1327,"children":1328},{"class":311,"line":704},[1329],{"type":16,"tag":309,"props":1330,"children":1331},{"emptyLinePlaceholder":717},[1332],{"type":22,"value":720},{"type":16,"tag":309,"props":1334,"children":1335},{"class":311,"line":713},[1336,1340,1344,1348,1352,1357],{"type":16,"tag":309,"props":1337,"children":1338},{"style":514},[1339],{"type":22,"value":1108},{"type":16,"tag":309,"props":1341,"children":1342},{"style":333},[1343],{"type":22,"value":297},{"type":16,"tag":309,"props":1345,"children":1346},{"style":656},[1347],{"type":22,"value":167},{"type":16,"tag":309,"props":1349,"children":1350},{"style":333},[1351],{"type":22,"value":1121},{"type":16,"tag":309,"props":1353,"children":1354},{"style":514},[1355],{"type":22,"value":1356},"app",{"type":16,"tag":309,"props":1358,"children":1359},{"style":333},[1360],{"type":22,"value":1131},{"type":16,"tag":309,"props":1362,"children":1363},{"class":311,"line":723},[1364],{"type":16,"tag":309,"props":1365,"children":1366},{"style":333},[1367],{"type":22,"value":710},{"type":16,"tag":309,"props":1369,"children":1370},{"class":311,"line":760},[1371],{"type":16,"tag":309,"props":1372,"children":1373},{"style":333},[1374],{"type":22,"value":368},{"type":16,"tag":24,"props":1376,"children":1377},{},[1378,1384,1386,1392],{"type":16,"tag":30,"props":1379,"children":1381},{"className":1380},[],[1382],{"type":22,"value":1383},"PhaseBase\u003CT>",{"type":22,"value":1385}," class requires ",{"type":16,"tag":30,"props":1387,"children":1389},{"className":1388},[],[1390],{"type":22,"value":1391},"Initialize(T t)",{"type":22,"value":1393}," method to be implemented.",{"type":16,"tag":370,"props":1395,"children":1396},{},[1397,1405],{"type":16,"tag":24,"props":1398,"children":1399},{},[1400],{"type":16,"tag":309,"props":1401,"children":1402},{},[1403],{"type":22,"value":1404},"!NOTE",{"type":16,"tag":24,"props":1406,"children":1407},{},[1408,1410,1416,1418,1424],{"type":22,"value":1409},"You can provide more than one dependency for a phase. E.g., ",{"type":16,"tag":30,"props":1411,"children":1413},{"className":1412},[],[1414],{"type":22,"value":1415},"Phase\u003CX, Y>",{"type":22,"value":1417},"\nwill require ",{"type":16,"tag":30,"props":1419,"children":1421},{"className":1420},[],[1422],{"type":22,"value":1423},"Initialize(X x, Y y)",{"type":22,"value":1393},{"type":16,"tag":370,"props":1426,"children":1427},{},[1428,1436],{"type":16,"tag":24,"props":1429,"children":1430},{},[1431],{"type":16,"tag":309,"props":1432,"children":1433},{},[1434],{"type":22,"value":1435},"!WARNING",{"type":16,"tag":24,"props":1437,"children":1438},{},[1439,1441,1446,1448],{"type":22,"value":1440},"Type of the dependency provided, must be exactly the same as the type of\ndependency in ",{"type":16,"tag":30,"props":1442,"children":1444},{"className":1443},[],[1445],{"type":22,"value":200},{"type":22,"value":1447},". For more information\n",{"type":16,"tag":65,"props":1449,"children":1451},{"href":1450},"../architecture/application#running-an-application",[1452],{"type":22,"value":1453},"Running an Application",{"type":16,"tag":24,"props":1455,"children":1456},{},[1457,1459,1465,1467,1473,1475,1481],{"type":22,"value":1458},"Phases can also define context dependencies from other phase artifacts. For\nexample ",{"type":16,"tag":30,"props":1460,"children":1462},{"className":1461},[],[1463],{"type":22,"value":1464},"HttpServerLayer.Build",{"type":22,"value":1466}," phase can require ",{"type":16,"tag":30,"props":1468,"children":1470},{"className":1469},[],[1471],{"type":22,"value":1472},"IServiceCollection",{"type":22,"value":1474}," which\nwill be provided during ",{"type":16,"tag":30,"props":1476,"children":1478},{"className":1477},[],[1479],{"type":22,"value":1480},"DependencyInjectionLayer.AddServices",{"type":22,"value":1482}," phase.",{"type":16,"tag":299,"props":1484,"children":1486},{"className":301,"code":1485,"language":303,"meta":9,"style":9},"// DependencyInjectionLayer\npublic class AddServices(IServiceCollection _services)\n    : PhaseBase(PhaseOrder.Early)\n{\n    protected override void Initialize()\n    {\n        Context.Add(_services);\n    }\n}\n\n// HttpServerLayer\npublic class Build()\n    : PhaseBase\u003CWebApplicationBuilder, IServiceCollection>(PhaseOrder.Latest)\n{\n    protected override void Initialize(WebApplicationBuilder build, IServiceCollection services)\n    {\n        ...\n    }\n}\n",[1487],{"type":16,"tag":30,"props":1488,"children":1489},{"__ignoreMap":9},[1490,1499,1532,1566,1573,1596,1603,1631,1638,1645,1652,1660,1679,1728,1735,1783,1791,1804,1812],{"type":16,"tag":309,"props":1491,"children":1492},{"class":311,"line":312},[1493],{"type":16,"tag":309,"props":1494,"children":1496},{"style":1495},"--shiki-default:#6A9955",[1497],{"type":22,"value":1498},"// DependencyInjectionLayer\n",{"type":16,"tag":309,"props":1500,"children":1501},{"class":311,"line":344},[1502,1506,1510,1515,1519,1523,1528],{"type":16,"tag":309,"props":1503,"children":1504},{"style":316},[1505],{"type":22,"value":319},{"type":16,"tag":309,"props":1507,"children":1508},{"style":316},[1509],{"type":22,"value":324},{"type":16,"tag":309,"props":1511,"children":1512},{"style":327},[1513],{"type":22,"value":1514}," AddServices",{"type":16,"tag":309,"props":1516,"children":1517},{"style":333},[1518],{"type":22,"value":1121},{"type":16,"tag":309,"props":1520,"children":1521},{"style":327},[1522],{"type":22,"value":1472},{"type":16,"tag":309,"props":1524,"children":1525},{"style":514},[1526],{"type":22,"value":1527}," _services",{"type":16,"tag":309,"props":1529,"children":1530},{"style":333},[1531],{"type":22,"value":1286},{"type":16,"tag":309,"props":1533,"children":1534},{"class":311,"line":353},[1535,1540,1544,1548,1553,1557,1562],{"type":16,"tag":309,"props":1536,"children":1537},{"style":333},[1538],{"type":22,"value":1539},"    : ",{"type":16,"tag":309,"props":1541,"children":1542},{"style":327},[1543],{"type":22,"value":832},{"type":16,"tag":309,"props":1545,"children":1546},{"style":333},[1547],{"type":22,"value":1121},{"type":16,"tag":309,"props":1549,"children":1550},{"style":327},[1551],{"type":22,"value":1552},"PhaseOrder",{"type":16,"tag":309,"props":1554,"children":1555},{"style":333},[1556],{"type":22,"value":297},{"type":16,"tag":309,"props":1558,"children":1559},{"style":327},[1560],{"type":22,"value":1561},"Early",{"type":16,"tag":309,"props":1563,"children":1564},{"style":333},[1565],{"type":22,"value":1286},{"type":16,"tag":309,"props":1567,"children":1568},{"class":311,"line":362},[1569],{"type":16,"tag":309,"props":1570,"children":1571},{"style":333},[1572],{"type":22,"value":350},{"type":16,"tag":309,"props":1574,"children":1575},{"class":311,"line":545},[1576,1580,1584,1588,1592],{"type":16,"tag":309,"props":1577,"children":1578},{"style":316},[1579],{"type":22,"value":501},{"type":16,"tag":309,"props":1581,"children":1582},{"style":316},[1583],{"type":22,"value":506},{"type":16,"tag":309,"props":1585,"children":1586},{"style":316},[1587],{"type":22,"value":1042},{"type":16,"tag":309,"props":1589,"children":1590},{"style":656},[1591],{"type":22,"value":1047},{"type":16,"tag":309,"props":1593,"children":1594},{"style":333},[1595],{"type":22,"value":664},{"type":16,"tag":309,"props":1597,"children":1598},{"class":311,"line":704},[1599],{"type":16,"tag":309,"props":1600,"children":1601},{"style":333},[1602],{"type":22,"value":672},{"type":16,"tag":309,"props":1604,"children":1605},{"class":311,"line":713},[1606,1610,1614,1618,1622,1627],{"type":16,"tag":309,"props":1607,"children":1608},{"style":514},[1609],{"type":22,"value":1108},{"type":16,"tag":309,"props":1611,"children":1612},{"style":333},[1613],{"type":22,"value":297},{"type":16,"tag":309,"props":1615,"children":1616},{"style":656},[1617],{"type":22,"value":167},{"type":16,"tag":309,"props":1619,"children":1620},{"style":333},[1621],{"type":22,"value":1121},{"type":16,"tag":309,"props":1623,"children":1624},{"style":514},[1625],{"type":22,"value":1626},"_services",{"type":16,"tag":309,"props":1628,"children":1629},{"style":333},[1630],{"type":22,"value":1131},{"type":16,"tag":309,"props":1632,"children":1633},{"class":311,"line":723},[1634],{"type":16,"tag":309,"props":1635,"children":1636},{"style":333},[1637],{"type":22,"value":710},{"type":16,"tag":309,"props":1639,"children":1640},{"class":311,"line":760},[1641],{"type":16,"tag":309,"props":1642,"children":1643},{"style":333},[1644],{"type":22,"value":368},{"type":16,"tag":309,"props":1646,"children":1647},{"class":311,"line":768},[1648],{"type":16,"tag":309,"props":1649,"children":1650},{"emptyLinePlaceholder":717},[1651],{"type":22,"value":720},{"type":16,"tag":309,"props":1653,"children":1654},{"class":311,"line":793},[1655],{"type":16,"tag":309,"props":1656,"children":1657},{"style":1495},[1658],{"type":22,"value":1659},"// HttpServerLayer\n",{"type":16,"tag":309,"props":1661,"children":1662},{"class":311,"line":801},[1663,1667,1671,1675],{"type":16,"tag":309,"props":1664,"children":1665},{"style":316},[1666],{"type":22,"value":319},{"type":16,"tag":309,"props":1668,"children":1669},{"style":316},[1670],{"type":22,"value":324},{"type":16,"tag":309,"props":1672,"children":1673},{"style":327},[1674],{"type":22,"value":1222},{"type":16,"tag":309,"props":1676,"children":1677},{"style":333},[1678],{"type":22,"value":664},{"type":16,"tag":309,"props":1680,"children":1681},{"class":311,"line":809},[1682,1686,1690,1694,1698,1702,1706,1711,1715,1719,1724],{"type":16,"tag":309,"props":1683,"children":1684},{"style":333},[1685],{"type":22,"value":1539},{"type":16,"tag":309,"props":1687,"children":1688},{"style":327},[1689],{"type":22,"value":832},{"type":16,"tag":309,"props":1691,"children":1692},{"style":333},[1693],{"type":22,"value":643},{"type":16,"tag":309,"props":1695,"children":1696},{"style":327},[1697],{"type":22,"value":985},{"type":16,"tag":309,"props":1699,"children":1700},{"style":333},[1701],{"type":22,"value":210},{"type":16,"tag":309,"props":1703,"children":1704},{"style":327},[1705],{"type":22,"value":1472},{"type":16,"tag":309,"props":1707,"children":1708},{"style":333},[1709],{"type":22,"value":1710},">(",{"type":16,"tag":309,"props":1712,"children":1713},{"style":327},[1714],{"type":22,"value":1552},{"type":16,"tag":309,"props":1716,"children":1717},{"style":333},[1718],{"type":22,"value":297},{"type":16,"tag":309,"props":1720,"children":1721},{"style":327},[1722],{"type":22,"value":1723},"Latest",{"type":16,"tag":309,"props":1725,"children":1726},{"style":333},[1727],{"type":22,"value":1286},{"type":16,"tag":309,"props":1729,"children":1730},{"class":311,"line":840},[1731],{"type":16,"tag":309,"props":1732,"children":1733},{"style":333},[1734],{"type":22,"value":350},{"type":16,"tag":309,"props":1736,"children":1737},{"class":311,"line":868},[1738,1742,1746,1750,1754,1758,1762,1766,1770,1774,1779],{"type":16,"tag":309,"props":1739,"children":1740},{"style":316},[1741],{"type":22,"value":501},{"type":16,"tag":309,"props":1743,"children":1744},{"style":316},[1745],{"type":22,"value":506},{"type":16,"tag":309,"props":1747,"children":1748},{"style":316},[1749],{"type":22,"value":1042},{"type":16,"tag":309,"props":1751,"children":1752},{"style":656},[1753],{"type":22,"value":1047},{"type":16,"tag":309,"props":1755,"children":1756},{"style":333},[1757],{"type":22,"value":1121},{"type":16,"tag":309,"props":1759,"children":1760},{"style":327},[1761],{"type":22,"value":985},{"type":16,"tag":309,"props":1763,"children":1764},{"style":514},[1765],{"type":22,"value":1071},{"type":16,"tag":309,"props":1767,"children":1768},{"style":333},[1769],{"type":22,"value":210},{"type":16,"tag":309,"props":1771,"children":1772},{"style":327},[1773],{"type":22,"value":1472},{"type":16,"tag":309,"props":1775,"children":1776},{"style":514},[1777],{"type":22,"value":1778}," services",{"type":16,"tag":309,"props":1780,"children":1781},{"style":333},[1782],{"type":22,"value":1286},{"type":16,"tag":309,"props":1784,"children":1786},{"class":311,"line":1785},16,[1787],{"type":16,"tag":309,"props":1788,"children":1789},{"style":333},[1790],{"type":22,"value":672},{"type":16,"tag":309,"props":1792,"children":1794},{"class":311,"line":1793},17,[1795,1800],{"type":16,"tag":309,"props":1796,"children":1797},{"style":520},[1798],{"type":22,"value":1799},"        ..",{"type":16,"tag":309,"props":1801,"children":1802},{"style":333},[1803],{"type":22,"value":542},{"type":16,"tag":309,"props":1805,"children":1807},{"class":311,"line":1806},18,[1808],{"type":16,"tag":309,"props":1809,"children":1810},{"style":333},[1811],{"type":22,"value":710},{"type":16,"tag":309,"props":1813,"children":1815},{"class":311,"line":1814},19,[1816],{"type":16,"tag":309,"props":1817,"children":1818},{"style":333},[1819],{"type":22,"value":368},{"type":16,"tag":370,"props":1821,"children":1822},{},[1823,1830],{"type":16,"tag":24,"props":1824,"children":1825},{},[1826],{"type":16,"tag":309,"props":1827,"children":1828},{},[1829],{"type":22,"value":1435},{"type":16,"tag":24,"props":1831,"children":1832},{},[1833,1835,1840,1842,1848],{"type":22,"value":1834},"This type of artifact requirement will create a dependency between phases\nwhich results to a layer to layer dependency. In the above example ",{"type":16,"tag":30,"props":1836,"children":1838},{"className":1837},[],[1839],{"type":22,"value":256},{"type":22,"value":1841},"\nphase will never execute unless ",{"type":16,"tag":30,"props":1843,"children":1845},{"className":1844},[],[1846],{"type":22,"value":1847},"DependencyLayer",{"type":22,"value":1849}," is added to the application",{"type":16,"tag":394,"props":1851,"children":1853},{"id":1852},"order-of-a-phase",[1854],{"type":22,"value":1855},"Order of a Phase",{"type":16,"tag":24,"props":1857,"children":1858},{},[1859,1864,1866,1872,1874,1880],{"type":16,"tag":30,"props":1860,"children":1862},{"className":1861},[],[1863],{"type":22,"value":832},{"type":22,"value":1865}," classes has ",{"type":16,"tag":30,"props":1867,"children":1869},{"className":1868},[],[1870],{"type":22,"value":1871},"order",{"type":22,"value":1873}," parameter in their constructors. Default order\nis ",{"type":16,"tag":30,"props":1875,"children":1877},{"className":1876},[],[1878],{"type":22,"value":1879},"PhaseOrder.Normal",{"type":22,"value":1881},". If you need to change the order, pass the desired order\nto this parameter as shown below;",{"type":16,"tag":299,"props":1883,"children":1885},{"className":301,"code":1884,"language":303,"meta":9,"style":9},"public class DoThisEarlyOn()\n    : PhaseBase(PhaseOrder.Early)\n{ }\n",[1886],{"type":16,"tag":30,"props":1887,"children":1888},{"__ignoreMap":9},[1889,1909,1940],{"type":16,"tag":309,"props":1890,"children":1891},{"class":311,"line":312},[1892,1896,1900,1905],{"type":16,"tag":309,"props":1893,"children":1894},{"style":316},[1895],{"type":22,"value":319},{"type":16,"tag":309,"props":1897,"children":1898},{"style":316},[1899],{"type":22,"value":324},{"type":16,"tag":309,"props":1901,"children":1902},{"style":327},[1903],{"type":22,"value":1904}," DoThisEarlyOn",{"type":16,"tag":309,"props":1906,"children":1907},{"style":333},[1908],{"type":22,"value":664},{"type":16,"tag":309,"props":1910,"children":1911},{"class":311,"line":344},[1912,1916,1920,1924,1928,1932,1936],{"type":16,"tag":309,"props":1913,"children":1914},{"style":333},[1915],{"type":22,"value":1539},{"type":16,"tag":309,"props":1917,"children":1918},{"style":327},[1919],{"type":22,"value":832},{"type":16,"tag":309,"props":1921,"children":1922},{"style":333},[1923],{"type":22,"value":1121},{"type":16,"tag":309,"props":1925,"children":1926},{"style":327},[1927],{"type":22,"value":1552},{"type":16,"tag":309,"props":1929,"children":1930},{"style":333},[1931],{"type":22,"value":297},{"type":16,"tag":309,"props":1933,"children":1934},{"style":327},[1935],{"type":22,"value":1561},{"type":16,"tag":309,"props":1937,"children":1938},{"style":333},[1939],{"type":22,"value":1286},{"type":16,"tag":309,"props":1941,"children":1942},{"class":311,"line":353},[1943],{"type":16,"tag":309,"props":1944,"children":1945},{"style":333},[1946],{"type":22,"value":1947},"{ }\n",{"type":16,"tag":90,"props":1949,"children":1951},{"id":1950},"providing-configuration",[1952],{"type":22,"value":1953},"Providing Configuration",{"type":16,"tag":24,"props":1955,"children":1956},{},[1957,1959,1965],{"type":22,"value":1958},"Layers provide configuration objects phase by phase. This means a layer can\nprovide two different configuration objects for two different phases. For this\nreason, a layer returns ",{"type":16,"tag":30,"props":1960,"children":1962},{"className":1961},[],[1963],{"type":22,"value":1964},"PhaseContext",{"type":22,"value":1966}," instance per phase to which it provides\nconfiguration.",{"type":16,"tag":299,"props":1968,"children":1970},{"className":301,"code":1969,"language":303,"meta":9,"style":9},"public class LayerX : LayerBase\u003CAddServices>\n{\n    readonly LayerXConfiguration _configuration = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContext(_configuration);\n}\n",[1971],{"type":16,"tag":30,"props":1972,"children":1973},{"__ignoreMap":9},[1974,2010,2017,2047,2054,2098,2128],{"type":16,"tag":309,"props":1975,"children":1976},{"class":311,"line":312},[1977,1981,1985,1989,1993,1997,2001,2006],{"type":16,"tag":309,"props":1978,"children":1979},{"style":316},[1980],{"type":22,"value":319},{"type":16,"tag":309,"props":1982,"children":1983},{"style":316},[1984],{"type":22,"value":324},{"type":16,"tag":309,"props":1986,"children":1987},{"style":327},[1988],{"type":22,"value":330},{"type":16,"tag":309,"props":1990,"children":1991},{"style":333},[1992],{"type":22,"value":336},{"type":16,"tag":309,"props":1994,"children":1995},{"style":327},[1996],{"type":22,"value":295},{"type":16,"tag":309,"props":1998,"children":1999},{"style":333},[2000],{"type":22,"value":643},{"type":16,"tag":309,"props":2002,"children":2003},{"style":327},[2004],{"type":22,"value":2005},"AddServices",{"type":16,"tag":309,"props":2007,"children":2008},{"style":333},[2009],{"type":22,"value":1243},{"type":16,"tag":309,"props":2011,"children":2012},{"class":311,"line":344},[2013],{"type":16,"tag":309,"props":2014,"children":2015},{"style":333},[2016],{"type":22,"value":350},{"type":16,"tag":309,"props":2018,"children":2019},{"class":311,"line":353},[2020,2025,2030,2035,2039,2043],{"type":16,"tag":309,"props":2021,"children":2022},{"style":316},[2023],{"type":22,"value":2024},"    readonly",{"type":16,"tag":309,"props":2026,"children":2027},{"style":327},[2028],{"type":22,"value":2029}," LayerXConfiguration",{"type":16,"tag":309,"props":2031,"children":2032},{"style":514},[2033],{"type":22,"value":2034}," _configuration",{"type":16,"tag":309,"props":2036,"children":2037},{"style":520},[2038],{"type":22,"value":1076},{"type":16,"tag":309,"props":2040,"children":2041},{"style":316},[2042],{"type":22,"value":691},{"type":16,"tag":309,"props":2044,"children":2045},{"style":333},[2046],{"type":22,"value":701},{"type":16,"tag":309,"props":2048,"children":2049},{"class":311,"line":362},[2050],{"type":16,"tag":309,"props":2051,"children":2052},{"emptyLinePlaceholder":717},[2053],{"type":22,"value":720},{"type":16,"tag":309,"props":2055,"children":2056},{"class":311,"line":545},[2057,2061,2065,2070,2075,2079,2083,2088,2093],{"type":16,"tag":309,"props":2058,"children":2059},{"style":316},[2060],{"type":22,"value":501},{"type":16,"tag":309,"props":2062,"children":2063},{"style":316},[2064],{"type":22,"value":506},{"type":16,"tag":309,"props":2066,"children":2067},{"style":327},[2068],{"type":22,"value":2069}," PhaseContext",{"type":16,"tag":309,"props":2071,"children":2072},{"style":656},[2073],{"type":22,"value":2074}," GetContext",{"type":16,"tag":309,"props":2076,"children":2077},{"style":333},[2078],{"type":22,"value":1121},{"type":16,"tag":309,"props":2080,"children":2081},{"style":327},[2082],{"type":22,"value":2005},{"type":16,"tag":309,"props":2084,"children":2085},{"style":514},[2086],{"type":22,"value":2087}," phase",{"type":16,"tag":309,"props":2089,"children":2090},{"style":333},[2091],{"type":22,"value":2092},") ",{"type":16,"tag":309,"props":2094,"children":2095},{"style":520},[2096],{"type":22,"value":2097},"=>\n",{"type":16,"tag":309,"props":2099,"children":2100},{"class":311,"line":704},[2101,2106,2110,2115,2119,2124],{"type":16,"tag":309,"props":2102,"children":2103},{"style":514},[2104],{"type":22,"value":2105},"        phase",{"type":16,"tag":309,"props":2107,"children":2108},{"style":333},[2109],{"type":22,"value":297},{"type":16,"tag":309,"props":2111,"children":2112},{"style":656},[2113],{"type":22,"value":2114},"CreateContext",{"type":16,"tag":309,"props":2116,"children":2117},{"style":333},[2118],{"type":22,"value":1121},{"type":16,"tag":309,"props":2120,"children":2121},{"style":514},[2122],{"type":22,"value":2123},"_configuration",{"type":16,"tag":309,"props":2125,"children":2126},{"style":333},[2127],{"type":22,"value":1131},{"type":16,"tag":309,"props":2129,"children":2130},{"class":311,"line":713},[2131],{"type":16,"tag":309,"props":2132,"children":2133},{"style":333},[2134],{"type":22,"value":368},{"type":16,"tag":24,"props":2136,"children":2137},{},[2138,2140,2145,2147,2153,2155,2160],{"type":22,"value":2139},"In this example, you see a layer named ",{"type":16,"tag":30,"props":2141,"children":2143},{"className":2142},[],[2144],{"type":22,"value":449},{"type":22,"value":2146}," providing a\n",{"type":16,"tag":30,"props":2148,"children":2150},{"className":2149},[],[2151],{"type":22,"value":2152},"LayerXConfiguration",{"type":22,"value":2154}," instance during ",{"type":16,"tag":30,"props":2156,"children":2158},{"className":2157},[],[2159],{"type":22,"value":2005},{"type":22,"value":1482},{"type":16,"tag":370,"props":2162,"children":2163},{},[2164,2171],{"type":16,"tag":24,"props":2165,"children":2166},{},[2167],{"type":16,"tag":309,"props":2168,"children":2169},{},[2170],{"type":22,"value":1404},{"type":16,"tag":24,"props":2172,"children":2173},{},[2174,2176,2182,2184,2189],{"type":22,"value":2175},"By default, a layer returns ",{"type":16,"tag":30,"props":2177,"children":2179},{"className":2178},[],[2180],{"type":22,"value":2181},"PhaseContext.Empty",{"type":22,"value":2183}," instance for the phases it\ndoes not provide a configuration. This means ",{"type":16,"tag":30,"props":2185,"children":2187},{"className":2186},[],[2188],{"type":22,"value":70},{"type":22,"value":2190}," skips that layer\nfor the phases it doesn't have anything to configure.",{"type":16,"tag":394,"props":2192,"children":2194},{"id":2193},"using-non-generic-layerbase",[2195,2197],{"type":22,"value":2196},"Using non-generic ",{"type":16,"tag":30,"props":2198,"children":2200},{"className":2199},[],[2201],{"type":22,"value":295},{"type":16,"tag":24,"props":2203,"children":2204},{},[2205,2211,2213,2218,2220,2226],{"type":16,"tag":30,"props":2206,"children":2208},{"className":2207},[],[2209],{"type":22,"value":2210},"LayerBase\u003C>",{"type":22,"value":2212}," classes allow up to three generic arguments. If you need to\nimplement a layer that has things to configure during more than three phases,\nuse non-generic ",{"type":16,"tag":30,"props":2214,"children":2216},{"className":2215},[],[2217],{"type":22,"value":295},{"type":22,"value":2219}," class, override ",{"type":16,"tag":30,"props":2221,"children":2223},{"className":2222},[],[2224],{"type":22,"value":2225},"GetContext(IPhase phase)",{"type":22,"value":2227}," method\nand switch given phase according to its type;",{"type":16,"tag":299,"props":2229,"children":2231},{"className":301,"code":2230,"language":303,"meta":9,"style":9},"public class MyLayer : LayerBase\n{\n    protected override PhaseContext GetContext(IPhase phase) =>\n        phase switch\n        {\n            PhaseA => phase.CreateContext(...),\n            PhaseB => phase.CreateContext(...),\n            _ => base.GetContext(phase)\n        };\n}\n",[2232],{"type":16,"tag":30,"props":2233,"children":2234},{"__ignoreMap":9},[2235,2259,2266,2305,2317,2325,2363,2399,2438,2446],{"type":16,"tag":309,"props":2236,"children":2237},{"class":311,"line":312},[2238,2242,2246,2251,2255],{"type":16,"tag":309,"props":2239,"children":2240},{"style":316},[2241],{"type":22,"value":319},{"type":16,"tag":309,"props":2243,"children":2244},{"style":316},[2245],{"type":22,"value":324},{"type":16,"tag":309,"props":2247,"children":2248},{"style":327},[2249],{"type":22,"value":2250}," MyLayer",{"type":16,"tag":309,"props":2252,"children":2253},{"style":333},[2254],{"type":22,"value":336},{"type":16,"tag":309,"props":2256,"children":2257},{"style":327},[2258],{"type":22,"value":341},{"type":16,"tag":309,"props":2260,"children":2261},{"class":311,"line":344},[2262],{"type":16,"tag":309,"props":2263,"children":2264},{"style":333},[2265],{"type":22,"value":350},{"type":16,"tag":309,"props":2267,"children":2268},{"class":311,"line":353},[2269,2273,2277,2281,2285,2289,2293,2297,2301],{"type":16,"tag":309,"props":2270,"children":2271},{"style":316},[2272],{"type":22,"value":501},{"type":16,"tag":309,"props":2274,"children":2275},{"style":316},[2276],{"type":22,"value":506},{"type":16,"tag":309,"props":2278,"children":2279},{"style":327},[2280],{"type":22,"value":2069},{"type":16,"tag":309,"props":2282,"children":2283},{"style":656},[2284],{"type":22,"value":2074},{"type":16,"tag":309,"props":2286,"children":2287},{"style":333},[2288],{"type":22,"value":1121},{"type":16,"tag":309,"props":2290,"children":2291},{"style":327},[2292],{"type":22,"value":648},{"type":16,"tag":309,"props":2294,"children":2295},{"style":514},[2296],{"type":22,"value":2087},{"type":16,"tag":309,"props":2298,"children":2299},{"style":333},[2300],{"type":22,"value":2092},{"type":16,"tag":309,"props":2302,"children":2303},{"style":520},[2304],{"type":22,"value":2097},{"type":16,"tag":309,"props":2306,"children":2307},{"class":311,"line":362},[2308,2312],{"type":16,"tag":309,"props":2309,"children":2310},{"style":514},[2311],{"type":22,"value":2105},{"type":16,"tag":309,"props":2313,"children":2314},{"style":678},[2315],{"type":22,"value":2316}," switch\n",{"type":16,"tag":309,"props":2318,"children":2319},{"class":311,"line":545},[2320],{"type":16,"tag":309,"props":2321,"children":2322},{"style":333},[2323],{"type":22,"value":2324},"        {\n",{"type":16,"tag":309,"props":2326,"children":2327},{"class":311,"line":704},[2328,2333,2337,2341,2345,2349,2353,2358],{"type":16,"tag":309,"props":2329,"children":2330},{"style":327},[2331],{"type":22,"value":2332},"            PhaseA",{"type":16,"tag":309,"props":2334,"children":2335},{"style":520},[2336],{"type":22,"value":523},{"type":16,"tag":309,"props":2338,"children":2339},{"style":514},[2340],{"type":22,"value":2087},{"type":16,"tag":309,"props":2342,"children":2343},{"style":333},[2344],{"type":22,"value":297},{"type":16,"tag":309,"props":2346,"children":2347},{"style":656},[2348],{"type":22,"value":2114},{"type":16,"tag":309,"props":2350,"children":2351},{"style":333},[2352],{"type":22,"value":1121},{"type":16,"tag":309,"props":2354,"children":2355},{"style":520},[2356],{"type":22,"value":2357},"..",{"type":16,"tag":309,"props":2359,"children":2360},{"style":333},[2361],{"type":22,"value":2362},".),\n",{"type":16,"tag":309,"props":2364,"children":2365},{"class":311,"line":713},[2366,2371,2375,2379,2383,2387,2391,2395],{"type":16,"tag":309,"props":2367,"children":2368},{"style":327},[2369],{"type":22,"value":2370},"            PhaseB",{"type":16,"tag":309,"props":2372,"children":2373},{"style":520},[2374],{"type":22,"value":523},{"type":16,"tag":309,"props":2376,"children":2377},{"style":514},[2378],{"type":22,"value":2087},{"type":16,"tag":309,"props":2380,"children":2381},{"style":333},[2382],{"type":22,"value":297},{"type":16,"tag":309,"props":2384,"children":2385},{"style":656},[2386],{"type":22,"value":2114},{"type":16,"tag":309,"props":2388,"children":2389},{"style":333},[2390],{"type":22,"value":1121},{"type":16,"tag":309,"props":2392,"children":2393},{"style":520},[2394],{"type":22,"value":2357},{"type":16,"tag":309,"props":2396,"children":2397},{"style":333},[2398],{"type":22,"value":2362},{"type":16,"tag":309,"props":2400,"children":2401},{"class":311,"line":723},[2402,2407,2411,2416,2420,2425,2429,2434],{"type":16,"tag":309,"props":2403,"children":2404},{"style":316},[2405],{"type":22,"value":2406},"            _",{"type":16,"tag":309,"props":2408,"children":2409},{"style":520},[2410],{"type":22,"value":523},{"type":16,"tag":309,"props":2412,"children":2413},{"style":316},[2414],{"type":22,"value":2415}," base",{"type":16,"tag":309,"props":2417,"children":2418},{"style":333},[2419],{"type":22,"value":297},{"type":16,"tag":309,"props":2421,"children":2422},{"style":656},[2423],{"type":22,"value":2424},"GetContext",{"type":16,"tag":309,"props":2426,"children":2427},{"style":333},[2428],{"type":22,"value":1121},{"type":16,"tag":309,"props":2430,"children":2431},{"style":514},[2432],{"type":22,"value":2433},"phase",{"type":16,"tag":309,"props":2435,"children":2436},{"style":333},[2437],{"type":22,"value":1286},{"type":16,"tag":309,"props":2439,"children":2440},{"class":311,"line":760},[2441],{"type":16,"tag":309,"props":2442,"children":2443},{"style":333},[2444],{"type":22,"value":2445},"        };\n",{"type":16,"tag":309,"props":2447,"children":2448},{"class":311,"line":768},[2449],{"type":16,"tag":309,"props":2450,"children":2451},{"style":333},[2452],{"type":22,"value":368},{"type":16,"tag":394,"props":2454,"children":2456},{"id":2455},"before-and-after-a-phase",[2457],{"type":22,"value":2458},"Before and After a Phase",{"type":16,"tag":24,"props":2460,"children":2461},{},[2462,2464,2470,2472,2478],{"type":22,"value":2463},"Layers might need to do some standard stuff before and after a phase is applied\nto all features for all layers. Use ",{"type":16,"tag":30,"props":2465,"children":2467},{"className":2466},[],[2468],{"type":22,"value":2469},"GetContext()",{"type":22,"value":2471}," method to do stuff before,\nand ",{"type":16,"tag":30,"props":2473,"children":2475},{"className":2474},[],[2476],{"type":22,"value":2477},"onDispose:",{"type":22,"value":2479}," delegate to do stuff after.",{"type":16,"tag":299,"props":2481,"children":2483},{"className":301,"code":2482,"language":303,"meta":9,"style":9},"public class LayerX : LayerBase\u003CAddServices>\n{\n    readonly LayerXConfiguration _configuration = new();\n\n    protected override PhaseContext GetContext(AddServices phase)\n    {\n        var services = Context.GetServiceCollection();\n\n        services.AddStandardStuffBefore();\n\n        phase.CreateContext(_configuration,\n            onDispose: () => services.AddStandardStuffAfter()\n        );\n    }\n}\n",[2484],{"type":16,"tag":30,"props":2485,"children":2486},{"__ignoreMap":9},[2487,2522,2529,2556,2563,2598,2605,2638,2645,2666,2673,2701,2736,2744,2751],{"type":16,"tag":309,"props":2488,"children":2489},{"class":311,"line":312},[2490,2494,2498,2502,2506,2510,2514,2518],{"type":16,"tag":309,"props":2491,"children":2492},{"style":316},[2493],{"type":22,"value":319},{"type":16,"tag":309,"props":2495,"children":2496},{"style":316},[2497],{"type":22,"value":324},{"type":16,"tag":309,"props":2499,"children":2500},{"style":327},[2501],{"type":22,"value":330},{"type":16,"tag":309,"props":2503,"children":2504},{"style":333},[2505],{"type":22,"value":336},{"type":16,"tag":309,"props":2507,"children":2508},{"style":327},[2509],{"type":22,"value":295},{"type":16,"tag":309,"props":2511,"children":2512},{"style":333},[2513],{"type":22,"value":643},{"type":16,"tag":309,"props":2515,"children":2516},{"style":327},[2517],{"type":22,"value":2005},{"type":16,"tag":309,"props":2519,"children":2520},{"style":333},[2521],{"type":22,"value":1243},{"type":16,"tag":309,"props":2523,"children":2524},{"class":311,"line":344},[2525],{"type":16,"tag":309,"props":2526,"children":2527},{"style":333},[2528],{"type":22,"value":350},{"type":16,"tag":309,"props":2530,"children":2531},{"class":311,"line":353},[2532,2536,2540,2544,2548,2552],{"type":16,"tag":309,"props":2533,"children":2534},{"style":316},[2535],{"type":22,"value":2024},{"type":16,"tag":309,"props":2537,"children":2538},{"style":327},[2539],{"type":22,"value":2029},{"type":16,"tag":309,"props":2541,"children":2542},{"style":514},[2543],{"type":22,"value":2034},{"type":16,"tag":309,"props":2545,"children":2546},{"style":520},[2547],{"type":22,"value":1076},{"type":16,"tag":309,"props":2549,"children":2550},{"style":316},[2551],{"type":22,"value":691},{"type":16,"tag":309,"props":2553,"children":2554},{"style":333},[2555],{"type":22,"value":701},{"type":16,"tag":309,"props":2557,"children":2558},{"class":311,"line":362},[2559],{"type":16,"tag":309,"props":2560,"children":2561},{"emptyLinePlaceholder":717},[2562],{"type":22,"value":720},{"type":16,"tag":309,"props":2564,"children":2565},{"class":311,"line":545},[2566,2570,2574,2578,2582,2586,2590,2594],{"type":16,"tag":309,"props":2567,"children":2568},{"style":316},[2569],{"type":22,"value":501},{"type":16,"tag":309,"props":2571,"children":2572},{"style":316},[2573],{"type":22,"value":506},{"type":16,"tag":309,"props":2575,"children":2576},{"style":327},[2577],{"type":22,"value":2069},{"type":16,"tag":309,"props":2579,"children":2580},{"style":656},[2581],{"type":22,"value":2074},{"type":16,"tag":309,"props":2583,"children":2584},{"style":333},[2585],{"type":22,"value":1121},{"type":16,"tag":309,"props":2587,"children":2588},{"style":327},[2589],{"type":22,"value":2005},{"type":16,"tag":309,"props":2591,"children":2592},{"style":514},[2593],{"type":22,"value":2087},{"type":16,"tag":309,"props":2595,"children":2596},{"style":333},[2597],{"type":22,"value":1286},{"type":16,"tag":309,"props":2599,"children":2600},{"class":311,"line":704},[2601],{"type":16,"tag":309,"props":2602,"children":2603},{"style":333},[2604],{"type":22,"value":672},{"type":16,"tag":309,"props":2606,"children":2607},{"class":311,"line":713},[2608,2612,2616,2620,2625,2629,2634],{"type":16,"tag":309,"props":2609,"children":2610},{"style":316},[2611],{"type":22,"value":1066},{"type":16,"tag":309,"props":2613,"children":2614},{"style":514},[2615],{"type":22,"value":1778},{"type":16,"tag":309,"props":2617,"children":2618},{"style":520},[2619],{"type":22,"value":1076},{"type":16,"tag":309,"props":2621,"children":2622},{"style":514},[2623],{"type":22,"value":2624}," Context",{"type":16,"tag":309,"props":2626,"children":2627},{"style":333},[2628],{"type":22,"value":297},{"type":16,"tag":309,"props":2630,"children":2631},{"style":656},[2632],{"type":22,"value":2633},"GetServiceCollection",{"type":16,"tag":309,"props":2635,"children":2636},{"style":333},[2637],{"type":22,"value":701},{"type":16,"tag":309,"props":2639,"children":2640},{"class":311,"line":723},[2641],{"type":16,"tag":309,"props":2642,"children":2643},{"emptyLinePlaceholder":717},[2644],{"type":22,"value":720},{"type":16,"tag":309,"props":2646,"children":2647},{"class":311,"line":760},[2648,2653,2657,2662],{"type":16,"tag":309,"props":2649,"children":2650},{"style":514},[2651],{"type":22,"value":2652},"        services",{"type":16,"tag":309,"props":2654,"children":2655},{"style":333},[2656],{"type":22,"value":297},{"type":16,"tag":309,"props":2658,"children":2659},{"style":656},[2660],{"type":22,"value":2661},"AddStandardStuffBefore",{"type":16,"tag":309,"props":2663,"children":2664},{"style":333},[2665],{"type":22,"value":701},{"type":16,"tag":309,"props":2667,"children":2668},{"class":311,"line":768},[2669],{"type":16,"tag":309,"props":2670,"children":2671},{"emptyLinePlaceholder":717},[2672],{"type":22,"value":720},{"type":16,"tag":309,"props":2674,"children":2675},{"class":311,"line":793},[2676,2680,2684,2688,2692,2696],{"type":16,"tag":309,"props":2677,"children":2678},{"style":514},[2679],{"type":22,"value":2105},{"type":16,"tag":309,"props":2681,"children":2682},{"style":333},[2683],{"type":22,"value":297},{"type":16,"tag":309,"props":2685,"children":2686},{"style":656},[2687],{"type":22,"value":2114},{"type":16,"tag":309,"props":2689,"children":2690},{"style":333},[2691],{"type":22,"value":1121},{"type":16,"tag":309,"props":2693,"children":2694},{"style":514},[2695],{"type":22,"value":2123},{"type":16,"tag":309,"props":2697,"children":2698},{"style":333},[2699],{"type":22,"value":2700},",\n",{"type":16,"tag":309,"props":2702,"children":2703},{"class":311,"line":801},[2704,2709,2714,2719,2723,2727,2732],{"type":16,"tag":309,"props":2705,"children":2706},{"style":514},[2707],{"type":22,"value":2708},"            onDispose",{"type":16,"tag":309,"props":2710,"children":2711},{"style":333},[2712],{"type":22,"value":2713},": () ",{"type":16,"tag":309,"props":2715,"children":2716},{"style":520},[2717],{"type":22,"value":2718},"=>",{"type":16,"tag":309,"props":2720,"children":2721},{"style":514},[2722],{"type":22,"value":1778},{"type":16,"tag":309,"props":2724,"children":2725},{"style":333},[2726],{"type":22,"value":297},{"type":16,"tag":309,"props":2728,"children":2729},{"style":656},[2730],{"type":22,"value":2731},"AddStandardStuffAfter",{"type":16,"tag":309,"props":2733,"children":2734},{"style":333},[2735],{"type":22,"value":664},{"type":16,"tag":309,"props":2737,"children":2738},{"class":311,"line":809},[2739],{"type":16,"tag":309,"props":2740,"children":2741},{"style":333},[2742],{"type":22,"value":2743},"        );\n",{"type":16,"tag":309,"props":2745,"children":2746},{"class":311,"line":840},[2747],{"type":16,"tag":309,"props":2748,"children":2749},{"style":333},[2750],{"type":22,"value":710},{"type":16,"tag":309,"props":2752,"children":2753},{"class":311,"line":868},[2754],{"type":16,"tag":309,"props":2755,"children":2756},{"style":333},[2757],{"type":22,"value":368},{"type":16,"tag":370,"props":2759,"children":2760},{},[2761,2768],{"type":16,"tag":24,"props":2762,"children":2763},{},[2764],{"type":16,"tag":309,"props":2765,"children":2766},{},[2767],{"type":22,"value":1404},{"type":16,"tag":24,"props":2769,"children":2770},{},[2771,2773,2778,2780,2785,2787,2792],{"type":22,"value":2772},"Notice that a layer has access to the ",{"type":16,"tag":30,"props":2774,"children":2776},{"className":2775},[],[2777],{"type":22,"value":200},{"type":22,"value":2779}," instance through\n",{"type":16,"tag":30,"props":2781,"children":2783},{"className":2782},[],[2784],{"type":22,"value":962},{"type":22,"value":2786}," property provided in ",{"type":16,"tag":30,"props":2788,"children":2790},{"className":2789},[],[2791],{"type":22,"value":295},{"type":22,"value":2793}," base class.",{"type":16,"tag":370,"props":2795,"children":2796},{},[2797,2804],{"type":16,"tag":24,"props":2798,"children":2799},{},[2800],{"type":16,"tag":309,"props":2801,"children":2802},{},[2803],{"type":22,"value":1435},{"type":16,"tag":24,"props":2805,"children":2806},{},[2807,2812,2814,2819],{"type":16,"tag":30,"props":2808,"children":2810},{"className":2809},[],[2811],{"type":22,"value":2469},{"type":22,"value":2813}," method is called for every layer before applying any of them\nto features. And ",{"type":16,"tag":30,"props":2815,"children":2817},{"className":2816},[],[2818],{"type":22,"value":2477},{"type":22,"value":2820}," actions are called after applying these\ncontexts to all features.",{"type":16,"tag":394,"props":2822,"children":2824},{"id":2823},"providing-multiple-targets",[2825],{"type":22,"value":2826},"Providing Multiple Targets",{"type":16,"tag":24,"props":2828,"children":2829},{},[2830],{"type":22,"value":2831},"It is possible to provide up to three configuration objects for the same phase.\nThere are two ways of providing multiple targets; at once or one by one.",{"type":16,"tag":2833,"props":2834,"children":2836},"h4",{"id":2835},"at-once",[2837],{"type":22,"value":2838},"At Once",{"type":16,"tag":24,"props":2840,"children":2841},{},[2842],{"type":22,"value":2843},"Below code demonstrates providing two configuration objects at once;",{"type":16,"tag":299,"props":2845,"children":2847},{"className":301,"code":2846,"language":303,"meta":9,"style":9},"public class LayerX : LayerBase\u003CAddServices>\n{\n    readonly Configuration1 _configuration1 = new();\n    readonly Configuration2 _configuration2 = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContext(_configuration1, _configuration2);\n}\n",[2848],{"type":16,"tag":30,"props":2849,"children":2850},{"__ignoreMap":9},[2851,2886,2893,2922,2951,2958,2997,3034],{"type":16,"tag":309,"props":2852,"children":2853},{"class":311,"line":312},[2854,2858,2862,2866,2870,2874,2878,2882],{"type":16,"tag":309,"props":2855,"children":2856},{"style":316},[2857],{"type":22,"value":319},{"type":16,"tag":309,"props":2859,"children":2860},{"style":316},[2861],{"type":22,"value":324},{"type":16,"tag":309,"props":2863,"children":2864},{"style":327},[2865],{"type":22,"value":330},{"type":16,"tag":309,"props":2867,"children":2868},{"style":333},[2869],{"type":22,"value":336},{"type":16,"tag":309,"props":2871,"children":2872},{"style":327},[2873],{"type":22,"value":295},{"type":16,"tag":309,"props":2875,"children":2876},{"style":333},[2877],{"type":22,"value":643},{"type":16,"tag":309,"props":2879,"children":2880},{"style":327},[2881],{"type":22,"value":2005},{"type":16,"tag":309,"props":2883,"children":2884},{"style":333},[2885],{"type":22,"value":1243},{"type":16,"tag":309,"props":2887,"children":2888},{"class":311,"line":344},[2889],{"type":16,"tag":309,"props":2890,"children":2891},{"style":333},[2892],{"type":22,"value":350},{"type":16,"tag":309,"props":2894,"children":2895},{"class":311,"line":353},[2896,2900,2905,2910,2914,2918],{"type":16,"tag":309,"props":2897,"children":2898},{"style":316},[2899],{"type":22,"value":2024},{"type":16,"tag":309,"props":2901,"children":2902},{"style":327},[2903],{"type":22,"value":2904}," Configuration1",{"type":16,"tag":309,"props":2906,"children":2907},{"style":514},[2908],{"type":22,"value":2909}," _configuration1",{"type":16,"tag":309,"props":2911,"children":2912},{"style":520},[2913],{"type":22,"value":1076},{"type":16,"tag":309,"props":2915,"children":2916},{"style":316},[2917],{"type":22,"value":691},{"type":16,"tag":309,"props":2919,"children":2920},{"style":333},[2921],{"type":22,"value":701},{"type":16,"tag":309,"props":2923,"children":2924},{"class":311,"line":362},[2925,2929,2934,2939,2943,2947],{"type":16,"tag":309,"props":2926,"children":2927},{"style":316},[2928],{"type":22,"value":2024},{"type":16,"tag":309,"props":2930,"children":2931},{"style":327},[2932],{"type":22,"value":2933}," Configuration2",{"type":16,"tag":309,"props":2935,"children":2936},{"style":514},[2937],{"type":22,"value":2938}," _configuration2",{"type":16,"tag":309,"props":2940,"children":2941},{"style":520},[2942],{"type":22,"value":1076},{"type":16,"tag":309,"props":2944,"children":2945},{"style":316},[2946],{"type":22,"value":691},{"type":16,"tag":309,"props":2948,"children":2949},{"style":333},[2950],{"type":22,"value":701},{"type":16,"tag":309,"props":2952,"children":2953},{"class":311,"line":545},[2954],{"type":16,"tag":309,"props":2955,"children":2956},{"emptyLinePlaceholder":717},[2957],{"type":22,"value":720},{"type":16,"tag":309,"props":2959,"children":2960},{"class":311,"line":704},[2961,2965,2969,2973,2977,2981,2985,2989,2993],{"type":16,"tag":309,"props":2962,"children":2963},{"style":316},[2964],{"type":22,"value":501},{"type":16,"tag":309,"props":2966,"children":2967},{"style":316},[2968],{"type":22,"value":506},{"type":16,"tag":309,"props":2970,"children":2971},{"style":327},[2972],{"type":22,"value":2069},{"type":16,"tag":309,"props":2974,"children":2975},{"style":656},[2976],{"type":22,"value":2074},{"type":16,"tag":309,"props":2978,"children":2979},{"style":333},[2980],{"type":22,"value":1121},{"type":16,"tag":309,"props":2982,"children":2983},{"style":327},[2984],{"type":22,"value":2005},{"type":16,"tag":309,"props":2986,"children":2987},{"style":514},[2988],{"type":22,"value":2087},{"type":16,"tag":309,"props":2990,"children":2991},{"style":333},[2992],{"type":22,"value":2092},{"type":16,"tag":309,"props":2994,"children":2995},{"style":520},[2996],{"type":22,"value":2097},{"type":16,"tag":309,"props":2998,"children":2999},{"class":311,"line":713},[3000,3004,3008,3012,3016,3021,3025,3030],{"type":16,"tag":309,"props":3001,"children":3002},{"style":514},[3003],{"type":22,"value":2105},{"type":16,"tag":309,"props":3005,"children":3006},{"style":333},[3007],{"type":22,"value":297},{"type":16,"tag":309,"props":3009,"children":3010},{"style":656},[3011],{"type":22,"value":2114},{"type":16,"tag":309,"props":3013,"children":3014},{"style":333},[3015],{"type":22,"value":1121},{"type":16,"tag":309,"props":3017,"children":3018},{"style":514},[3019],{"type":22,"value":3020},"_configuration1",{"type":16,"tag":309,"props":3022,"children":3023},{"style":333},[3024],{"type":22,"value":210},{"type":16,"tag":309,"props":3026,"children":3027},{"style":514},[3028],{"type":22,"value":3029},"_configuration2",{"type":16,"tag":309,"props":3031,"children":3032},{"style":333},[3033],{"type":22,"value":1131},{"type":16,"tag":309,"props":3035,"children":3036},{"class":311,"line":723},[3037],{"type":16,"tag":309,"props":3038,"children":3039},{"style":333},[3040],{"type":22,"value":368},{"type":16,"tag":24,"props":3042,"children":3043},{},[3044],{"type":22,"value":3045},"This phase context will require an action with two parameter in a feature;",{"type":16,"tag":299,"props":3047,"children":3049},{"className":301,"code":3048,"language":303,"meta":9,"style":9},"...\npublic void Configure(LayerConfigurator configurator)\n{\n    configurator.Configure((Configuration1 configuration1, Configuration2 configuration2) =>\n    {\n        // use both objects to configure\n    });\n}\n...\n",[3050],{"type":16,"tag":30,"props":3051,"children":3052},{"__ignoreMap":9},[3053,3064,3097,3104,3157,3164,3172,3180,3187],{"type":16,"tag":309,"props":3054,"children":3055},{"class":311,"line":312},[3056,3060],{"type":16,"tag":309,"props":3057,"children":3058},{"style":520},[3059],{"type":22,"value":2357},{"type":16,"tag":309,"props":3061,"children":3062},{"style":333},[3063],{"type":22,"value":542},{"type":16,"tag":309,"props":3065,"children":3066},{"class":311,"line":344},[3067,3071,3075,3080,3084,3088,3093],{"type":16,"tag":309,"props":3068,"children":3069},{"style":316},[3070],{"type":22,"value":319},{"type":16,"tag":309,"props":3072,"children":3073},{"style":316},[3074],{"type":22,"value":1042},{"type":16,"tag":309,"props":3076,"children":3077},{"style":656},[3078],{"type":22,"value":3079}," Configure",{"type":16,"tag":309,"props":3081,"children":3082},{"style":333},[3083],{"type":22,"value":1121},{"type":16,"tag":309,"props":3085,"children":3086},{"style":327},[3087],{"type":22,"value":232},{"type":16,"tag":309,"props":3089,"children":3090},{"style":514},[3091],{"type":22,"value":3092}," configurator",{"type":16,"tag":309,"props":3094,"children":3095},{"style":333},[3096],{"type":22,"value":1286},{"type":16,"tag":309,"props":3098,"children":3099},{"class":311,"line":353},[3100],{"type":16,"tag":309,"props":3101,"children":3102},{"style":333},[3103],{"type":22,"value":350},{"type":16,"tag":309,"props":3105,"children":3106},{"class":311,"line":362},[3107,3112,3116,3120,3125,3130,3135,3139,3144,3149,3153],{"type":16,"tag":309,"props":3108,"children":3109},{"style":514},[3110],{"type":22,"value":3111},"    configurator",{"type":16,"tag":309,"props":3113,"children":3114},{"style":333},[3115],{"type":22,"value":297},{"type":16,"tag":309,"props":3117,"children":3118},{"style":656},[3119],{"type":22,"value":225},{"type":16,"tag":309,"props":3121,"children":3122},{"style":333},[3123],{"type":22,"value":3124},"((",{"type":16,"tag":309,"props":3126,"children":3127},{"style":327},[3128],{"type":22,"value":3129},"Configuration1",{"type":16,"tag":309,"props":3131,"children":3132},{"style":514},[3133],{"type":22,"value":3134}," configuration1",{"type":16,"tag":309,"props":3136,"children":3137},{"style":333},[3138],{"type":22,"value":210},{"type":16,"tag":309,"props":3140,"children":3141},{"style":327},[3142],{"type":22,"value":3143},"Configuration2",{"type":16,"tag":309,"props":3145,"children":3146},{"style":514},[3147],{"type":22,"value":3148}," configuration2",{"type":16,"tag":309,"props":3150,"children":3151},{"style":333},[3152],{"type":22,"value":2092},{"type":16,"tag":309,"props":3154,"children":3155},{"style":520},[3156],{"type":22,"value":2097},{"type":16,"tag":309,"props":3158,"children":3159},{"class":311,"line":545},[3160],{"type":16,"tag":309,"props":3161,"children":3162},{"style":333},[3163],{"type":22,"value":672},{"type":16,"tag":309,"props":3165,"children":3166},{"class":311,"line":704},[3167],{"type":16,"tag":309,"props":3168,"children":3169},{"style":1495},[3170],{"type":22,"value":3171},"        // use both objects to configure\n",{"type":16,"tag":309,"props":3173,"children":3174},{"class":311,"line":713},[3175],{"type":16,"tag":309,"props":3176,"children":3177},{"style":333},[3178],{"type":22,"value":3179},"    });\n",{"type":16,"tag":309,"props":3181,"children":3182},{"class":311,"line":723},[3183],{"type":16,"tag":309,"props":3184,"children":3185},{"style":333},[3186],{"type":22,"value":368},{"type":16,"tag":309,"props":3188,"children":3189},{"class":311,"line":760},[3190,3194],{"type":16,"tag":309,"props":3191,"children":3192},{"style":520},[3193],{"type":22,"value":2357},{"type":16,"tag":309,"props":3195,"children":3196},{"style":333},[3197],{"type":22,"value":542},{"type":16,"tag":24,"props":3199,"children":3200},{},[3201,3203,3209],{"type":22,"value":3202},"See ",{"type":16,"tag":65,"props":3204,"children":3206},{"href":3205},"./feature",[3207],{"type":22,"value":3208},"Feature",{"type":22,"value":3210}," for more information on using layer configurators\nfor features.",{"type":16,"tag":2833,"props":3212,"children":3214},{"id":3213},"one-by-one",[3215],{"type":22,"value":3216},"One by One",{"type":16,"tag":24,"props":3218,"children":3219},{},[3220],{"type":22,"value":3221},"Below code demonstrates providing configuration objects one by one;",{"type":16,"tag":299,"props":3223,"children":3225},{"className":301,"code":3224,"language":303,"meta":9,"style":9},"public class LayerX : LayerBase\u003CAddServices>\n{\n    readonly Configuration1 _configuration1 = new();\n    readonly Configuration2 _configuration2 = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContextBuilder()\n            .Add(_configuration1)\n            .Add(_configuration2)\n            .Build()\n        ;\n}\n",[3226],{"type":16,"tag":30,"props":3227,"children":3228},{"__ignoreMap":9},[3229,3264,3271,3298,3325,3332,3371,3391,3415,3438,3453,3461],{"type":16,"tag":309,"props":3230,"children":3231},{"class":311,"line":312},[3232,3236,3240,3244,3248,3252,3256,3260],{"type":16,"tag":309,"props":3233,"children":3234},{"style":316},[3235],{"type":22,"value":319},{"type":16,"tag":309,"props":3237,"children":3238},{"style":316},[3239],{"type":22,"value":324},{"type":16,"tag":309,"props":3241,"children":3242},{"style":327},[3243],{"type":22,"value":330},{"type":16,"tag":309,"props":3245,"children":3246},{"style":333},[3247],{"type":22,"value":336},{"type":16,"tag":309,"props":3249,"children":3250},{"style":327},[3251],{"type":22,"value":295},{"type":16,"tag":309,"props":3253,"children":3254},{"style":333},[3255],{"type":22,"value":643},{"type":16,"tag":309,"props":3257,"children":3258},{"style":327},[3259],{"type":22,"value":2005},{"type":16,"tag":309,"props":3261,"children":3262},{"style":333},[3263],{"type":22,"value":1243},{"type":16,"tag":309,"props":3265,"children":3266},{"class":311,"line":344},[3267],{"type":16,"tag":309,"props":3268,"children":3269},{"style":333},[3270],{"type":22,"value":350},{"type":16,"tag":309,"props":3272,"children":3273},{"class":311,"line":353},[3274,3278,3282,3286,3290,3294],{"type":16,"tag":309,"props":3275,"children":3276},{"style":316},[3277],{"type":22,"value":2024},{"type":16,"tag":309,"props":3279,"children":3280},{"style":327},[3281],{"type":22,"value":2904},{"type":16,"tag":309,"props":3283,"children":3284},{"style":514},[3285],{"type":22,"value":2909},{"type":16,"tag":309,"props":3287,"children":3288},{"style":520},[3289],{"type":22,"value":1076},{"type":16,"tag":309,"props":3291,"children":3292},{"style":316},[3293],{"type":22,"value":691},{"type":16,"tag":309,"props":3295,"children":3296},{"style":333},[3297],{"type":22,"value":701},{"type":16,"tag":309,"props":3299,"children":3300},{"class":311,"line":362},[3301,3305,3309,3313,3317,3321],{"type":16,"tag":309,"props":3302,"children":3303},{"style":316},[3304],{"type":22,"value":2024},{"type":16,"tag":309,"props":3306,"children":3307},{"style":327},[3308],{"type":22,"value":2933},{"type":16,"tag":309,"props":3310,"children":3311},{"style":514},[3312],{"type":22,"value":2938},{"type":16,"tag":309,"props":3314,"children":3315},{"style":520},[3316],{"type":22,"value":1076},{"type":16,"tag":309,"props":3318,"children":3319},{"style":316},[3320],{"type":22,"value":691},{"type":16,"tag":309,"props":3322,"children":3323},{"style":333},[3324],{"type":22,"value":701},{"type":16,"tag":309,"props":3326,"children":3327},{"class":311,"line":545},[3328],{"type":16,"tag":309,"props":3329,"children":3330},{"emptyLinePlaceholder":717},[3331],{"type":22,"value":720},{"type":16,"tag":309,"props":3333,"children":3334},{"class":311,"line":704},[3335,3339,3343,3347,3351,3355,3359,3363,3367],{"type":16,"tag":309,"props":3336,"children":3337},{"style":316},[3338],{"type":22,"value":501},{"type":16,"tag":309,"props":3340,"children":3341},{"style":316},[3342],{"type":22,"value":506},{"type":16,"tag":309,"props":3344,"children":3345},{"style":327},[3346],{"type":22,"value":2069},{"type":16,"tag":309,"props":3348,"children":3349},{"style":656},[3350],{"type":22,"value":2074},{"type":16,"tag":309,"props":3352,"children":3353},{"style":333},[3354],{"type":22,"value":1121},{"type":16,"tag":309,"props":3356,"children":3357},{"style":327},[3358],{"type":22,"value":2005},{"type":16,"tag":309,"props":3360,"children":3361},{"style":514},[3362],{"type":22,"value":2087},{"type":16,"tag":309,"props":3364,"children":3365},{"style":333},[3366],{"type":22,"value":2092},{"type":16,"tag":309,"props":3368,"children":3369},{"style":520},[3370],{"type":22,"value":2097},{"type":16,"tag":309,"props":3372,"children":3373},{"class":311,"line":713},[3374,3378,3382,3387],{"type":16,"tag":309,"props":3375,"children":3376},{"style":514},[3377],{"type":22,"value":2105},{"type":16,"tag":309,"props":3379,"children":3380},{"style":333},[3381],{"type":22,"value":297},{"type":16,"tag":309,"props":3383,"children":3384},{"style":656},[3385],{"type":22,"value":3386},"CreateContextBuilder",{"type":16,"tag":309,"props":3388,"children":3389},{"style":333},[3390],{"type":22,"value":664},{"type":16,"tag":309,"props":3392,"children":3393},{"class":311,"line":723},[3394,3399,3403,3407,3411],{"type":16,"tag":309,"props":3395,"children":3396},{"style":333},[3397],{"type":22,"value":3398},"            .",{"type":16,"tag":309,"props":3400,"children":3401},{"style":656},[3402],{"type":22,"value":167},{"type":16,"tag":309,"props":3404,"children":3405},{"style":333},[3406],{"type":22,"value":1121},{"type":16,"tag":309,"props":3408,"children":3409},{"style":514},[3410],{"type":22,"value":3020},{"type":16,"tag":309,"props":3412,"children":3413},{"style":333},[3414],{"type":22,"value":1286},{"type":16,"tag":309,"props":3416,"children":3417},{"class":311,"line":760},[3418,3422,3426,3430,3434],{"type":16,"tag":309,"props":3419,"children":3420},{"style":333},[3421],{"type":22,"value":3398},{"type":16,"tag":309,"props":3423,"children":3424},{"style":656},[3425],{"type":22,"value":167},{"type":16,"tag":309,"props":3427,"children":3428},{"style":333},[3429],{"type":22,"value":1121},{"type":16,"tag":309,"props":3431,"children":3432},{"style":514},[3433],{"type":22,"value":3029},{"type":16,"tag":309,"props":3435,"children":3436},{"style":333},[3437],{"type":22,"value":1286},{"type":16,"tag":309,"props":3439,"children":3440},{"class":311,"line":768},[3441,3445,3449],{"type":16,"tag":309,"props":3442,"children":3443},{"style":333},[3444],{"type":22,"value":3398},{"type":16,"tag":309,"props":3446,"children":3447},{"style":656},[3448],{"type":22,"value":256},{"type":16,"tag":309,"props":3450,"children":3451},{"style":333},[3452],{"type":22,"value":664},{"type":16,"tag":309,"props":3454,"children":3455},{"class":311,"line":793},[3456],{"type":16,"tag":309,"props":3457,"children":3458},{"style":333},[3459],{"type":22,"value":3460},"        ;\n",{"type":16,"tag":309,"props":3462,"children":3463},{"class":311,"line":801},[3464],{"type":16,"tag":309,"props":3465,"children":3466},{"style":333},[3467],{"type":22,"value":368},{"type":16,"tag":24,"props":3469,"children":3470},{},[3471],{"type":22,"value":3472},"This phase context will require two different actions in a feature;",{"type":16,"tag":299,"props":3474,"children":3476},{"className":301,"code":3475,"language":303,"meta":9,"style":9},"...\npublic void Configure(LayerConfigurator configurator)\n{\n    configurator.Configure((Configuration1 configuration1) =>\n    {\n        // configure one by one\n    });\n\n    configurator.Configure((Configuration2 configuration2) =>\n    {\n        // configure one by one\n    });\n}\n...\n",[3477],{"type":16,"tag":30,"props":3478,"children":3479},{"__ignoreMap":9},[3480,3491,3522,3529,3564,3571,3579,3586,3593,3628,3635,3642,3649,3656],{"type":16,"tag":309,"props":3481,"children":3482},{"class":311,"line":312},[3483,3487],{"type":16,"tag":309,"props":3484,"children":3485},{"style":520},[3486],{"type":22,"value":2357},{"type":16,"tag":309,"props":3488,"children":3489},{"style":333},[3490],{"type":22,"value":542},{"type":16,"tag":309,"props":3492,"children":3493},{"class":311,"line":344},[3494,3498,3502,3506,3510,3514,3518],{"type":16,"tag":309,"props":3495,"children":3496},{"style":316},[3497],{"type":22,"value":319},{"type":16,"tag":309,"props":3499,"children":3500},{"style":316},[3501],{"type":22,"value":1042},{"type":16,"tag":309,"props":3503,"children":3504},{"style":656},[3505],{"type":22,"value":3079},{"type":16,"tag":309,"props":3507,"children":3508},{"style":333},[3509],{"type":22,"value":1121},{"type":16,"tag":309,"props":3511,"children":3512},{"style":327},[3513],{"type":22,"value":232},{"type":16,"tag":309,"props":3515,"children":3516},{"style":514},[3517],{"type":22,"value":3092},{"type":16,"tag":309,"props":3519,"children":3520},{"style":333},[3521],{"type":22,"value":1286},{"type":16,"tag":309,"props":3523,"children":3524},{"class":311,"line":353},[3525],{"type":16,"tag":309,"props":3526,"children":3527},{"style":333},[3528],{"type":22,"value":350},{"type":16,"tag":309,"props":3530,"children":3531},{"class":311,"line":362},[3532,3536,3540,3544,3548,3552,3556,3560],{"type":16,"tag":309,"props":3533,"children":3534},{"style":514},[3535],{"type":22,"value":3111},{"type":16,"tag":309,"props":3537,"children":3538},{"style":333},[3539],{"type":22,"value":297},{"type":16,"tag":309,"props":3541,"children":3542},{"style":656},[3543],{"type":22,"value":225},{"type":16,"tag":309,"props":3545,"children":3546},{"style":333},[3547],{"type":22,"value":3124},{"type":16,"tag":309,"props":3549,"children":3550},{"style":327},[3551],{"type":22,"value":3129},{"type":16,"tag":309,"props":3553,"children":3554},{"style":514},[3555],{"type":22,"value":3134},{"type":16,"tag":309,"props":3557,"children":3558},{"style":333},[3559],{"type":22,"value":2092},{"type":16,"tag":309,"props":3561,"children":3562},{"style":520},[3563],{"type":22,"value":2097},{"type":16,"tag":309,"props":3565,"children":3566},{"class":311,"line":545},[3567],{"type":16,"tag":309,"props":3568,"children":3569},{"style":333},[3570],{"type":22,"value":672},{"type":16,"tag":309,"props":3572,"children":3573},{"class":311,"line":704},[3574],{"type":16,"tag":309,"props":3575,"children":3576},{"style":1495},[3577],{"type":22,"value":3578},"        // configure one by one\n",{"type":16,"tag":309,"props":3580,"children":3581},{"class":311,"line":713},[3582],{"type":16,"tag":309,"props":3583,"children":3584},{"style":333},[3585],{"type":22,"value":3179},{"type":16,"tag":309,"props":3587,"children":3588},{"class":311,"line":723},[3589],{"type":16,"tag":309,"props":3590,"children":3591},{"emptyLinePlaceholder":717},[3592],{"type":22,"value":720},{"type":16,"tag":309,"props":3594,"children":3595},{"class":311,"line":760},[3596,3600,3604,3608,3612,3616,3620,3624],{"type":16,"tag":309,"props":3597,"children":3598},{"style":514},[3599],{"type":22,"value":3111},{"type":16,"tag":309,"props":3601,"children":3602},{"style":333},[3603],{"type":22,"value":297},{"type":16,"tag":309,"props":3605,"children":3606},{"style":656},[3607],{"type":22,"value":225},{"type":16,"tag":309,"props":3609,"children":3610},{"style":333},[3611],{"type":22,"value":3124},{"type":16,"tag":309,"props":3613,"children":3614},{"style":327},[3615],{"type":22,"value":3143},{"type":16,"tag":309,"props":3617,"children":3618},{"style":514},[3619],{"type":22,"value":3148},{"type":16,"tag":309,"props":3621,"children":3622},{"style":333},[3623],{"type":22,"value":2092},{"type":16,"tag":309,"props":3625,"children":3626},{"style":520},[3627],{"type":22,"value":2097},{"type":16,"tag":309,"props":3629,"children":3630},{"class":311,"line":768},[3631],{"type":16,"tag":309,"props":3632,"children":3633},{"style":333},[3634],{"type":22,"value":672},{"type":16,"tag":309,"props":3636,"children":3637},{"class":311,"line":793},[3638],{"type":16,"tag":309,"props":3639,"children":3640},{"style":1495},[3641],{"type":22,"value":3578},{"type":16,"tag":309,"props":3643,"children":3644},{"class":311,"line":801},[3645],{"type":16,"tag":309,"props":3646,"children":3647},{"style":333},[3648],{"type":22,"value":3179},{"type":16,"tag":309,"props":3650,"children":3651},{"class":311,"line":809},[3652],{"type":16,"tag":309,"props":3653,"children":3654},{"style":333},[3655],{"type":22,"value":368},{"type":16,"tag":309,"props":3657,"children":3658},{"class":311,"line":840},[3659,3663],{"type":16,"tag":309,"props":3660,"children":3661},{"style":520},[3662],{"type":22,"value":2357},{"type":16,"tag":309,"props":3664,"children":3665},{"style":333},[3666],{"type":22,"value":542},{"type":16,"tag":370,"props":3668,"children":3669},{},[3670,3677],{"type":16,"tag":24,"props":3671,"children":3672},{},[3673],{"type":16,"tag":309,"props":3674,"children":3675},{},[3676],{"type":22,"value":380},{"type":16,"tag":24,"props":3678,"children":3679},{},[3680,3686,3688,3694],{"type":16,"tag":30,"props":3681,"children":3683},{"className":3682},[],[3684],{"type":22,"value":3685},"phase.CreateContext()",{"type":22,"value":3687}," is a helper method that utilizes\n",{"type":16,"tag":30,"props":3689,"children":3691},{"className":3690},[],[3692],{"type":22,"value":3693},"phase.CreateContextBuilder()",{"type":22,"value":3695}," behind the scenes.",{"type":16,"tag":2833,"props":3697,"children":3699},{"id":3698},"using-in-combination",[3700],{"type":22,"value":3701},"Using in Combination",{"type":16,"tag":24,"props":3703,"children":3704},{},[3705],{"type":22,"value":3706},"You may combine these two ways to provide configuration;",{"type":16,"tag":299,"props":3708,"children":3710},{"className":301,"code":3709,"language":303,"meta":9,"style":9},"public class LayerX : LayerBase\u003CAddServices>\n{\n    readonly Configuration1 _configuration1 = new();\n    readonly Configuration2 _configuration2 = new();\n    readonly Configuration3 _configuration3 = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContextBuilder()\n            .Add(_configuration1, _configuration2)\n            .Add(_configuration3)\n            .Build()\n        ;\n}\n",[3711],{"type":16,"tag":30,"props":3712,"children":3713},{"__ignoreMap":9},[3714,3749,3756,3783,3810,3839,3846,3885,3904,3935,3959,3974,3981],{"type":16,"tag":309,"props":3715,"children":3716},{"class":311,"line":312},[3717,3721,3725,3729,3733,3737,3741,3745],{"type":16,"tag":309,"props":3718,"children":3719},{"style":316},[3720],{"type":22,"value":319},{"type":16,"tag":309,"props":3722,"children":3723},{"style":316},[3724],{"type":22,"value":324},{"type":16,"tag":309,"props":3726,"children":3727},{"style":327},[3728],{"type":22,"value":330},{"type":16,"tag":309,"props":3730,"children":3731},{"style":333},[3732],{"type":22,"value":336},{"type":16,"tag":309,"props":3734,"children":3735},{"style":327},[3736],{"type":22,"value":295},{"type":16,"tag":309,"props":3738,"children":3739},{"style":333},[3740],{"type":22,"value":643},{"type":16,"tag":309,"props":3742,"children":3743},{"style":327},[3744],{"type":22,"value":2005},{"type":16,"tag":309,"props":3746,"children":3747},{"style":333},[3748],{"type":22,"value":1243},{"type":16,"tag":309,"props":3750,"children":3751},{"class":311,"line":344},[3752],{"type":16,"tag":309,"props":3753,"children":3754},{"style":333},[3755],{"type":22,"value":350},{"type":16,"tag":309,"props":3757,"children":3758},{"class":311,"line":353},[3759,3763,3767,3771,3775,3779],{"type":16,"tag":309,"props":3760,"children":3761},{"style":316},[3762],{"type":22,"value":2024},{"type":16,"tag":309,"props":3764,"children":3765},{"style":327},[3766],{"type":22,"value":2904},{"type":16,"tag":309,"props":3768,"children":3769},{"style":514},[3770],{"type":22,"value":2909},{"type":16,"tag":309,"props":3772,"children":3773},{"style":520},[3774],{"type":22,"value":1076},{"type":16,"tag":309,"props":3776,"children":3777},{"style":316},[3778],{"type":22,"value":691},{"type":16,"tag":309,"props":3780,"children":3781},{"style":333},[3782],{"type":22,"value":701},{"type":16,"tag":309,"props":3784,"children":3785},{"class":311,"line":362},[3786,3790,3794,3798,3802,3806],{"type":16,"tag":309,"props":3787,"children":3788},{"style":316},[3789],{"type":22,"value":2024},{"type":16,"tag":309,"props":3791,"children":3792},{"style":327},[3793],{"type":22,"value":2933},{"type":16,"tag":309,"props":3795,"children":3796},{"style":514},[3797],{"type":22,"value":2938},{"type":16,"tag":309,"props":3799,"children":3800},{"style":520},[3801],{"type":22,"value":1076},{"type":16,"tag":309,"props":3803,"children":3804},{"style":316},[3805],{"type":22,"value":691},{"type":16,"tag":309,"props":3807,"children":3808},{"style":333},[3809],{"type":22,"value":701},{"type":16,"tag":309,"props":3811,"children":3812},{"class":311,"line":545},[3813,3817,3822,3827,3831,3835],{"type":16,"tag":309,"props":3814,"children":3815},{"style":316},[3816],{"type":22,"value":2024},{"type":16,"tag":309,"props":3818,"children":3819},{"style":327},[3820],{"type":22,"value":3821}," Configuration3",{"type":16,"tag":309,"props":3823,"children":3824},{"style":514},[3825],{"type":22,"value":3826}," _configuration3",{"type":16,"tag":309,"props":3828,"children":3829},{"style":520},[3830],{"type":22,"value":1076},{"type":16,"tag":309,"props":3832,"children":3833},{"style":316},[3834],{"type":22,"value":691},{"type":16,"tag":309,"props":3836,"children":3837},{"style":333},[3838],{"type":22,"value":701},{"type":16,"tag":309,"props":3840,"children":3841},{"class":311,"line":704},[3842],{"type":16,"tag":309,"props":3843,"children":3844},{"emptyLinePlaceholder":717},[3845],{"type":22,"value":720},{"type":16,"tag":309,"props":3847,"children":3848},{"class":311,"line":713},[3849,3853,3857,3861,3865,3869,3873,3877,3881],{"type":16,"tag":309,"props":3850,"children":3851},{"style":316},[3852],{"type":22,"value":501},{"type":16,"tag":309,"props":3854,"children":3855},{"style":316},[3856],{"type":22,"value":506},{"type":16,"tag":309,"props":3858,"children":3859},{"style":327},[3860],{"type":22,"value":2069},{"type":16,"tag":309,"props":3862,"children":3863},{"style":656},[3864],{"type":22,"value":2074},{"type":16,"tag":309,"props":3866,"children":3867},{"style":333},[3868],{"type":22,"value":1121},{"type":16,"tag":309,"props":3870,"children":3871},{"style":327},[3872],{"type":22,"value":2005},{"type":16,"tag":309,"props":3874,"children":3875},{"style":514},[3876],{"type":22,"value":2087},{"type":16,"tag":309,"props":3878,"children":3879},{"style":333},[3880],{"type":22,"value":2092},{"type":16,"tag":309,"props":3882,"children":3883},{"style":520},[3884],{"type":22,"value":2097},{"type":16,"tag":309,"props":3886,"children":3887},{"class":311,"line":723},[3888,3892,3896,3900],{"type":16,"tag":309,"props":3889,"children":3890},{"style":514},[3891],{"type":22,"value":2105},{"type":16,"tag":309,"props":3893,"children":3894},{"style":333},[3895],{"type":22,"value":297},{"type":16,"tag":309,"props":3897,"children":3898},{"style":656},[3899],{"type":22,"value":3386},{"type":16,"tag":309,"props":3901,"children":3902},{"style":333},[3903],{"type":22,"value":664},{"type":16,"tag":309,"props":3905,"children":3906},{"class":311,"line":760},[3907,3911,3915,3919,3923,3927,3931],{"type":16,"tag":309,"props":3908,"children":3909},{"style":333},[3910],{"type":22,"value":3398},{"type":16,"tag":309,"props":3912,"children":3913},{"style":656},[3914],{"type":22,"value":167},{"type":16,"tag":309,"props":3916,"children":3917},{"style":333},[3918],{"type":22,"value":1121},{"type":16,"tag":309,"props":3920,"children":3921},{"style":514},[3922],{"type":22,"value":3020},{"type":16,"tag":309,"props":3924,"children":3925},{"style":333},[3926],{"type":22,"value":210},{"type":16,"tag":309,"props":3928,"children":3929},{"style":514},[3930],{"type":22,"value":3029},{"type":16,"tag":309,"props":3932,"children":3933},{"style":333},[3934],{"type":22,"value":1286},{"type":16,"tag":309,"props":3936,"children":3937},{"class":311,"line":768},[3938,3942,3946,3950,3955],{"type":16,"tag":309,"props":3939,"children":3940},{"style":333},[3941],{"type":22,"value":3398},{"type":16,"tag":309,"props":3943,"children":3944},{"style":656},[3945],{"type":22,"value":167},{"type":16,"tag":309,"props":3947,"children":3948},{"style":333},[3949],{"type":22,"value":1121},{"type":16,"tag":309,"props":3951,"children":3952},{"style":514},[3953],{"type":22,"value":3954},"_configuration3",{"type":16,"tag":309,"props":3956,"children":3957},{"style":333},[3958],{"type":22,"value":1286},{"type":16,"tag":309,"props":3960,"children":3961},{"class":311,"line":793},[3962,3966,3970],{"type":16,"tag":309,"props":3963,"children":3964},{"style":333},[3965],{"type":22,"value":3398},{"type":16,"tag":309,"props":3967,"children":3968},{"style":656},[3969],{"type":22,"value":256},{"type":16,"tag":309,"props":3971,"children":3972},{"style":333},[3973],{"type":22,"value":664},{"type":16,"tag":309,"props":3975,"children":3976},{"class":311,"line":801},[3977],{"type":16,"tag":309,"props":3978,"children":3979},{"style":333},[3980],{"type":22,"value":3460},{"type":16,"tag":309,"props":3982,"children":3983},{"class":311,"line":809},[3984],{"type":16,"tag":309,"props":3985,"children":3986},{"style":333},[3987],{"type":22,"value":368},{"type":16,"tag":24,"props":3989,"children":3990},{},[3991],{"type":22,"value":3992},"This phase context will require two different actions;",{"type":16,"tag":102,"props":3994,"children":3995},{},[3996,4007],{"type":16,"tag":106,"props":3997,"children":3998},{},[3999,4001],{"type":22,"value":4000},"For the first two configuration objects: ",{"type":16,"tag":30,"props":4002,"children":4004},{"className":4003},[],[4005],{"type":22,"value":4006},"(Configuration1 configuration1, Configuration2 configuration2)",{"type":16,"tag":106,"props":4008,"children":4009},{},[4010,4012,4018],{"type":22,"value":4011},"For the last configuration object: ",{"type":16,"tag":30,"props":4013,"children":4015},{"className":4014},[],[4016],{"type":22,"value":4017},"(Configuration3 configuration3)",{"type":22,"value":297},{"type":16,"tag":4020,"props":4021,"children":4022},"style",{},[4023],{"type":22,"value":4024},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":9,"searchDepth":344,"depth":344,"links":4026},[4027,4028,4032,4037],{"id":92,"depth":344,"text":95},{"id":281,"depth":344,"text":284,"children":4029},[4030],{"id":396,"depth":353,"text":4031},"Id of a Layer",{"id":553,"depth":344,"text":556,"children":4033},[4034,4035,4036],{"id":935,"depth":353,"text":938},{"id":1169,"depth":353,"text":1172},{"id":1852,"depth":353,"text":1855},{"id":1950,"depth":344,"text":1953,"children":4038},[4039,4041,4042],{"id":2193,"depth":353,"text":4040},"Using non-generic LayerBase",{"id":2455,"depth":353,"text":2458},{"id":2823,"depth":353,"text":2826},"markdown","content:architecture:layer.md","content","architecture/layer.md","architecture/layer","md",["Reactive",4050],{},["Set"],["ShallowReactive",4053],{"content-query-hBLt6OxXWy":4054},null,["Reactive",4056],{"sectionStore":4057,"pageStore":4074},{"sections":4058},[4059,4062,4065,4068,4071],{"_path":4060,"_dir":9,"title":4061},"/recipes/","Recipes",{"_path":4063,"_dir":9,"title":4064},"/features/","Features",{"_path":4066,"_dir":9,"title":4067},"/layers/","Layers",{"_path":4069,"_dir":9,"title":4070},"/architecture/","Architecture",{"_path":4072,"_dir":9,"title":4073},"/release-notes/","Release Notes",{"pages":4075},[4076,4080,4082,4083],{"_path":4069,"title":4070,"pages":4077},[4078,19,4079],"application","feature",{"_path":4081,"title":70},"/architecture/application",{"_path":6,"title":10},{"_path":4084,"title":3208},"/architecture/feature"]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{mdc:{components:{prose:true,map:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"}},headings:{anchorLinks:{h1:false,h2:false,h3:false,h4:false,h5:false,h6:false}}},baseURL:"/",githubURL:"/mouseless/baked",matrixURL:"#baked:mouseless.org",content:{locales:[],defaultLocale:"",integrity:1738777554733,experimental:{stripQueryParameters:false,advanceQuery:false,clientDB:false},respectPathCase:false,api:{baseURL:"/api/_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{theme:"slack-dark",preload:["diff","ts","js","css","java","markdown","sql","xml","json","csharp","md","bash"],highlighter:"shiki",shikiEngine:"oniguruma",langs:["js","jsx","json","ts","tsx","vue","css","html","bash","md","mdc","yaml","diff","ts","js","css","java","markdown","sql","xml","json","csharp","md","bash"]},wsUrl:"",documentDriven:false,host:"",trailingSlash:false,search:"",contentHead:true,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"/",buildId:"6520cdaf-27af-4791-aa13-eb5ae8be67b6",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>