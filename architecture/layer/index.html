<!DOCTYPE html><html><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Layer</title>
<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Do">
<meta property="og:description" content="An opinionated framework for .NET">
<meta property="og:image" content="https://do.mouseless.codes/favicon.ico">
<meta property="og:image:width" content="50">
<meta property="og:image:height" content="50">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
<link rel="stylesheet" type="text/css" href="https://brand.mouseless.codes/assets/css/default.css">
<meta property="og:title" content="Layer">
<meta name="description" content="Each ILayer implementation represents an internal system component of the
software you develop. A layer provides application features with configuration
of this system component so that the features can bind domain objects and
system components together.">
<meta property="og:description" content="Each ILayer implementation represents an internal system component of the
software you develop. A layer provides application features with configuration
of this system component so that the features can bind domain objects and
system components together.">
<style>@media (prefers-color-scheme:dark){:root{--url-logo-full:url(/logo-full-primary.svg);--url-logo-full-mono:url(/logo-full-white.svg);--url-logo-mark:url(/logo-mark-primary.svg);--url-logo-mark-mono:url(/logo-mark-white.svg)}}@media (prefers-color-scheme:light){:root{--url-logo-full:url(/logo-full-secondary.svg);--url-logo-full-mono:url(/logo-full-black.svg);--url-logo-mark:url(/logo-mark-primary.svg);--url-logo-mark-mono:url(/logo-mark-black.svg)}}body,html{margin:0;padding:0}body{font-size:calc(var(--font-size)*1.2);min-width:calc(270px + var(--space-md))}img.do:is(.logo),img.do:is(.logo:is(.full)){content:var(--url-logo-full)}img.do:is(.logo):is(.mono),img.do:is(.logo:is(.full)):is(.mono){content:var(--url-logo-full-mono)}img.do:is(.logo:is(.mark)){content:var(--url-logo-mark)}img.do:is(.logo:is(.mark)):is(.mono){content:var(--url-logo-mark-mono)}.content nav h4{margin-bottom:var(--space-xs);margin-top:0;text-transform:uppercase}.content nav h4 a{display:inline-block;text-decoration:none}.content nav h4 a,.content nav h4 a:hover{color:var(--color-fg-soft)}.content p:has(.diagram){background-color:var(--color-bg-box);border-bottom-left-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);border-color:var(--color-bg-soft);border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);padding:30px var(--space-sm) 18px var(--space-sm);text-align:center}.content code{background-color:var(--color-bg-soft);border-radius:var(--space-xs);color:var(--color-soft);overflow-wrap:anywhere;padding:var(--space-xs) var(--space-xs)}.content pre{overflow:auto;padding:var(--space-md)}.content pre code{background-color:transparent;display:block;line-height:1.5em;max-width:0;padding:0}.content ol,.content ul{list-style-position:inside;padding-inline-start:var(--space-sm)}.content ol li,.content ul li{margin-bottom:var(--space-xs)}.content ol li ol,.content ol li ul,.content ul li ol,.content ul li ul{margin-top:var(--space-xs)}.content hr{border:2px solid var(--color-bg-soft)}@media (max-width:1830px){body{font-size:var(--font-size);line-height:var(--line-height)}.content pre code{line-height:1em}}@media (max-width:1330px){.content h2,.content h3{scroll-margin-top:var(--space-md)}nav h4 a{cursor:pointer;padding:var(--space-sm)}nav h4 a:hover{color:var(--color-logo-mark)}}</style>
<style>.content[data-v-5e897649],.full[data-v-5e897649]{box-sizing:border-box;margin:auto;max-width:calc(var(--width-content) + 30em + var(--space-md));min-width:270px}@media (max-width:1830px){.content[data-v-5e897649],.full[data-v-5e897649]{max-width:calc(var(--width-content) + 30em + var(--space-md))}}@media (max-width:1330px){.content[data-v-5e897649],.full[data-v-5e897649]{max-width:calc(var(--width-content) + 15em + var(--space-md))}}@media (max-width:1074px){.content[data-v-5e897649],.full[data-v-5e897649]{max-width:calc(var(--width-content) + var(--space-md) - var(--space-md))}}@media (max-width:818px){.content[data-v-5e897649],.full[data-v-5e897649]{max-width:82%}}.content[data-v-5e897649]{display:grid;grid-template-areas:"side content" "side content";grid-template-columns:15em;grid-template-rows:65px 1fr}.side[data-v-5e897649]{grid-area:side}article[data-v-5e897649]{grid-area:content}@media (max-width:1330px){.content[data-v-5e897649]{margin-top:0}}@media (max-width:1074px){.side[data-v-5e897649]{grid-column-end:content;z-index:2}article[data-v-5e897649]{grid-column-start:side}}@media (max-width:818px){.content[data-v-5e897649]{display:block}}</style>
<style>div.top[data-v-0b6e273e]{border-bottom:2px solid var(--color-bg-soft)}header[data-v-0b6e273e]{align-items:center;box-sizing:border-box;display:flex;flex-direction:row;justify-content:space-between;margin:auto;max-width:calc(var(--width-content) + 30em + var(--space-md));min-width:270px}@media (max-width:1830px){header[data-v-0b6e273e]{max-width:calc(var(--width-content) + 30em + var(--space-md))}}@media (max-width:1330px){header[data-v-0b6e273e]{max-width:calc(var(--width-content) + 15em + var(--space-md))}}@media (max-width:1074px){header[data-v-0b6e273e]{max-width:calc(var(--width-content) + var(--space-md) - var(--space-md))}}@media (max-width:818px){header[data-v-0b6e273e]{max-width:82%}}.overlay[data-v-0b6e273e],header .bars[data-v-0b6e273e]{display:none}.overlay[data-v-0b6e273e]{background-color:var(--color-darkgreen-900);height:100%;left:0;margin:0;opacity:.5;padding:0;position:fixed;top:0;width:100%;z-index:98}div.logo[data-v-0b6e273e]{margin:var(--space-sm) 0}div.logo a[data-v-0b6e273e]:has(img.logo){display:block;height:25px}div.logo a:has(img.logo) img.do:is(.logo[data-v-0b6e273e]){display:inline-block;height:25px}a[data-v-0b6e273e]{color:var(--color-fg-soft);cursor:pointer}a[data-v-0b6e273e]:hover{color:var(--color-logo-mark)}nav a[data-v-0b6e273e]{margin:var(--space-sm);text-decoration:none}nav a.close[data-v-0b6e273e]{display:none}nav a.active[data-v-0b6e273e]{border-bottom-color:var(--color-bg-soft);border-bottom:2px solid var(--color-logo-mark);padding-bottom:calc(var(--space-sm) + 3px)}nav a[data-v-0b6e273e]:last-child{margin-right:0}@media (max-width:1830px){div.logo a[data-v-0b6e273e]:has(img.logo){height:20px}div.logo a:has(img.logo) img.do:is(.logo[data-v-0b6e273e]){height:20px}nav a.active[data-v-0b6e273e]{padding-bottom:calc(var(--space-sm) + 1px)}}@media (max-width:1074px){.overlay[data-v-0b6e273e],a.bars[data-v-0b6e273e]{display:block}nav[data-v-0b6e273e]{background:var(--color-bg);border-left:2px solid var(--color-bg-soft);display:none;height:100%;padding:20px;position:fixed;right:0;top:0;width:calc(270px - var(--space-md));z-index:99}nav a[data-v-0b6e273e],nav.active[data-v-0b6e273e]{display:block}nav a[data-v-0b6e273e]{height:2em}nav a.close[data-v-0b6e273e]{display:block;margin-bottom:var(--space-sm)}nav a.close i[data-v-0b6e273e]{font-size:larger}nav a.active[data-v-0b6e273e]{border:0;border-left-color:var(--color-bg-soft);border-left:2px solid var(--color-logo-mark);margin-left:-22px;padding-bottom:0;padding-left:calc(20px + var(--space-sm))}}</style>
<style>nav[data-v-3a8dc5b3]{align-self:start;margin-top:var(--space-md);position:sticky;top:var(--space-sm)}nav h4[data-v-3a8dc5b3]{display:none}nav ul[data-v-3a8dc5b3]{margin:0;padding:0}nav ul li[data-v-3a8dc5b3]{list-style:none;margin:0}nav ul li a[data-v-3a8dc5b3]{border-radius:var(--space-xs);color:var(--color-fg-soft);display:block;font-size:1em;padding:var(--space-xs) var(--space-sm);text-decoration:none}nav ul li a[data-v-3a8dc5b3]:hover{color:var(--color-logo-mark)}nav ul li a.active[data-v-3a8dc5b3]{background-color:var(--color-bg-soft)}@media (max-width:1074px){nav[data-v-3a8dc5b3]{margin-top:0;top:0;width:50%}nav h4[data-v-3a8dc5b3]{display:block;font-size:.9em;text-transform:uppercase}nav h4 a[data-v-3a8dc5b3]{padding-left:0}nav h4 a[data-v-3a8dc5b3]:hover{color:var(--color-logo-mark)}nav ul[data-v-3a8dc5b3]{background-color:var(--color-bg-soft);border-radius:var(--space-sm);box-sizing:border-box;display:none;padding:var(--space-sm);position:absolute;width:200%}nav ul.active[data-v-3a8dc5b3]{display:block}nav ul li a.active[data-v-3a8dc5b3]{background-color:var(--color-bg-mute)}}@media (max-width:818px){nav[data-v-3a8dc5b3]{margin-bottom:-54px}}</style>
<style>.container[data-v-d6a729d0]{display:flex}.container .content[data-v-d6a729d0]{margin:0 var(--space-md);max-width:var(--width-content);width:100%}@media (max-width:1330px){.container[data-v-d6a729d0]{flex-direction:column-reverse;margin-left:var(--space-md)}.container .content[data-v-d6a729d0]{margin:var(--space-sm) 0 0 0}}@media (max-width:1074px){.container[data-v-d6a729d0]{margin-left:0}}</style>
<style>.full .content{margin-left:0!important;margin-right:0!important}@media (max-width:1330px){.full .container{margin-left:0}}</style>
<style>div.bottom[data-v-5d7dc394]{border-top:2px solid var(--color-bg-soft);margin-top:var(--space-md)}footer[data-v-5d7dc394]{align-items:flex-start;box-sizing:border-box;display:flex;flex-direction:row;justify-content:space-between;margin:auto;margin-bottom:var(--space-sm);margin-top:var(--space-sm);max-width:calc(var(--width-content) + 30em + var(--space-md));min-width:270px}@media (max-width:1830px){footer[data-v-5d7dc394]{max-width:calc(var(--width-content) + 30em + var(--space-md))}}@media (max-width:1330px){footer[data-v-5d7dc394]{max-width:calc(var(--width-content) + 15em + var(--space-md))}}@media (max-width:1074px){footer[data-v-5d7dc394]{max-width:calc(var(--width-content) + var(--space-md) - var(--space-md))}}@media (max-width:818px){footer[data-v-5d7dc394]{max-width:82%}}footer[data-v-5d7dc394],footer *[data-v-5d7dc394]{color:var(--color-fg-mute)}footer div[data-v-5d7dc394],footer nav[data-v-5d7dc394]{font-family:var(--font-heading);font-size:smaller}div.logo[data-v-5d7dc394]{margin:var(--space-sm) 0}div.logo a[data-v-5d7dc394]:has(img.logo){display:block;height:15px}div.logo a:has(img.logo) img.do:is(.logo[data-v-5d7dc394]){display:inline-block;height:15px;opacity:.5}div.logo span[data-v-5d7dc394]{display:inline-block;margin-top:var(--space-sm)}nav[data-v-5d7dc394]{text-align:right}nav a[data-v-5d7dc394]{display:block;margin:var(--space-xs);text-decoration:none}nav a[data-v-5d7dc394]:hover,nav a:hover i[data-v-5d7dc394]{color:var(--color-logo-mark)}@media (max-width:818px){footer[data-v-5d7dc394]{display:block}footer nav[data-v-5d7dc394]{text-align:left}footer nav a[data-v-5d7dc394]{margin-left:0}}</style>
<style>.navigation-buttons-container[data-v-cb256488]{margin-top:var(--space-md);max-width:var(--width-content)}.navigation-buttons-container .button a[data-v-cb256488]{text-decoration:none}.navigation-buttons-container .button a .link-text[data-v-cb256488]{color:var(--color-fg-mute);font-size:.75em}.navigation-buttons-container .button a .link-text h3[data-v-cb256488]{color:var(--color-fg-soft);font-size:1.5em;margin-top:0}.navigation-buttons-container .button a:hover h3[data-v-cb256488]{color:var(--color-logo-mark)}.navigation-buttons-container .button.left[data-v-cb256488]{float:left;text-align:left}.navigation-buttons-container .button.right[data-v-cb256488]{float:right;text-align:end}</style>
<style>h4[data-v-39cd5078]{font-size:1em;margin-bottom:var(--space-xs);padding-left:var(--space-sm)}nav[data-v-39cd5078]{align-self:start;font-size:.9em;margin-top:var(--space-md);overflow:hidden;position:sticky;top:var(--space-sm);white-space:nowrap;width:15em}nav ul[data-v-39cd5078]{margin:0;padding-left:0}nav ul li[data-v-39cd5078]{line-height:24px;list-style:none;margin:0}nav ul li a[data-v-39cd5078]{border-left:2px solid transparent;color:var(--color-fg-soft);cursor:pointer;display:block;margin-top:var(--space-xs);overflow:hidden;padding-left:var(--space-sm);text-decoration:none;text-overflow:ellipsis}nav ul li a[data-v-39cd5078]:hover{color:var(--color-logo-mark)}nav ul li a.active[data-v-39cd5078]{border-left-color:var(--color-bg-mute)}nav ul li a.return-to-top[data-v-39cd5078]{margin-top:var(--space-sm)}nav ul li ul[data-v-39cd5078]{margin-bottom:var(--space-xs)}nav ul li ul a[data-v-39cd5078]{padding-left:calc(var(--space-sm) + 1em)}@media (max-width:1330px){nav[data-v-39cd5078]{background-color:var(--color-bg);font-size:.9em;margin:0 0 -52px;text-align:right;top:0;width:100%}nav h4 a[data-v-39cd5078]{display:inline-block;padding-left:0;padding-right:0}nav h4 a[data-v-39cd5078]:hover{color:var(--color-logo-mark)}nav>ul[data-v-39cd5078]{background-color:var(--color-bg-soft);border-radius:var(--space-sm);display:none;margin-bottom:var(--space-md);padding:var(--space-sm);padding-left:0;text-align:left}nav>ul.active[data-v-39cd5078]{display:block}nav ul li a[data-v-39cd5078]{padding-left:var(--space-sm)}nav ul li a.active[data-v-39cd5078]:before{left:0}nav ul li ul li a[data-v-39cd5078]{padding-left:calc(var(--space-sm) + 1em)}}</style>
<style>a[data-v-672de57a]{font-family:var(--font-default)}i[data-v-672de57a]{margin-left:var(--space-xs)}</style>
<style>pre code .line{display:block;min-height:1rem}</style>
<style>blockquote[data-v-52748c37]{align-items:flex-start;display:flex;flex-direction:row;justify-content:flex-start;margin:var(--space-sm) 0;max-width:var(--width-content);padding:0}blockquote i[data-v-52748c37]{line-height:var(--line-height);margin-top:var(--space-sm)}blockquote div[data-v-52748c37]{padding-left:var(--space-sm);width:100%}blockquote.info i[data-v-52748c37]{color:var(--color-blue-0)}blockquote.warning i[data-v-52748c37]{color:var(--color-orange-n1)}blockquote.tip i[data-v-52748c37]{color:var(--color-green-n1)}blockquote.danger i[data-v-52748c37]{color:var(--color-red-600)}blockquote.default i[data-v-52748c37]{color:var(--color-fg)}</style>
<link rel="stylesheet" href="/_nuxt/ProsePre.CchFRBtv.css">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.BKRSOhHZ.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/default.ZeXFFCQq.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Header.D4-sshK1.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/nuxt-link.BEJk8Pkg.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/sectionStore.C3ejdWZu.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Side.E8z87-9v.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/pageStore.CYGuwMWu.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Footer.Cjc3SAkb.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/query.u6KQ4wFW.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/preview.PJgrmWj9.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/applyOrder.of5sZTY8.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/_...content-page_.Coq4m1eH.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRenderer.CcJ6ndrj.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRendererMarkdown.vue.BHgKjufN.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.BsYmvPZw.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BottomNavigation.D5pZWWlO.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Toc.BNXMOVaX.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentDoc.CUuu5iew.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/vue.f36acd1f.Byjt77Q7.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentQuery.Bdpk52RB.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/asyncData.D7icIDqi.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRendererMarkdown.fm2bJ3FX.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH1.BSFvo2HZ.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.BHGPcOKS.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCodeInline.ByMepgt0.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseA.S0U4U9Fr.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH2.CsiM6o-G.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseOl.Bk__45Wm.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseLi.DcrzDAn2.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProsePre.Bagry62q.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCode.vue.C6qEGv_2.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCode.CaZR18qP.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseBlockquote.BQ1Glrxp.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH3.CAxcyV9l.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH4.Bj8YHJAk.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/error-404.Bjz4evy3.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/error-500.DQskRAOG.js">
<script type="module" src="/_nuxt/entry.BKRSOhHZ.js" crossorigin></script></head><body><div id="__nuxt"><div data-v-5e897649><div class="top" data-v-5e897649 data-v-0b6e273e><header data-v-0b6e273e><div class="logo" data-v-0b6e273e><a href="/" class="" data-v-0b6e273e><img class="do logo" data-v-0b6e273e></a></div><!----><a class="bars" data-v-0b6e273e><i class="fa-solid fa-bars" data-v-0b6e273e></i></a><nav class="" data-v-0b6e273e><a class="close" data-v-0b6e273e><i class="fa-solid fa-close" data-v-0b6e273e></i></a><!--[--><a href="/blueprints/" class="" data-v-0b6e273e>Blueprints</a><a href="/features/" class="" data-v-0b6e273e>Features</a><a href="/layers/" class="" data-v-0b6e273e>Layers</a><a href="/architecture/" class="active" data-v-0b6e273e>Architecture</a><a href="/release-notes/" class="" data-v-0b6e273e>Release Notes</a><!--]--><a href="https://github.com/mouseless/do" rel="noopener noreferrer" target="_blank" data-v-0b6e273e><i class="fa-brands fa-github" data-v-0b6e273e></i></a></nav></header></div><div class="content" data-v-5e897649><nav class="side" data-v-5e897649 data-v-3a8dc5b3><h4 data-v-3a8dc5b3><a data-v-3a8dc5b3>Pages</a></h4><ul class="" data-v-3a8dc5b3><li data-v-3a8dc5b3><!--[--><!--]--></li></ul></nav><article data-v-5e897649><!--[--><!--[--><div class="container" data-v-d6a729d0><div class="content" data-v-d6a729d0><div class="toc-root" data-v-d6a729d0><h1 id="layer"><!--[-->Layer<!--]--></h1><p><!--[-->Each <code class=""><!--[-->ILayer<!--]--></code> implementation represents an internal system component of the
software you develop. A layer provides application features with configuration
of this system component so that the features can bind domain objects and
system components together.<!--]--></p><p><!--[-->Let&#39;s take relational database as an example. A relational database is treated
as an internal system component and is introduced by the <code class=""><!--[-->DataAccessLayer<!--]--></code> along
with a configuration API. This API enables a feature to map your domain entities
to database tables.<!--]--></p><p><!--[-->Another good example is the <code class=""><!--[-->HttpServerLayer<!--]--></code>. This layer introduces the ASP.NET
Core framework into your application. It provides three phases, as mentioned in
<a href="/architecture/application" class="" data-v-672de57a><!--[-->Application<!--]--><!----></a>, along with <code class=""><!--[-->IMiddlewareCollection<!--]--></code> and
<code class=""><!--[-->IEndpointRouteBuilder<!--]--></code> objects as its configuration API. This way, any feature
has the ability to use a middleware or add routes to the application.<!--]--></p><h2 id="conventions"><!--[-->Conventions<!--]--></h2><p><!--[-->For a consistent developer experience, follow below conventions when
implementing a new layer;<!--]--></p><ol><!--[--><li><!--[-->Place all layer related classes under the same folder named after layer,
e.g., <code class=""><!--[-->DependencyInjection/<!--]--></code><!--]--></li><li><!--[-->Use <code class=""><!--[-->Layer<!--]--></code> suffix in layer class name, e.g.,
<code class=""><!--[-->DependencyInjection/DependencyInjectionLayer.cs<!--]--></code><!--]--></li><li><!--[-->Provide extension methods in <code class=""><!--[-->Do<!--]--></code> namespace, e.g.,
<code class=""><!--[-->DependencyInjection/DependencyInjectionExtensions.cs<!--]--></code>;
<ol><!--[--><li><!--[--><code class=""><!--[-->Add<!--]--></code> extension to <code class=""><!--[-->List&lt;ILayer&gt;<!--]--></code>, e.g., <code class=""><!--[-->AddDependencyInjection()<!--]--></code><!--]--></li><li><!--[--><code class=""><!--[-->Get<!--]--></code> extensions to <code class=""><!--[-->ApplicationContext<!--]--></code>, e.g.,
<code class=""><!--[-->GetWebApplicationBuilder()<!--]--></code>, <code class=""><!--[-->GetWebApplication()<!--]--></code><!--]--></li><li><!--[--><code class=""><!--[-->Configure<!--]--></code> extensions to <code class=""><!--[-->LayerConfigurator<!--]--></code> per configuration
target(s), e.g., <code class=""><!--[-->ConfigureServiceCollection()<!--]--></code><!--]--></li><!--]--></ol><!--]--></li><li><!--[-->Place phase implementations as nested classes under the layer class<!--]--></li><li><!--[-->Don&#39;t use any suffix for phases and use method-like names, e.g., <code class=""><!--[-->Build<!--]--></code> and
<code class=""><!--[-->Run<!--]--></code><!--]--></li><!--]--></ol><p><!--[-->Please refer to existing layers in <a href="https://github.com/mouseless/do" rel="nofollow" target="_blank" data-v-672de57a><!--[-->github.com/mouseless/do<!--]--><i class="fa-solid fa-arrow-up-right-from-square" data-v-672de57a></i></a> for examples.<!--]--></p><h2 id="creating-a-layer"><!--[-->Creating A Layer<!--]--></h2><p><!--[-->To create a layer, create a class using above conventions and extend
<code class=""><!--[-->LayerBase<!--]--></code>.<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> LayerX</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#E6E6E6">    ...
</span></span><span class="line" line="4"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><blockquote class="tip" data-v-52748c37><i class="fa fa-lightbulb" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->You can directly implement provided interface <code class=""><!--[-->ILayer<!--]--></code>, however we&#39;ve created
some base classes to make it easier for you to create layers. All examples
demonstrate usage of these base classes.<!--]--></p><!--]--></div></blockquote><h3 id="id-of-a-layer"><!--[--><code class=""><!--[-->Id<!--]--></code> of a Layer<!--]--></h3><p><!--[--><code class=""><!--[-->ILayer<!--]--></code> has an <code class=""><!--[-->Id<!--]--></code> property which should be a unique per <code class=""><!--[-->Application<!--]--></code>
instance. <code class=""><!--[-->LayerBase<!--]--></code> sets the <code class=""><!--[-->Id<!--]--></code> as name of the concrete class e.g.,
<code class=""><!--[-->LayerX<!--]--></code> at above example.<!--]--></p><p><!--[-->You can override its value in layer implementation class as shown below;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> LayerX</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#569CD6"> string</span><span style="--shiki-default:#9CDCFE"> Id</span><span style="--shiki-default:#D4D4D4"> =&gt;</span><span style="--shiki-default:#CE9178"> &quot;CustomUniqueId&quot;
</span></span><span class="line" line="4"><span style="--shiki-default:#D4D4D4">    ..</span><span style="--shiki-default:#E6E6E6">.
</span></span><span class="line" line="5"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><h2 id="adding-phases"><!--[-->Adding Phases<!--]--></h2><p><!--[-->By default <code class=""><!--[-->LayerBase<!--]--></code> returns no phases. To add one or more phases into the
application, you need to override <code class=""><!--[-->GetPhases()<!--]--></code> method as shown below;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> SampleLayer</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#4EC9B0"> IEnumerable</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">IPhase</span><span style="--shiki-default:#E6E6E6">&gt; </span><span style="--shiki-default:#DCDCAA">GetPhases</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="4"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="5"><span style="--shiki-default:#C586C0">        yield</span><span style="--shiki-default:#C586C0"> return</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#4EC9B0"> DoA</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="6"><span style="--shiki-default:#C586C0">        yield</span><span style="--shiki-default:#C586C0"> return</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#4EC9B0"> DoB</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="7"><span style="--shiki-default:#E6E6E6">    }
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span style="--shiki-default:#569CD6">    public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> DoA</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">PhaseBase</span><span style="--shiki-default:#E6E6E6"> { ... }
</span></span><span class="line" line="10"><span style="--shiki-default:#569CD6">    public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> DoB</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">PhaseBase</span><span style="--shiki-default:#E6E6E6"> { ... }
</span></span><span class="line" line="11"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><p><!--[-->Here <code class=""><!--[-->SampleLayer<!--]--></code> adds two phases, <code class=""><!--[-->DoA<!--]--></code> and <code class=""><!--[-->DoB<!--]--></code>, to the application.<!--]--></p><blockquote class="tip" data-v-52748c37><i class="fa fa-lightbulb" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->By convention place the phase implementations as a nested class in the layer
it is added.<!--]--></p><!--]--></div></blockquote><h3 id="initializing-a-phase"><!--[-->Initializing a Phase<!--]--></h3><p><!--[--><code class=""><!--[-->PhaseBase<!--]--></code> class has <code class=""><!--[-->Initialize()<!--]--></code> method to override so that it can add an
object to the application context via <code class=""><!--[-->Context<!--]--></code> property. Base <code class=""><!--[-->Initialize()<!--]--></code>
method does not add any objects to the application. Below, you can see how
<code class=""><!--[-->CreateBuilder<!--]--></code> phase adds <code class=""><!--[-->WebApplicationBuilder<!--]--></code> to the context;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> CreateBuilder</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">PhaseBase
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#569CD6"> void</span><span style="--shiki-default:#DCDCAA"> Initialize</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="4"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="5"><span style="--shiki-default:#569CD6">        var</span><span style="--shiki-default:#9CDCFE"> build</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#9CDCFE"> WebApplication</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateBuilder</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="6"><span emptylineplaceholder="true">
</span></span><span class="line" line="7"><span style="--shiki-default:#9CDCFE">        Context</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">Add</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">build</span><span style="--shiki-default:#E6E6E6">);
</span></span><span class="line" line="8"><span style="--shiki-default:#E6E6E6">    }
</span></span><span class="line" line="9"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><blockquote class="tip" data-v-52748c37><i class="fa fa-lightbulb" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->You can directly implement provided interface <code class=""><!--[-->IPhase<!--]--></code>, however we&#39;ve created
some base classes to make it easier for you to create phases. All examples
demonstrate usage of these base classes.<!--]--></p><!--]--></div></blockquote><h3 id="readiness-via-dependencies"><!--[-->Readiness via Dependencies<!--]--></h3><p><!--[-->You can define context dependencies via generic <code class=""><!--[-->PhaseBase&lt;&gt;<!--]--></code> classes to make
the phase wait until context is ready to provide that dependency. For example,
<code class=""><!--[-->Build<!--]--></code> depends on the <code class=""><!--[-->WebApplicationBuilder<!--]--></code> instance as shown below;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> Build</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">PhaseBase</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">WebApplicationBuilder</span><span style="--shiki-default:#E6E6E6">&gt;
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#569CD6"> void</span><span style="--shiki-default:#DCDCAA"> Initialize</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">WebApplicationBuilder</span><span style="--shiki-default:#9CDCFE"> build</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="4"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="5"><span style="--shiki-default:#569CD6">        var</span><span style="--shiki-default:#9CDCFE"> app</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#9CDCFE"> build</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">Build</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="6"><span emptylineplaceholder="true">
</span></span><span class="line" line="7"><span style="--shiki-default:#9CDCFE">        Context</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">Add</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">app</span><span style="--shiki-default:#E6E6E6">);
</span></span><span class="line" line="8"><span style="--shiki-default:#E6E6E6">    }
</span></span><span class="line" line="9"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><p><!--[--><code class=""><!--[-->PhaseBase&lt;T&gt;<!--]--></code> class requires <code class=""><!--[-->Initialize(T t)<!--]--></code> method to be implemented.<!--]--></p><blockquote class="info" data-v-52748c37><i class="fa fa-circle-info" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->You can provide more than one dependency for a phase. E.g., <code class=""><!--[-->Phase&lt;X, Y&gt;<!--]--></code>
will require <code class=""><!--[-->Initialize(X x, Y y)<!--]--></code> method to be implemented.<!--]--></p><!--]--></div></blockquote><blockquote class="warning" data-v-52748c37><i class="fa fa-warning" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->Type of the dependency provided, must be exactly the same as the type of
dependency in <code class=""><!--[-->ApplicationContext<!--]--></code>. For more information
<a href="/architecture/application#running-an-application" class="" data-v-672de57a><!--[-->Running an Application<!--]--><!----></a><!--]--></p><!--]--></div></blockquote><p><!--[-->Phases can also define context dependencies from other phase artifacts. For
example <code class=""><!--[-->HttpServerLayer.Build<!--]--></code> phase can require <code class=""><!--[-->IServiceCollection<!--]--></code> which
will be provided during <code class=""><!--[-->DependencyInjectionLayer.AddServices<!--]--></code> phase.<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#6A9955">// DependencyInjectionLayer
</span></span><span class="line" line="2"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> AddServices</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">IServiceCollection</span><span style="--shiki-default:#9CDCFE"> _services</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="3"><span style="--shiki-default:#E6E6E6">    : </span><span style="--shiki-default:#4EC9B0">PhaseBase</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">PhaseOrder</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#4EC9B0">Early</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="4"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="5"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#569CD6"> void</span><span style="--shiki-default:#DCDCAA"> Initialize</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="6"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="7"><span style="--shiki-default:#9CDCFE">        Context</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">Add</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_services</span><span style="--shiki-default:#E6E6E6">);
</span></span><span class="line" line="8"><span style="--shiki-default:#E6E6E6">    }
</span></span><span class="line" line="9"><span style="--shiki-default:#E6E6E6">}
</span></span><span class="line" line="10"><span emptylineplaceholder="true">
</span></span><span class="line" line="11"><span style="--shiki-default:#6A9955">// HttpServerLayer
</span></span><span class="line" line="12"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> Build</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="13"><span style="--shiki-default:#E6E6E6">    : </span><span style="--shiki-default:#4EC9B0">PhaseBase</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">WebApplicationBuilder</span><span style="--shiki-default:#E6E6E6">, </span><span style="--shiki-default:#4EC9B0">IServiceCollection</span><span style="--shiki-default:#E6E6E6">&gt;(</span><span style="--shiki-default:#4EC9B0">PhaseOrder</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#4EC9B0">Latest</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="14"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="15"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#569CD6"> void</span><span style="--shiki-default:#DCDCAA"> Initialize</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">WebApplicationBuilder</span><span style="--shiki-default:#9CDCFE"> build</span><span style="--shiki-default:#E6E6E6">, </span><span style="--shiki-default:#4EC9B0">IServiceCollection</span><span style="--shiki-default:#9CDCFE"> services</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="16"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="17"><span style="--shiki-default:#D4D4D4">        ..</span><span style="--shiki-default:#E6E6E6">.
</span></span><span class="line" line="18"><span style="--shiki-default:#E6E6E6">    }
</span></span><span class="line" line="19"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><blockquote class="default" data-v-52748c37><i class="fa fa-angle-right" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->⚠️<!--]--></p><p><!--[-->This type of artifact requirement will create a dependency between phases
which results to a layer to layer dependency. In the above example <code class=""><!--[-->Build<!--]--></code>
phase will never execute unless <code class=""><!--[-->DependencyLayer<!--]--></code> is added to the application<!--]--></p><!--]--></div></blockquote><h3 id="order-of-a-phase"><!--[-->Order of a Phase<!--]--></h3><p><!--[--><code class=""><!--[-->PhaseBase<!--]--></code> classes has <code class=""><!--[-->order<!--]--></code> parameter in their constructors. Default order
is <code class=""><!--[-->PhaseOrder.Normal<!--]--></code>. If you need to change the order, pass the desired order
to this parameter as shown below;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> DoThisEarlyOn</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">    : </span><span style="--shiki-default:#4EC9B0">PhaseBase</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">PhaseOrder</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#4EC9B0">Early</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="3"><span style="--shiki-default:#E6E6E6">{ }
</span></span></code><!--]--></pre><!--]--><h2 id="providing-configuration"><!--[-->Providing Configuration<!--]--></h2><p><!--[-->Layers provide configuration objects phase by phase. This means a layer can
provide two different configuration objects for two different phases. For this
reason, a layer returns <code class=""><!--[-->PhaseContext<!--]--></code> instance per phase to which it provides
configuration.<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> LayerX</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#E6E6E6">&gt;
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> LayerXConfiguration</span><span style="--shiki-default:#9CDCFE"> _configuration</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#4EC9B0"> PhaseContext</span><span style="--shiki-default:#DCDCAA"> GetContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="6"><span style="--shiki-default:#9CDCFE">        phase</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_configuration</span><span style="--shiki-default:#E6E6E6">);
</span></span><span class="line" line="7"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><p><!--[-->In this example, you see a layer named <code class=""><!--[-->LayerX<!--]--></code> providing a
<code class=""><!--[-->LayerXConfiguration<!--]--></code> instance during <code class=""><!--[-->AddServices<!--]--></code> phase.<!--]--></p><blockquote class="info" data-v-52748c37><i class="fa fa-circle-info" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->By default, a layer returns <code class=""><!--[-->PhaseContext.Empty<!--]--></code> instance for the phases it
does not provide a configuration. This means <code class=""><!--[-->Application<!--]--></code> skips that layer
for the phases it doesn&#39;t have anything to configure.<!--]--></p><!--]--></div></blockquote><h3 id="using-non-generic-layerbase"><!--[-->Using non-generic <code class=""><!--[-->LayerBase<!--]--></code><!--]--></h3><p><!--[--><code class=""><!--[-->LayerBase&lt;&gt;<!--]--></code> classes allow up to three generic arguments. If you need to
implement a layer that has things to configure during more than three phases,
use non-generic <code class=""><!--[-->LayerBase<!--]--></code> class, override <code class=""><!--[-->GetContext(IPhase phase)<!--]--></code> method
and switch given phase according to its type;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> MyLayer</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#4EC9B0"> PhaseContext</span><span style="--shiki-default:#DCDCAA"> GetContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">IPhase</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="4"><span style="--shiki-default:#9CDCFE">        phase</span><span style="--shiki-default:#C586C0"> switch
</span></span><span class="line" line="5"><span style="--shiki-default:#E6E6E6">        {
</span></span><span class="line" line="6"><span style="--shiki-default:#4EC9B0">            PhaseA</span><span style="--shiki-default:#D4D4D4"> =&gt;</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#D4D4D4">..</span><span style="--shiki-default:#E6E6E6">.),
</span></span><span class="line" line="7"><span style="--shiki-default:#4EC9B0">            PhaseB</span><span style="--shiki-default:#D4D4D4"> =&gt;</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#D4D4D4">..</span><span style="--shiki-default:#E6E6E6">.),
</span></span><span class="line" line="8"><span style="--shiki-default:#569CD6">            _</span><span style="--shiki-default:#D4D4D4"> =&gt;</span><span style="--shiki-default:#569CD6"> base</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">GetContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">phase</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="9"><span style="--shiki-default:#E6E6E6">        };
</span></span><span class="line" line="10"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><h3 id="before-and-after-a-phase"><!--[-->Before and After a Phase<!--]--></h3><p><!--[-->Layers might need to do some standard stuff before and after a phase is applied
to all features for all layers. Use <code class=""><!--[-->GetContext()<!--]--></code> method to do stuff before,
and <code class=""><!--[-->onDispose:<!--]--></code> delegate to do stuff after.<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> LayerX</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#E6E6E6">&gt;
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> LayerXConfiguration</span><span style="--shiki-default:#9CDCFE"> _configuration</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#4EC9B0"> PhaseContext</span><span style="--shiki-default:#DCDCAA"> GetContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="6"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="7"><span style="--shiki-default:#569CD6">        var</span><span style="--shiki-default:#9CDCFE"> services</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#9CDCFE"> Context</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">Get</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">IServiceCollection</span><span style="--shiki-default:#E6E6E6">&gt;();
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span style="--shiki-default:#9CDCFE">        services</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">AddStandardStuffBefore</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="10"><span emptylineplaceholder="true">
</span></span><span class="line" line="11"><span style="--shiki-default:#9CDCFE">        phase</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_configuration</span><span style="--shiki-default:#E6E6E6">,
</span></span><span class="line" line="12"><span style="--shiki-default:#9CDCFE">            onDispose</span><span style="--shiki-default:#E6E6E6">: () </span><span style="--shiki-default:#D4D4D4">=&gt;</span><span style="--shiki-default:#9CDCFE"> services</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">AddStandardStuffAfter</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="13"><span style="--shiki-default:#E6E6E6">        );
</span></span><span class="line" line="14"><span style="--shiki-default:#E6E6E6">    }
</span></span><span class="line" line="15"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><blockquote class="info" data-v-52748c37><i class="fa fa-circle-info" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->Notice that a layer has access to the <code class=""><!--[-->ApplicationContext<!--]--></code> instance through
<code class=""><!--[-->Context<!--]--></code> property provided in <code class=""><!--[-->LayerBase<!--]--></code> base class.<!--]--></p><!--]--></div></blockquote><blockquote class="warning" data-v-52748c37><i class="fa fa-warning" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[--><code class=""><!--[-->GetContext()<!--]--></code> method is called for every layer before applying any of them
to features. And <code class=""><!--[-->onDispose:<!--]--></code> actions are called after applying these
contexts to all features.<!--]--></p><!--]--></div></blockquote><h3 id="providing-multiple-targets"><!--[-->Providing Multiple Targets<!--]--></h3><p><!--[-->It is possible to provide up to three configuration objects for the same phase.
There are two ways of providing multiple targets; at once or one by one.<!--]--></p><h4 id="at-once"><!--[-->At Once<!--]--></h4><p><!--[-->Below code demonstrates providing two configuration objects at once;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> LayerX</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#E6E6E6">&gt;
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> Configuration1</span><span style="--shiki-default:#9CDCFE"> _configuration1</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="4"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> Configuration2</span><span style="--shiki-default:#9CDCFE"> _configuration2</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="5"><span emptylineplaceholder="true">
</span></span><span class="line" line="6"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#4EC9B0"> PhaseContext</span><span style="--shiki-default:#DCDCAA"> GetContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="7"><span style="--shiki-default:#9CDCFE">        phase</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_configuration1</span><span style="--shiki-default:#E6E6E6">, </span><span style="--shiki-default:#9CDCFE">_configuration2</span><span style="--shiki-default:#E6E6E6">);
</span></span><span class="line" line="8"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><p><!--[-->This phase context will require an action with two parameter in a feature;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D4D4D4">..</span><span style="--shiki-default:#E6E6E6">.
</span></span><span class="line" line="2"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> void</span><span style="--shiki-default:#DCDCAA"> Configure</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">LayerConfigurator</span><span style="--shiki-default:#9CDCFE"> configurator</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="3"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="4"><span style="--shiki-default:#9CDCFE">    configurator</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">Configure</span><span style="--shiki-default:#E6E6E6">((</span><span style="--shiki-default:#4EC9B0">Configuration1</span><span style="--shiki-default:#9CDCFE"> configuration1</span><span style="--shiki-default:#E6E6E6">, </span><span style="--shiki-default:#4EC9B0">Configuration2</span><span style="--shiki-default:#9CDCFE"> configuration2</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="5"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="6"><span style="--shiki-default:#6A9955">        // use both objects to configure
</span></span><span class="line" line="7"><span style="--shiki-default:#E6E6E6">    });
</span></span><span class="line" line="8"><span style="--shiki-default:#E6E6E6">}
</span></span><span class="line" line="9"><span style="--shiki-default:#D4D4D4">..</span><span style="--shiki-default:#E6E6E6">.
</span></span></code><!--]--></pre><!--]--><p><!--[-->See <a href="/architecture/feature" class="" data-v-672de57a><!--[-->Feature<!--]--><!----></a> for more information on using layer configurators
for features.<!--]--></p><h4 id="one-by-one"><!--[-->One by One<!--]--></h4><p><!--[-->Below code demonstrates providing configuration objects one by one;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> LayerX</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#E6E6E6">&gt;
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> Configuration1</span><span style="--shiki-default:#9CDCFE"> _configuration1</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="4"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> Configuration2</span><span style="--shiki-default:#9CDCFE"> _configuration2</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="5"><span emptylineplaceholder="true">
</span></span><span class="line" line="6"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#4EC9B0"> PhaseContext</span><span style="--shiki-default:#DCDCAA"> GetContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="7"><span style="--shiki-default:#9CDCFE">        phase</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateContextBuilder</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="8"><span style="--shiki-default:#E6E6E6">            .</span><span style="--shiki-default:#DCDCAA">Add</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_configuration1</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="9"><span style="--shiki-default:#E6E6E6">            .</span><span style="--shiki-default:#DCDCAA">Add</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_configuration2</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="10"><span style="--shiki-default:#E6E6E6">            .</span><span style="--shiki-default:#DCDCAA">Build</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="11"><span style="--shiki-default:#E6E6E6">        ;
</span></span><span class="line" line="12"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><p><!--[-->This phase context will require two different actions in a feature;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D4D4D4">..</span><span style="--shiki-default:#E6E6E6">.
</span></span><span class="line" line="2"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> void</span><span style="--shiki-default:#DCDCAA"> Configure</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">LayerConfigurator</span><span style="--shiki-default:#9CDCFE"> configurator</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="3"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="4"><span style="--shiki-default:#9CDCFE">    configurator</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">Configure</span><span style="--shiki-default:#E6E6E6">((</span><span style="--shiki-default:#4EC9B0">Configuration1</span><span style="--shiki-default:#9CDCFE"> configuration1</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="5"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="6"><span style="--shiki-default:#6A9955">        // configure one by one
</span></span><span class="line" line="7"><span style="--shiki-default:#E6E6E6">    });
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span style="--shiki-default:#9CDCFE">    configurator</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">Configure</span><span style="--shiki-default:#E6E6E6">((</span><span style="--shiki-default:#4EC9B0">Configuration2</span><span style="--shiki-default:#9CDCFE"> configuration2</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="10"><span style="--shiki-default:#E6E6E6">    {
</span></span><span class="line" line="11"><span style="--shiki-default:#6A9955">        // configure one by one
</span></span><span class="line" line="12"><span style="--shiki-default:#E6E6E6">    });
</span></span><span class="line" line="13"><span style="--shiki-default:#E6E6E6">}
</span></span><span class="line" line="14"><span style="--shiki-default:#D4D4D4">..</span><span style="--shiki-default:#E6E6E6">.
</span></span></code><!--]--></pre><!--]--><blockquote class="tip" data-v-52748c37><i class="fa fa-lightbulb" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[--><code class=""><!--[-->phase.CreateContext()<!--]--></code> is a helper method that utilizes
<code class=""><!--[-->phase.CreateContextBuilder()<!--]--></code> behind the scenes.<!--]--></p><!--]--></div></blockquote><h4 id="using-in-combination"><!--[-->Using in Combination<!--]--></h4><p><!--[-->You may combine these two ways to provide configuration;<!--]--></p><!--[--><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#569CD6">public</span><span style="--shiki-default:#569CD6"> class</span><span style="--shiki-default:#4EC9B0"> LayerX</span><span style="--shiki-default:#E6E6E6"> : </span><span style="--shiki-default:#4EC9B0">LayerBase</span><span style="--shiki-default:#E6E6E6">&lt;</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#E6E6E6">&gt;
</span></span><span class="line" line="2"><span style="--shiki-default:#E6E6E6">{
</span></span><span class="line" line="3"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> Configuration1</span><span style="--shiki-default:#9CDCFE"> _configuration1</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="4"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> Configuration2</span><span style="--shiki-default:#9CDCFE"> _configuration2</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="5"><span style="--shiki-default:#569CD6">    readonly</span><span style="--shiki-default:#4EC9B0"> Configuration3</span><span style="--shiki-default:#9CDCFE"> _configuration3</span><span style="--shiki-default:#D4D4D4"> =</span><span style="--shiki-default:#569CD6"> new</span><span style="--shiki-default:#E6E6E6">();
</span></span><span class="line" line="6"><span emptylineplaceholder="true">
</span></span><span class="line" line="7"><span style="--shiki-default:#569CD6">    protected</span><span style="--shiki-default:#569CD6"> override</span><span style="--shiki-default:#4EC9B0"> PhaseContext</span><span style="--shiki-default:#DCDCAA"> GetContext</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#4EC9B0">AddServices</span><span style="--shiki-default:#9CDCFE"> phase</span><span style="--shiki-default:#E6E6E6">) </span><span style="--shiki-default:#D4D4D4">=&gt;
</span></span><span class="line" line="8"><span style="--shiki-default:#9CDCFE">        phase</span><span style="--shiki-default:#E6E6E6">.</span><span style="--shiki-default:#DCDCAA">CreateContextBuilder</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="9"><span style="--shiki-default:#E6E6E6">            .</span><span style="--shiki-default:#DCDCAA">Add</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_configuration1</span><span style="--shiki-default:#E6E6E6">, </span><span style="--shiki-default:#9CDCFE">_configuration2</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="10"><span style="--shiki-default:#E6E6E6">            .</span><span style="--shiki-default:#DCDCAA">Add</span><span style="--shiki-default:#E6E6E6">(</span><span style="--shiki-default:#9CDCFE">_configuration3</span><span style="--shiki-default:#E6E6E6">)
</span></span><span class="line" line="11"><span style="--shiki-default:#E6E6E6">            .</span><span style="--shiki-default:#DCDCAA">Build</span><span style="--shiki-default:#E6E6E6">()
</span></span><span class="line" line="12"><span style="--shiki-default:#E6E6E6">        ;
</span></span><span class="line" line="13"><span style="--shiki-default:#E6E6E6">}
</span></span></code><!--]--></pre><!--]--><p><!--[-->This phase context will require two different actions;<!--]--></p><ol><!--[--><li><!--[-->For the first two configuration objects: <code class=""><!--[-->(Configuration1 configuration1, Configuration2 configuration2)<!--]--></code><!--]--></li><li><!--[-->For the last configuration object: <code class=""><!--[-->(Configuration3 configuration3)<!--]--></code>.<!--]--></li><!--]--></ol><style>html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}</style></div><div class="navigation-buttons-container" data-v-d6a729d0 data-v-cb256488><div class="button left" data-v-cb256488><a href="/architecture/application" class="" data-v-cb256488><div class="link-text" data-v-cb256488><i class="fa-solid fa-caret-left" data-v-cb256488></i> Previous <h3 data-v-cb256488>Application</h3></div></a></div><div class="button right" data-v-cb256488><a href="/architecture/feature" class="" data-v-cb256488><div class="link-text" data-v-cb256488> Next <i class="fa-solid fa-caret-right" data-v-cb256488></i><h3 data-v-cb256488>Feature</h3></div></a></div></div></div><nav data-v-d6a729d0 data-v-39cd5078><h4 data-v-39cd5078><a data-v-39cd5078>On This Page</a></h4><ul class="" data-v-39cd5078><!--[--><li data-v-39cd5078><a aria-current="page" href="/architecture/layer#conventions" class="router-link-active router-link-exact-active" data-v-39cd5078>Conventions</a><ul data-v-39cd5078><!--[--><!--]--></ul></li><li data-v-39cd5078><a aria-current="page" href="/architecture/layer#creating-a-layer" class="router-link-active router-link-exact-active" data-v-39cd5078>Creating A Layer</a><ul data-v-39cd5078><!--[--><li data-v-39cd5078><a aria-current="page" href="/architecture/layer#id-of-a-layer" class="router-link-active router-link-exact-active" data-v-39cd5078>Id of a Layer</a></li><!--]--></ul></li><li data-v-39cd5078><a aria-current="page" href="/architecture/layer#adding-phases" class="router-link-active router-link-exact-active" data-v-39cd5078>Adding Phases</a><ul data-v-39cd5078><!--[--><li data-v-39cd5078><a aria-current="page" href="/architecture/layer#initializing-a-phase" class="router-link-active router-link-exact-active" data-v-39cd5078>Initializing a Phase</a></li><li data-v-39cd5078><a aria-current="page" href="/architecture/layer#readiness-via-dependencies" class="router-link-active router-link-exact-active" data-v-39cd5078>Readiness via Dependencies</a></li><li data-v-39cd5078><a aria-current="page" href="/architecture/layer#order-of-a-phase" class="router-link-active router-link-exact-active" data-v-39cd5078>Order of a Phase</a></li><!--]--></ul></li><li data-v-39cd5078><a aria-current="page" href="/architecture/layer#providing-configuration" class="router-link-active router-link-exact-active" data-v-39cd5078>Providing Configuration</a><ul data-v-39cd5078><!--[--><li data-v-39cd5078><a aria-current="page" href="/architecture/layer#using-non-generic-layerbase" class="router-link-active router-link-exact-active" data-v-39cd5078>Using non-generic LayerBase</a></li><li data-v-39cd5078><a aria-current="page" href="/architecture/layer#before-and-after-a-phase" class="router-link-active router-link-exact-active" data-v-39cd5078>Before and After a Phase</a></li><li data-v-39cd5078><a aria-current="page" href="/architecture/layer#providing-multiple-targets" class="router-link-active router-link-exact-active" data-v-39cd5078>Providing Multiple Targets</a></li><!--]--></ul></li><!--]--><li data-v-39cd5078><a class="return-to-top" href="#" data-v-39cd5078>Return to top</a></li></ul></nav></div><!--]--><!--]--></article></div><div class="bottom" data-v-5e897649 data-v-5d7dc394><footer data-v-5d7dc394><div class="logo" data-v-5d7dc394><a href="/" class="" data-v-5d7dc394><img class="do logo mono" data-v-5d7dc394></a><span data-v-5d7dc394>Copyright (c) 2024 Mouseless - MIT License</span></div><nav data-v-5d7dc394><!--[--><a href="/blueprints/" class="" data-v-5d7dc394>Blueprints</a><a href="/features/" class="" data-v-5d7dc394>Features</a><a href="/layers/" class="" data-v-5d7dc394>Layers</a><a href="/architecture/" class="" data-v-5d7dc394>Architecture</a><a href="/release-notes/" class="" data-v-5d7dc394>Release Notes</a><!--]--><a href="https://github.com/mouseless/do" rel="noopener noreferrer" target="_blank" data-v-5d7dc394><i class="fa-brands fa-github" data-v-5d7dc394></i> /mouseless/do</a></nav></footer></div></div></div><script type="application/json" id="__NUXT_DATA__" data-ssr="true">[["Reactive",1],{"data":2,"state":3972,"once":3973,"_errors":3974,"serverRendered":732,"path":4,"prerenderedAt":3976,"pinia":3977},{"content-query-hBLt6OxXWy":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"body":10,"_type":3967,"_id":3968,"_source":3969,"_file":3970,"_extension":3971},"/architecture/layer","architecture",false,"","Layer","Each ILayer implementation represents an internal system component of the\nsoftware you develop. A layer provides application features with configuration\nof this system component so that the features can bind domain objects and\nsystem components together.",{"type":11,"children":12,"toc":3949},"root",[13,21,36,49,87,94,99,262,277,283,296,367,391,404,450,455,549,555,575,803,832,847,853,902,1060,1081,1087,1114,1289,1308,1339,1368,1397,1738,1766,1772,1798,1864,1870,1883,2051,2077,2107,2118,2144,2369,2375,2396,2682,2718,2745,2751,2756,2763,2768,2965,2970,3122,3135,3141,3146,3392,3397,3591,3620,3626,3631,3912,3917,3943],{"type":14,"tag":15,"props":16,"children":18},"element","h1",{"id":17},"layer",[19],{"type":20,"value":8},"text",{"type":14,"tag":22,"props":23,"children":24},"p",{},[25,27,34],{"type":20,"value":26},"Each ",{"type":14,"tag":28,"props":29,"children":31},"code",{"className":30},[],[32],{"type":20,"value":33},"ILayer",{"type":20,"value":35}," implementation represents an internal system component of the\nsoftware you develop. A layer provides application features with configuration\nof this system component so that the features can bind domain objects and\nsystem components together.",{"type":14,"tag":22,"props":37,"children":38},{},[39,41,47],{"type":20,"value":40},"Let's take relational database as an example. A relational database is treated\nas an internal system component and is introduced by the ",{"type":14,"tag":28,"props":42,"children":44},{"className":43},[],[45],{"type":20,"value":46},"DataAccessLayer",{"type":20,"value":48}," along\nwith a configuration API. This API enables a feature to map your domain entities\nto database tables.",{"type":14,"tag":22,"props":50,"children":51},{},[52,54,60,62,69,71,77,79,85],{"type":20,"value":53},"Another good example is the ",{"type":14,"tag":28,"props":55,"children":57},{"className":56},[],[58],{"type":20,"value":59},"HttpServerLayer",{"type":20,"value":61},". This layer introduces the ASP.NET\nCore framework into your application. It provides three phases, as mentioned in\n",{"type":14,"tag":63,"props":64,"children":66},"a",{"href":65},"./application",[67],{"type":20,"value":68},"Application",{"type":20,"value":70},", along with ",{"type":14,"tag":28,"props":72,"children":74},{"className":73},[],[75],{"type":20,"value":76},"IMiddlewareCollection",{"type":20,"value":78}," and\n",{"type":14,"tag":28,"props":80,"children":82},{"className":81},[],[83],{"type":20,"value":84},"IEndpointRouteBuilder",{"type":20,"value":86}," objects as its configuration API. This way, any feature\nhas the ability to use a middleware or add routes to the application.",{"type":14,"tag":88,"props":89,"children":91},"h2",{"id":90},"conventions",[92],{"type":20,"value":93},"Conventions",{"type":14,"tag":22,"props":95,"children":96},{},[97],{"type":20,"value":98},"For a consistent developer experience, follow below conventions when\nimplementing a new layer;",{"type":14,"tag":100,"props":101,"children":102},"ol",{},[103,115,133,239,244],{"type":14,"tag":104,"props":105,"children":106},"li",{},[107,109],{"type":20,"value":108},"Place all layer related classes under the same folder named after layer,\ne.g., ",{"type":14,"tag":28,"props":110,"children":112},{"className":111},[],[113],{"type":20,"value":114},"DependencyInjection/",{"type":14,"tag":104,"props":116,"children":117},{},[118,120,125,127],{"type":20,"value":119},"Use ",{"type":14,"tag":28,"props":121,"children":123},{"className":122},[],[124],{"type":20,"value":8},{"type":20,"value":126}," suffix in layer class name, e.g.,\n",{"type":14,"tag":28,"props":128,"children":130},{"className":129},[],[131],{"type":20,"value":132},"DependencyInjection/DependencyInjectionLayer.cs",{"type":14,"tag":104,"props":134,"children":135},{},[136,138,144,146,152,154],{"type":20,"value":137},"Provide extension methods in ",{"type":14,"tag":28,"props":139,"children":141},{"className":140},[],[142],{"type":20,"value":143},"Do",{"type":20,"value":145}," namespace, e.g.,\n",{"type":14,"tag":28,"props":147,"children":149},{"className":148},[],[150],{"type":20,"value":151},"DependencyInjection/DependencyInjectionExtensions.cs",{"type":20,"value":153},";\n",{"type":14,"tag":100,"props":155,"children":156},{},[157,182,215],{"type":14,"tag":104,"props":158,"children":159},{},[160,166,168,174,176],{"type":14,"tag":28,"props":161,"children":163},{"className":162},[],[164],{"type":20,"value":165},"Add",{"type":20,"value":167}," extension to ",{"type":14,"tag":28,"props":169,"children":171},{"className":170},[],[172],{"type":20,"value":173},"List\u003CILayer>",{"type":20,"value":175},", e.g., ",{"type":14,"tag":28,"props":177,"children":179},{"className":178},[],[180],{"type":20,"value":181},"AddDependencyInjection()",{"type":14,"tag":104,"props":183,"children":184},{},[185,191,193,199,201,207,209],{"type":14,"tag":28,"props":186,"children":188},{"className":187},[],[189],{"type":20,"value":190},"Get",{"type":20,"value":192}," extensions to ",{"type":14,"tag":28,"props":194,"children":196},{"className":195},[],[197],{"type":20,"value":198},"ApplicationContext",{"type":20,"value":200},", e.g.,\n",{"type":14,"tag":28,"props":202,"children":204},{"className":203},[],[205],{"type":20,"value":206},"GetWebApplicationBuilder()",{"type":20,"value":208},", ",{"type":14,"tag":28,"props":210,"children":212},{"className":211},[],[213],{"type":20,"value":214},"GetWebApplication()",{"type":14,"tag":104,"props":216,"children":217},{},[218,224,225,231,233],{"type":14,"tag":28,"props":219,"children":221},{"className":220},[],[222],{"type":20,"value":223},"Configure",{"type":20,"value":192},{"type":14,"tag":28,"props":226,"children":228},{"className":227},[],[229],{"type":20,"value":230},"LayerConfigurator",{"type":20,"value":232}," per configuration\ntarget(s), e.g., ",{"type":14,"tag":28,"props":234,"children":236},{"className":235},[],[237],{"type":20,"value":238},"ConfigureServiceCollection()",{"type":14,"tag":104,"props":240,"children":241},{},[242],{"type":20,"value":243},"Place phase implementations as nested classes under the layer class",{"type":14,"tag":104,"props":245,"children":246},{},[247,249,255,256],{"type":20,"value":248},"Don't use any suffix for phases and use method-like names, e.g., ",{"type":14,"tag":28,"props":250,"children":252},{"className":251},[],[253],{"type":20,"value":254},"Build",{"type":20,"value":78},{"type":14,"tag":28,"props":257,"children":259},{"className":258},[],[260],{"type":20,"value":261},"Run",{"type":14,"tag":22,"props":263,"children":264},{},[265,267,275],{"type":20,"value":266},"Please refer to existing layers in ",{"type":14,"tag":63,"props":268,"children":272},{"href":269,"rel":270},"https://github.com/mouseless/do",[271],"nofollow",[273],{"type":20,"value":274},"github.com/mouseless/do",{"type":20,"value":276}," for examples.",{"type":14,"tag":88,"props":278,"children":280},{"id":279},"creating-a-layer",[281],{"type":20,"value":282},"Creating A Layer",{"type":14,"tag":22,"props":284,"children":285},{},[286,288,294],{"type":20,"value":287},"To create a layer, create a class using above conventions and extend\n",{"type":14,"tag":28,"props":289,"children":291},{"className":290},[],[292],{"type":20,"value":293},"LayerBase",{"type":20,"value":295},".",{"type":14,"tag":297,"props":298,"children":302},"pre",{"className":299,"code":300,"language":301,"meta":7,"style":7},"language-csharp shiki shiki-themes slack-dark","public class LayerX : LayerBase\n{\n    ...\n}\n","csharp",[303],{"type":14,"tag":28,"props":304,"children":305},{"__ignoreMap":7},[306,340,349,358],{"type":14,"tag":307,"props":308,"children":311},"span",{"class":309,"line":310},"line",1,[312,318,323,329,335],{"type":14,"tag":307,"props":313,"children":315},{"style":314},"--shiki-default:#569CD6",[316],{"type":20,"value":317},"public",{"type":14,"tag":307,"props":319,"children":320},{"style":314},[321],{"type":20,"value":322}," class",{"type":14,"tag":307,"props":324,"children":326},{"style":325},"--shiki-default:#4EC9B0",[327],{"type":20,"value":328}," LayerX",{"type":14,"tag":307,"props":330,"children":332},{"style":331},"--shiki-default:#E6E6E6",[333],{"type":20,"value":334}," : ",{"type":14,"tag":307,"props":336,"children":337},{"style":325},[338],{"type":20,"value":339},"LayerBase\n",{"type":14,"tag":307,"props":341,"children":343},{"class":309,"line":342},2,[344],{"type":14,"tag":307,"props":345,"children":346},{"style":331},[347],{"type":20,"value":348},"{\n",{"type":14,"tag":307,"props":350,"children":352},{"class":309,"line":351},3,[353],{"type":14,"tag":307,"props":354,"children":355},{"style":331},[356],{"type":20,"value":357},"    ...\n",{"type":14,"tag":307,"props":359,"children":361},{"class":309,"line":360},4,[362],{"type":14,"tag":307,"props":363,"children":364},{"style":331},[365],{"type":20,"value":366},"}\n",{"type":14,"tag":368,"props":369,"children":370},"blockquote",{},[371,379],{"type":14,"tag":22,"props":372,"children":373},{},[374],{"type":14,"tag":307,"props":375,"children":376},{},[377],{"type":20,"value":378},"!TIP",{"type":14,"tag":22,"props":380,"children":381},{},[382,384,389],{"type":20,"value":383},"You can directly implement provided interface ",{"type":14,"tag":28,"props":385,"children":387},{"className":386},[],[388],{"type":20,"value":33},{"type":20,"value":390},", however we've created\nsome base classes to make it easier for you to create layers. All examples\ndemonstrate usage of these base classes.",{"type":14,"tag":392,"props":393,"children":395},"h3",{"id":394},"id-of-a-layer",[396,402],{"type":14,"tag":28,"props":397,"children":399},{"className":398},[],[400],{"type":20,"value":401},"Id",{"type":20,"value":403}," of a Layer",{"type":14,"tag":22,"props":405,"children":406},{},[407,412,414,419,421,426,428,433,435,440,442,448],{"type":14,"tag":28,"props":408,"children":410},{"className":409},[],[411],{"type":20,"value":33},{"type":20,"value":413}," has an ",{"type":14,"tag":28,"props":415,"children":417},{"className":416},[],[418],{"type":20,"value":401},{"type":20,"value":420}," property which should be a unique per ",{"type":14,"tag":28,"props":422,"children":424},{"className":423},[],[425],{"type":20,"value":68},{"type":20,"value":427},"\ninstance. ",{"type":14,"tag":28,"props":429,"children":431},{"className":430},[],[432],{"type":20,"value":293},{"type":20,"value":434}," sets the ",{"type":14,"tag":28,"props":436,"children":438},{"className":437},[],[439],{"type":20,"value":401},{"type":20,"value":441}," as name of the concrete class e.g.,\n",{"type":14,"tag":28,"props":443,"children":445},{"className":444},[],[446],{"type":20,"value":447},"LayerX",{"type":20,"value":449}," at above example.",{"type":14,"tag":22,"props":451,"children":452},{},[453],{"type":20,"value":454},"You can override its value in layer implementation class as shown below;",{"type":14,"tag":297,"props":456,"children":458},{"className":299,"code":457,"language":301,"meta":7,"style":7},"public class LayerX : LayerBase\n{\n    protected override string Id => \"CustomUniqueId\"\n    ...\n}\n",[459],{"type":14,"tag":28,"props":460,"children":461},{"__ignoreMap":7},[462,485,492,528,541],{"type":14,"tag":307,"props":463,"children":464},{"class":309,"line":310},[465,469,473,477,481],{"type":14,"tag":307,"props":466,"children":467},{"style":314},[468],{"type":20,"value":317},{"type":14,"tag":307,"props":470,"children":471},{"style":314},[472],{"type":20,"value":322},{"type":14,"tag":307,"props":474,"children":475},{"style":325},[476],{"type":20,"value":328},{"type":14,"tag":307,"props":478,"children":479},{"style":331},[480],{"type":20,"value":334},{"type":14,"tag":307,"props":482,"children":483},{"style":325},[484],{"type":20,"value":339},{"type":14,"tag":307,"props":486,"children":487},{"class":309,"line":342},[488],{"type":14,"tag":307,"props":489,"children":490},{"style":331},[491],{"type":20,"value":348},{"type":14,"tag":307,"props":493,"children":494},{"class":309,"line":351},[495,500,505,510,516,522],{"type":14,"tag":307,"props":496,"children":497},{"style":314},[498],{"type":20,"value":499},"    protected",{"type":14,"tag":307,"props":501,"children":502},{"style":314},[503],{"type":20,"value":504}," override",{"type":14,"tag":307,"props":506,"children":507},{"style":314},[508],{"type":20,"value":509}," string",{"type":14,"tag":307,"props":511,"children":513},{"style":512},"--shiki-default:#9CDCFE",[514],{"type":20,"value":515}," Id",{"type":14,"tag":307,"props":517,"children":519},{"style":518},"--shiki-default:#D4D4D4",[520],{"type":20,"value":521}," =>",{"type":14,"tag":307,"props":523,"children":525},{"style":524},"--shiki-default:#CE9178",[526],{"type":20,"value":527}," \"CustomUniqueId\"\n",{"type":14,"tag":307,"props":529,"children":530},{"class":309,"line":360},[531,536],{"type":14,"tag":307,"props":532,"children":533},{"style":518},[534],{"type":20,"value":535},"    ..",{"type":14,"tag":307,"props":537,"children":538},{"style":331},[539],{"type":20,"value":540},".\n",{"type":14,"tag":307,"props":542,"children":544},{"class":309,"line":543},5,[545],{"type":14,"tag":307,"props":546,"children":547},{"style":331},[548],{"type":20,"value":366},{"type":14,"tag":88,"props":550,"children":552},{"id":551},"adding-phases",[553],{"type":20,"value":554},"Adding Phases",{"type":14,"tag":22,"props":556,"children":557},{},[558,560,565,567,573],{"type":20,"value":559},"By default ",{"type":14,"tag":28,"props":561,"children":563},{"className":562},[],[564],{"type":20,"value":293},{"type":20,"value":566}," returns no phases. To add one or more phases into the\napplication, you need to override ",{"type":14,"tag":28,"props":568,"children":570},{"className":569},[],[571],{"type":20,"value":572},"GetPhases()",{"type":20,"value":574}," method as shown below;",{"type":14,"tag":297,"props":576,"children":578},{"className":299,"code":577,"language":301,"meta":7,"style":7},"public class SampleLayer : LayerBase\n{\n    protected override IEnumerable\u003CIPhase> GetPhases()\n    {\n        yield return new DoA();\n        yield return new DoB();\n    }\n\n    public class DoA : PhaseBase { ... }\n    public class DoB : PhaseBase { ... }\n}\n",[579],{"type":14,"tag":28,"props":580,"children":581},{"__ignoreMap":7},[582,606,613,655,663,692,717,726,736,767,795],{"type":14,"tag":307,"props":583,"children":584},{"class":309,"line":310},[585,589,593,598,602],{"type":14,"tag":307,"props":586,"children":587},{"style":314},[588],{"type":20,"value":317},{"type":14,"tag":307,"props":590,"children":591},{"style":314},[592],{"type":20,"value":322},{"type":14,"tag":307,"props":594,"children":595},{"style":325},[596],{"type":20,"value":597}," SampleLayer",{"type":14,"tag":307,"props":599,"children":600},{"style":331},[601],{"type":20,"value":334},{"type":14,"tag":307,"props":603,"children":604},{"style":325},[605],{"type":20,"value":339},{"type":14,"tag":307,"props":607,"children":608},{"class":309,"line":342},[609],{"type":14,"tag":307,"props":610,"children":611},{"style":331},[612],{"type":20,"value":348},{"type":14,"tag":307,"props":614,"children":615},{"class":309,"line":351},[616,620,624,629,634,639,644,650],{"type":14,"tag":307,"props":617,"children":618},{"style":314},[619],{"type":20,"value":499},{"type":14,"tag":307,"props":621,"children":622},{"style":314},[623],{"type":20,"value":504},{"type":14,"tag":307,"props":625,"children":626},{"style":325},[627],{"type":20,"value":628}," IEnumerable",{"type":14,"tag":307,"props":630,"children":631},{"style":331},[632],{"type":20,"value":633},"\u003C",{"type":14,"tag":307,"props":635,"children":636},{"style":325},[637],{"type":20,"value":638},"IPhase",{"type":14,"tag":307,"props":640,"children":641},{"style":331},[642],{"type":20,"value":643},"> ",{"type":14,"tag":307,"props":645,"children":647},{"style":646},"--shiki-default:#DCDCAA",[648],{"type":20,"value":649},"GetPhases",{"type":14,"tag":307,"props":651,"children":652},{"style":331},[653],{"type":20,"value":654},"()\n",{"type":14,"tag":307,"props":656,"children":657},{"class":309,"line":360},[658],{"type":14,"tag":307,"props":659,"children":660},{"style":331},[661],{"type":20,"value":662},"    {\n",{"type":14,"tag":307,"props":664,"children":665},{"class":309,"line":543},[666,672,677,682,687],{"type":14,"tag":307,"props":667,"children":669},{"style":668},"--shiki-default:#C586C0",[670],{"type":20,"value":671},"        yield",{"type":14,"tag":307,"props":673,"children":674},{"style":668},[675],{"type":20,"value":676}," return",{"type":14,"tag":307,"props":678,"children":679},{"style":314},[680],{"type":20,"value":681}," new",{"type":14,"tag":307,"props":683,"children":684},{"style":325},[685],{"type":20,"value":686}," DoA",{"type":14,"tag":307,"props":688,"children":689},{"style":331},[690],{"type":20,"value":691},"();\n",{"type":14,"tag":307,"props":693,"children":695},{"class":309,"line":694},6,[696,700,704,708,713],{"type":14,"tag":307,"props":697,"children":698},{"style":668},[699],{"type":20,"value":671},{"type":14,"tag":307,"props":701,"children":702},{"style":668},[703],{"type":20,"value":676},{"type":14,"tag":307,"props":705,"children":706},{"style":314},[707],{"type":20,"value":681},{"type":14,"tag":307,"props":709,"children":710},{"style":325},[711],{"type":20,"value":712}," DoB",{"type":14,"tag":307,"props":714,"children":715},{"style":331},[716],{"type":20,"value":691},{"type":14,"tag":307,"props":718,"children":720},{"class":309,"line":719},7,[721],{"type":14,"tag":307,"props":722,"children":723},{"style":331},[724],{"type":20,"value":725},"    }\n",{"type":14,"tag":307,"props":727,"children":729},{"class":309,"line":728},8,[730],{"type":14,"tag":307,"props":731,"children":733},{"emptyLinePlaceholder":732},true,[734],{"type":20,"value":735},"\n",{"type":14,"tag":307,"props":737,"children":739},{"class":309,"line":738},9,[740,745,749,753,757,762],{"type":14,"tag":307,"props":741,"children":742},{"style":314},[743],{"type":20,"value":744},"    public",{"type":14,"tag":307,"props":746,"children":747},{"style":314},[748],{"type":20,"value":322},{"type":14,"tag":307,"props":750,"children":751},{"style":325},[752],{"type":20,"value":686},{"type":14,"tag":307,"props":754,"children":755},{"style":331},[756],{"type":20,"value":334},{"type":14,"tag":307,"props":758,"children":759},{"style":325},[760],{"type":20,"value":761},"PhaseBase",{"type":14,"tag":307,"props":763,"children":764},{"style":331},[765],{"type":20,"value":766}," { ... }\n",{"type":14,"tag":307,"props":768,"children":770},{"class":309,"line":769},10,[771,775,779,783,787,791],{"type":14,"tag":307,"props":772,"children":773},{"style":314},[774],{"type":20,"value":744},{"type":14,"tag":307,"props":776,"children":777},{"style":314},[778],{"type":20,"value":322},{"type":14,"tag":307,"props":780,"children":781},{"style":325},[782],{"type":20,"value":712},{"type":14,"tag":307,"props":784,"children":785},{"style":331},[786],{"type":20,"value":334},{"type":14,"tag":307,"props":788,"children":789},{"style":325},[790],{"type":20,"value":761},{"type":14,"tag":307,"props":792,"children":793},{"style":331},[794],{"type":20,"value":766},{"type":14,"tag":307,"props":796,"children":798},{"class":309,"line":797},11,[799],{"type":14,"tag":307,"props":800,"children":801},{"style":331},[802],{"type":20,"value":366},{"type":14,"tag":22,"props":804,"children":805},{},[806,808,814,816,822,824,830],{"type":20,"value":807},"Here ",{"type":14,"tag":28,"props":809,"children":811},{"className":810},[],[812],{"type":20,"value":813},"SampleLayer",{"type":20,"value":815}," adds two phases, ",{"type":14,"tag":28,"props":817,"children":819},{"className":818},[],[820],{"type":20,"value":821},"DoA",{"type":20,"value":823}," and ",{"type":14,"tag":28,"props":825,"children":827},{"className":826},[],[828],{"type":20,"value":829},"DoB",{"type":20,"value":831},", to the application.",{"type":14,"tag":368,"props":833,"children":834},{},[835,842],{"type":14,"tag":22,"props":836,"children":837},{},[838],{"type":14,"tag":307,"props":839,"children":840},{},[841],{"type":20,"value":378},{"type":14,"tag":22,"props":843,"children":844},{},[845],{"type":20,"value":846},"By convention place the phase implementations as a nested class in the layer\nit is added.",{"type":14,"tag":392,"props":848,"children":850},{"id":849},"initializing-a-phase",[851],{"type":20,"value":852},"Initializing a Phase",{"type":14,"tag":22,"props":854,"children":855},{},[856,861,863,869,871,877,879,884,886,892,894,900],{"type":14,"tag":28,"props":857,"children":859},{"className":858},[],[860],{"type":20,"value":761},{"type":20,"value":862}," class has ",{"type":14,"tag":28,"props":864,"children":866},{"className":865},[],[867],{"type":20,"value":868},"Initialize()",{"type":20,"value":870}," method to override so that it can add an\nobject to the application context via ",{"type":14,"tag":28,"props":872,"children":874},{"className":873},[],[875],{"type":20,"value":876},"Context",{"type":20,"value":878}," property. Base ",{"type":14,"tag":28,"props":880,"children":882},{"className":881},[],[883],{"type":20,"value":868},{"type":20,"value":885},"\nmethod does not add any objects to the application. Below, you can see how\n",{"type":14,"tag":28,"props":887,"children":889},{"className":888},[],[890],{"type":20,"value":891},"CreateBuilder",{"type":20,"value":893}," phase adds ",{"type":14,"tag":28,"props":895,"children":897},{"className":896},[],[898],{"type":20,"value":899},"WebApplicationBuilder",{"type":20,"value":901}," to the context;",{"type":14,"tag":297,"props":903,"children":905},{"className":299,"code":904,"language":301,"meta":7,"style":7},"public class CreateBuilder : PhaseBase\n{\n    protected override void Initialize()\n    {\n        var build = WebApplication.CreateBuilder();\n\n        Context.Add(build);\n    }\n}\n",[906],{"type":14,"tag":28,"props":907,"children":908},{"__ignoreMap":7},[909,934,941,966,973,1008,1015,1046,1053],{"type":14,"tag":307,"props":910,"children":911},{"class":309,"line":310},[912,916,920,925,929],{"type":14,"tag":307,"props":913,"children":914},{"style":314},[915],{"type":20,"value":317},{"type":14,"tag":307,"props":917,"children":918},{"style":314},[919],{"type":20,"value":322},{"type":14,"tag":307,"props":921,"children":922},{"style":325},[923],{"type":20,"value":924}," CreateBuilder",{"type":14,"tag":307,"props":926,"children":927},{"style":331},[928],{"type":20,"value":334},{"type":14,"tag":307,"props":930,"children":931},{"style":325},[932],{"type":20,"value":933},"PhaseBase\n",{"type":14,"tag":307,"props":935,"children":936},{"class":309,"line":342},[937],{"type":14,"tag":307,"props":938,"children":939},{"style":331},[940],{"type":20,"value":348},{"type":14,"tag":307,"props":942,"children":943},{"class":309,"line":351},[944,948,952,957,962],{"type":14,"tag":307,"props":945,"children":946},{"style":314},[947],{"type":20,"value":499},{"type":14,"tag":307,"props":949,"children":950},{"style":314},[951],{"type":20,"value":504},{"type":14,"tag":307,"props":953,"children":954},{"style":314},[955],{"type":20,"value":956}," void",{"type":14,"tag":307,"props":958,"children":959},{"style":646},[960],{"type":20,"value":961}," Initialize",{"type":14,"tag":307,"props":963,"children":964},{"style":331},[965],{"type":20,"value":654},{"type":14,"tag":307,"props":967,"children":968},{"class":309,"line":360},[969],{"type":14,"tag":307,"props":970,"children":971},{"style":331},[972],{"type":20,"value":662},{"type":14,"tag":307,"props":974,"children":975},{"class":309,"line":543},[976,981,986,991,996,1000,1004],{"type":14,"tag":307,"props":977,"children":978},{"style":314},[979],{"type":20,"value":980},"        var",{"type":14,"tag":307,"props":982,"children":983},{"style":512},[984],{"type":20,"value":985}," build",{"type":14,"tag":307,"props":987,"children":988},{"style":518},[989],{"type":20,"value":990}," =",{"type":14,"tag":307,"props":992,"children":993},{"style":512},[994],{"type":20,"value":995}," WebApplication",{"type":14,"tag":307,"props":997,"children":998},{"style":331},[999],{"type":20,"value":295},{"type":14,"tag":307,"props":1001,"children":1002},{"style":646},[1003],{"type":20,"value":891},{"type":14,"tag":307,"props":1005,"children":1006},{"style":331},[1007],{"type":20,"value":691},{"type":14,"tag":307,"props":1009,"children":1010},{"class":309,"line":694},[1011],{"type":14,"tag":307,"props":1012,"children":1013},{"emptyLinePlaceholder":732},[1014],{"type":20,"value":735},{"type":14,"tag":307,"props":1016,"children":1017},{"class":309,"line":719},[1018,1023,1027,1031,1036,1041],{"type":14,"tag":307,"props":1019,"children":1020},{"style":512},[1021],{"type":20,"value":1022},"        Context",{"type":14,"tag":307,"props":1024,"children":1025},{"style":331},[1026],{"type":20,"value":295},{"type":14,"tag":307,"props":1028,"children":1029},{"style":646},[1030],{"type":20,"value":165},{"type":14,"tag":307,"props":1032,"children":1033},{"style":331},[1034],{"type":20,"value":1035},"(",{"type":14,"tag":307,"props":1037,"children":1038},{"style":512},[1039],{"type":20,"value":1040},"build",{"type":14,"tag":307,"props":1042,"children":1043},{"style":331},[1044],{"type":20,"value":1045},");\n",{"type":14,"tag":307,"props":1047,"children":1048},{"class":309,"line":728},[1049],{"type":14,"tag":307,"props":1050,"children":1051},{"style":331},[1052],{"type":20,"value":725},{"type":14,"tag":307,"props":1054,"children":1055},{"class":309,"line":738},[1056],{"type":14,"tag":307,"props":1057,"children":1058},{"style":331},[1059],{"type":20,"value":366},{"type":14,"tag":368,"props":1061,"children":1062},{},[1063,1070],{"type":14,"tag":22,"props":1064,"children":1065},{},[1066],{"type":14,"tag":307,"props":1067,"children":1068},{},[1069],{"type":20,"value":378},{"type":14,"tag":22,"props":1071,"children":1072},{},[1073,1074,1079],{"type":20,"value":383},{"type":14,"tag":28,"props":1075,"children":1077},{"className":1076},[],[1078],{"type":20,"value":638},{"type":20,"value":1080},", however we've created\nsome base classes to make it easier for you to create phases. All examples\ndemonstrate usage of these base classes.",{"type":14,"tag":392,"props":1082,"children":1084},{"id":1083},"readiness-via-dependencies",[1085],{"type":20,"value":1086},"Readiness via Dependencies",{"type":14,"tag":22,"props":1088,"children":1089},{},[1090,1092,1098,1100,1105,1107,1112],{"type":20,"value":1091},"You can define context dependencies via generic ",{"type":14,"tag":28,"props":1093,"children":1095},{"className":1094},[],[1096],{"type":20,"value":1097},"PhaseBase\u003C>",{"type":20,"value":1099}," classes to make\nthe phase wait until context is ready to provide that dependency. For example,\n",{"type":14,"tag":28,"props":1101,"children":1103},{"className":1102},[],[1104],{"type":20,"value":254},{"type":20,"value":1106}," depends on the ",{"type":14,"tag":28,"props":1108,"children":1110},{"className":1109},[],[1111],{"type":20,"value":899},{"type":20,"value":1113}," instance as shown below;",{"type":14,"tag":297,"props":1115,"children":1117},{"className":299,"code":1116,"language":301,"meta":7,"style":7},"public class Build : PhaseBase\u003CWebApplicationBuilder>\n{\n    protected override void Initialize(WebApplicationBuilder build)\n    {\n        var app = build.Build();\n\n        Context.Add(app);\n    }\n}\n",[1118],{"type":14,"tag":28,"props":1119,"children":1120},{"__ignoreMap":7},[1121,1158,1165,1201,1208,1240,1247,1275,1282],{"type":14,"tag":307,"props":1122,"children":1123},{"class":309,"line":310},[1124,1128,1132,1137,1141,1145,1149,1153],{"type":14,"tag":307,"props":1125,"children":1126},{"style":314},[1127],{"type":20,"value":317},{"type":14,"tag":307,"props":1129,"children":1130},{"style":314},[1131],{"type":20,"value":322},{"type":14,"tag":307,"props":1133,"children":1134},{"style":325},[1135],{"type":20,"value":1136}," Build",{"type":14,"tag":307,"props":1138,"children":1139},{"style":331},[1140],{"type":20,"value":334},{"type":14,"tag":307,"props":1142,"children":1143},{"style":325},[1144],{"type":20,"value":761},{"type":14,"tag":307,"props":1146,"children":1147},{"style":331},[1148],{"type":20,"value":633},{"type":14,"tag":307,"props":1150,"children":1151},{"style":325},[1152],{"type":20,"value":899},{"type":14,"tag":307,"props":1154,"children":1155},{"style":331},[1156],{"type":20,"value":1157},">\n",{"type":14,"tag":307,"props":1159,"children":1160},{"class":309,"line":342},[1161],{"type":14,"tag":307,"props":1162,"children":1163},{"style":331},[1164],{"type":20,"value":348},{"type":14,"tag":307,"props":1166,"children":1167},{"class":309,"line":351},[1168,1172,1176,1180,1184,1188,1192,1196],{"type":14,"tag":307,"props":1169,"children":1170},{"style":314},[1171],{"type":20,"value":499},{"type":14,"tag":307,"props":1173,"children":1174},{"style":314},[1175],{"type":20,"value":504},{"type":14,"tag":307,"props":1177,"children":1178},{"style":314},[1179],{"type":20,"value":956},{"type":14,"tag":307,"props":1181,"children":1182},{"style":646},[1183],{"type":20,"value":961},{"type":14,"tag":307,"props":1185,"children":1186},{"style":331},[1187],{"type":20,"value":1035},{"type":14,"tag":307,"props":1189,"children":1190},{"style":325},[1191],{"type":20,"value":899},{"type":14,"tag":307,"props":1193,"children":1194},{"style":512},[1195],{"type":20,"value":985},{"type":14,"tag":307,"props":1197,"children":1198},{"style":331},[1199],{"type":20,"value":1200},")\n",{"type":14,"tag":307,"props":1202,"children":1203},{"class":309,"line":360},[1204],{"type":14,"tag":307,"props":1205,"children":1206},{"style":331},[1207],{"type":20,"value":662},{"type":14,"tag":307,"props":1209,"children":1210},{"class":309,"line":543},[1211,1215,1220,1224,1228,1232,1236],{"type":14,"tag":307,"props":1212,"children":1213},{"style":314},[1214],{"type":20,"value":980},{"type":14,"tag":307,"props":1216,"children":1217},{"style":512},[1218],{"type":20,"value":1219}," app",{"type":14,"tag":307,"props":1221,"children":1222},{"style":518},[1223],{"type":20,"value":990},{"type":14,"tag":307,"props":1225,"children":1226},{"style":512},[1227],{"type":20,"value":985},{"type":14,"tag":307,"props":1229,"children":1230},{"style":331},[1231],{"type":20,"value":295},{"type":14,"tag":307,"props":1233,"children":1234},{"style":646},[1235],{"type":20,"value":254},{"type":14,"tag":307,"props":1237,"children":1238},{"style":331},[1239],{"type":20,"value":691},{"type":14,"tag":307,"props":1241,"children":1242},{"class":309,"line":694},[1243],{"type":14,"tag":307,"props":1244,"children":1245},{"emptyLinePlaceholder":732},[1246],{"type":20,"value":735},{"type":14,"tag":307,"props":1248,"children":1249},{"class":309,"line":719},[1250,1254,1258,1262,1266,1271],{"type":14,"tag":307,"props":1251,"children":1252},{"style":512},[1253],{"type":20,"value":1022},{"type":14,"tag":307,"props":1255,"children":1256},{"style":331},[1257],{"type":20,"value":295},{"type":14,"tag":307,"props":1259,"children":1260},{"style":646},[1261],{"type":20,"value":165},{"type":14,"tag":307,"props":1263,"children":1264},{"style":331},[1265],{"type":20,"value":1035},{"type":14,"tag":307,"props":1267,"children":1268},{"style":512},[1269],{"type":20,"value":1270},"app",{"type":14,"tag":307,"props":1272,"children":1273},{"style":331},[1274],{"type":20,"value":1045},{"type":14,"tag":307,"props":1276,"children":1277},{"class":309,"line":728},[1278],{"type":14,"tag":307,"props":1279,"children":1280},{"style":331},[1281],{"type":20,"value":725},{"type":14,"tag":307,"props":1283,"children":1284},{"class":309,"line":738},[1285],{"type":14,"tag":307,"props":1286,"children":1287},{"style":331},[1288],{"type":20,"value":366},{"type":14,"tag":22,"props":1290,"children":1291},{},[1292,1298,1300,1306],{"type":14,"tag":28,"props":1293,"children":1295},{"className":1294},[],[1296],{"type":20,"value":1297},"PhaseBase\u003CT>",{"type":20,"value":1299}," class requires ",{"type":14,"tag":28,"props":1301,"children":1303},{"className":1302},[],[1304],{"type":20,"value":1305},"Initialize(T t)",{"type":20,"value":1307}," method to be implemented.",{"type":14,"tag":368,"props":1309,"children":1310},{},[1311,1319],{"type":14,"tag":22,"props":1312,"children":1313},{},[1314],{"type":14,"tag":307,"props":1315,"children":1316},{},[1317],{"type":20,"value":1318},"!NOTE",{"type":14,"tag":22,"props":1320,"children":1321},{},[1322,1324,1330,1332,1338],{"type":20,"value":1323},"You can provide more than one dependency for a phase. E.g., ",{"type":14,"tag":28,"props":1325,"children":1327},{"className":1326},[],[1328],{"type":20,"value":1329},"Phase\u003CX, Y>",{"type":20,"value":1331},"\nwill require ",{"type":14,"tag":28,"props":1333,"children":1335},{"className":1334},[],[1336],{"type":20,"value":1337},"Initialize(X x, Y y)",{"type":20,"value":1307},{"type":14,"tag":368,"props":1340,"children":1341},{},[1342,1350],{"type":14,"tag":22,"props":1343,"children":1344},{},[1345],{"type":14,"tag":307,"props":1346,"children":1347},{},[1348],{"type":20,"value":1349},"!WARNING",{"type":14,"tag":22,"props":1351,"children":1352},{},[1353,1355,1360,1362],{"type":20,"value":1354},"Type of the dependency provided, must be exactly the same as the type of\ndependency in ",{"type":14,"tag":28,"props":1356,"children":1358},{"className":1357},[],[1359],{"type":20,"value":198},{"type":20,"value":1361},". For more information\n",{"type":14,"tag":63,"props":1363,"children":1365},{"href":1364},"../architecture/application#running-an-application",[1366],{"type":20,"value":1367},"Running an Application",{"type":14,"tag":22,"props":1369,"children":1370},{},[1371,1373,1379,1381,1387,1389,1395],{"type":20,"value":1372},"Phases can also define context dependencies from other phase artifacts. For\nexample ",{"type":14,"tag":28,"props":1374,"children":1376},{"className":1375},[],[1377],{"type":20,"value":1378},"HttpServerLayer.Build",{"type":20,"value":1380}," phase can require ",{"type":14,"tag":28,"props":1382,"children":1384},{"className":1383},[],[1385],{"type":20,"value":1386},"IServiceCollection",{"type":20,"value":1388}," which\nwill be provided during ",{"type":14,"tag":28,"props":1390,"children":1392},{"className":1391},[],[1393],{"type":20,"value":1394},"DependencyInjectionLayer.AddServices",{"type":20,"value":1396}," phase.",{"type":14,"tag":297,"props":1398,"children":1400},{"className":299,"code":1399,"language":301,"meta":7,"style":7},"// DependencyInjectionLayer\npublic class AddServices(IServiceCollection _services)\n    : PhaseBase(PhaseOrder.Early)\n{\n    protected override void Initialize()\n    {\n        Context.Add(_services);\n    }\n}\n\n// HttpServerLayer\npublic class Build()\n    : PhaseBase\u003CWebApplicationBuilder, IServiceCollection>(PhaseOrder.Latest)\n{\n    protected override void Initialize(WebApplicationBuilder build, IServiceCollection services)\n    {\n        ...\n    }\n}\n",[1401],{"type":14,"tag":28,"props":1402,"children":1403},{"__ignoreMap":7},[1404,1413,1446,1480,1487,1510,1517,1545,1552,1559,1566,1574,1594,1644,1652,1701,1709,1722,1730],{"type":14,"tag":307,"props":1405,"children":1406},{"class":309,"line":310},[1407],{"type":14,"tag":307,"props":1408,"children":1410},{"style":1409},"--shiki-default:#6A9955",[1411],{"type":20,"value":1412},"// DependencyInjectionLayer\n",{"type":14,"tag":307,"props":1414,"children":1415},{"class":309,"line":342},[1416,1420,1424,1429,1433,1437,1442],{"type":14,"tag":307,"props":1417,"children":1418},{"style":314},[1419],{"type":20,"value":317},{"type":14,"tag":307,"props":1421,"children":1422},{"style":314},[1423],{"type":20,"value":322},{"type":14,"tag":307,"props":1425,"children":1426},{"style":325},[1427],{"type":20,"value":1428}," AddServices",{"type":14,"tag":307,"props":1430,"children":1431},{"style":331},[1432],{"type":20,"value":1035},{"type":14,"tag":307,"props":1434,"children":1435},{"style":325},[1436],{"type":20,"value":1386},{"type":14,"tag":307,"props":1438,"children":1439},{"style":512},[1440],{"type":20,"value":1441}," _services",{"type":14,"tag":307,"props":1443,"children":1444},{"style":331},[1445],{"type":20,"value":1200},{"type":14,"tag":307,"props":1447,"children":1448},{"class":309,"line":351},[1449,1454,1458,1462,1467,1471,1476],{"type":14,"tag":307,"props":1450,"children":1451},{"style":331},[1452],{"type":20,"value":1453},"    : ",{"type":14,"tag":307,"props":1455,"children":1456},{"style":325},[1457],{"type":20,"value":761},{"type":14,"tag":307,"props":1459,"children":1460},{"style":331},[1461],{"type":20,"value":1035},{"type":14,"tag":307,"props":1463,"children":1464},{"style":325},[1465],{"type":20,"value":1466},"PhaseOrder",{"type":14,"tag":307,"props":1468,"children":1469},{"style":331},[1470],{"type":20,"value":295},{"type":14,"tag":307,"props":1472,"children":1473},{"style":325},[1474],{"type":20,"value":1475},"Early",{"type":14,"tag":307,"props":1477,"children":1478},{"style":331},[1479],{"type":20,"value":1200},{"type":14,"tag":307,"props":1481,"children":1482},{"class":309,"line":360},[1483],{"type":14,"tag":307,"props":1484,"children":1485},{"style":331},[1486],{"type":20,"value":348},{"type":14,"tag":307,"props":1488,"children":1489},{"class":309,"line":543},[1490,1494,1498,1502,1506],{"type":14,"tag":307,"props":1491,"children":1492},{"style":314},[1493],{"type":20,"value":499},{"type":14,"tag":307,"props":1495,"children":1496},{"style":314},[1497],{"type":20,"value":504},{"type":14,"tag":307,"props":1499,"children":1500},{"style":314},[1501],{"type":20,"value":956},{"type":14,"tag":307,"props":1503,"children":1504},{"style":646},[1505],{"type":20,"value":961},{"type":14,"tag":307,"props":1507,"children":1508},{"style":331},[1509],{"type":20,"value":654},{"type":14,"tag":307,"props":1511,"children":1512},{"class":309,"line":694},[1513],{"type":14,"tag":307,"props":1514,"children":1515},{"style":331},[1516],{"type":20,"value":662},{"type":14,"tag":307,"props":1518,"children":1519},{"class":309,"line":719},[1520,1524,1528,1532,1536,1541],{"type":14,"tag":307,"props":1521,"children":1522},{"style":512},[1523],{"type":20,"value":1022},{"type":14,"tag":307,"props":1525,"children":1526},{"style":331},[1527],{"type":20,"value":295},{"type":14,"tag":307,"props":1529,"children":1530},{"style":646},[1531],{"type":20,"value":165},{"type":14,"tag":307,"props":1533,"children":1534},{"style":331},[1535],{"type":20,"value":1035},{"type":14,"tag":307,"props":1537,"children":1538},{"style":512},[1539],{"type":20,"value":1540},"_services",{"type":14,"tag":307,"props":1542,"children":1543},{"style":331},[1544],{"type":20,"value":1045},{"type":14,"tag":307,"props":1546,"children":1547},{"class":309,"line":728},[1548],{"type":14,"tag":307,"props":1549,"children":1550},{"style":331},[1551],{"type":20,"value":725},{"type":14,"tag":307,"props":1553,"children":1554},{"class":309,"line":738},[1555],{"type":14,"tag":307,"props":1556,"children":1557},{"style":331},[1558],{"type":20,"value":366},{"type":14,"tag":307,"props":1560,"children":1561},{"class":309,"line":769},[1562],{"type":14,"tag":307,"props":1563,"children":1564},{"emptyLinePlaceholder":732},[1565],{"type":20,"value":735},{"type":14,"tag":307,"props":1567,"children":1568},{"class":309,"line":797},[1569],{"type":14,"tag":307,"props":1570,"children":1571},{"style":1409},[1572],{"type":20,"value":1573},"// HttpServerLayer\n",{"type":14,"tag":307,"props":1575,"children":1577},{"class":309,"line":1576},12,[1578,1582,1586,1590],{"type":14,"tag":307,"props":1579,"children":1580},{"style":314},[1581],{"type":20,"value":317},{"type":14,"tag":307,"props":1583,"children":1584},{"style":314},[1585],{"type":20,"value":322},{"type":14,"tag":307,"props":1587,"children":1588},{"style":325},[1589],{"type":20,"value":1136},{"type":14,"tag":307,"props":1591,"children":1592},{"style":331},[1593],{"type":20,"value":654},{"type":14,"tag":307,"props":1595,"children":1597},{"class":309,"line":1596},13,[1598,1602,1606,1610,1614,1618,1622,1627,1631,1635,1640],{"type":14,"tag":307,"props":1599,"children":1600},{"style":331},[1601],{"type":20,"value":1453},{"type":14,"tag":307,"props":1603,"children":1604},{"style":325},[1605],{"type":20,"value":761},{"type":14,"tag":307,"props":1607,"children":1608},{"style":331},[1609],{"type":20,"value":633},{"type":14,"tag":307,"props":1611,"children":1612},{"style":325},[1613],{"type":20,"value":899},{"type":14,"tag":307,"props":1615,"children":1616},{"style":331},[1617],{"type":20,"value":208},{"type":14,"tag":307,"props":1619,"children":1620},{"style":325},[1621],{"type":20,"value":1386},{"type":14,"tag":307,"props":1623,"children":1624},{"style":331},[1625],{"type":20,"value":1626},">(",{"type":14,"tag":307,"props":1628,"children":1629},{"style":325},[1630],{"type":20,"value":1466},{"type":14,"tag":307,"props":1632,"children":1633},{"style":331},[1634],{"type":20,"value":295},{"type":14,"tag":307,"props":1636,"children":1637},{"style":325},[1638],{"type":20,"value":1639},"Latest",{"type":14,"tag":307,"props":1641,"children":1642},{"style":331},[1643],{"type":20,"value":1200},{"type":14,"tag":307,"props":1645,"children":1647},{"class":309,"line":1646},14,[1648],{"type":14,"tag":307,"props":1649,"children":1650},{"style":331},[1651],{"type":20,"value":348},{"type":14,"tag":307,"props":1653,"children":1655},{"class":309,"line":1654},15,[1656,1660,1664,1668,1672,1676,1680,1684,1688,1692,1697],{"type":14,"tag":307,"props":1657,"children":1658},{"style":314},[1659],{"type":20,"value":499},{"type":14,"tag":307,"props":1661,"children":1662},{"style":314},[1663],{"type":20,"value":504},{"type":14,"tag":307,"props":1665,"children":1666},{"style":314},[1667],{"type":20,"value":956},{"type":14,"tag":307,"props":1669,"children":1670},{"style":646},[1671],{"type":20,"value":961},{"type":14,"tag":307,"props":1673,"children":1674},{"style":331},[1675],{"type":20,"value":1035},{"type":14,"tag":307,"props":1677,"children":1678},{"style":325},[1679],{"type":20,"value":899},{"type":14,"tag":307,"props":1681,"children":1682},{"style":512},[1683],{"type":20,"value":985},{"type":14,"tag":307,"props":1685,"children":1686},{"style":331},[1687],{"type":20,"value":208},{"type":14,"tag":307,"props":1689,"children":1690},{"style":325},[1691],{"type":20,"value":1386},{"type":14,"tag":307,"props":1693,"children":1694},{"style":512},[1695],{"type":20,"value":1696}," services",{"type":14,"tag":307,"props":1698,"children":1699},{"style":331},[1700],{"type":20,"value":1200},{"type":14,"tag":307,"props":1702,"children":1704},{"class":309,"line":1703},16,[1705],{"type":14,"tag":307,"props":1706,"children":1707},{"style":331},[1708],{"type":20,"value":662},{"type":14,"tag":307,"props":1710,"children":1712},{"class":309,"line":1711},17,[1713,1718],{"type":14,"tag":307,"props":1714,"children":1715},{"style":518},[1716],{"type":20,"value":1717},"        ..",{"type":14,"tag":307,"props":1719,"children":1720},{"style":331},[1721],{"type":20,"value":540},{"type":14,"tag":307,"props":1723,"children":1725},{"class":309,"line":1724},18,[1726],{"type":14,"tag":307,"props":1727,"children":1728},{"style":331},[1729],{"type":20,"value":725},{"type":14,"tag":307,"props":1731,"children":1733},{"class":309,"line":1732},19,[1734],{"type":14,"tag":307,"props":1735,"children":1736},{"style":331},[1737],{"type":20,"value":366},{"type":14,"tag":368,"props":1739,"children":1740},{},[1741,1746],{"type":14,"tag":22,"props":1742,"children":1743},{},[1744],{"type":20,"value":1745},"⚠️",{"type":14,"tag":22,"props":1747,"children":1748},{},[1749,1751,1756,1758,1764],{"type":20,"value":1750},"This type of artifact requirement will create a dependency between phases\nwhich results to a layer to layer dependency. In the above example ",{"type":14,"tag":28,"props":1752,"children":1754},{"className":1753},[],[1755],{"type":20,"value":254},{"type":20,"value":1757},"\nphase will never execute unless ",{"type":14,"tag":28,"props":1759,"children":1761},{"className":1760},[],[1762],{"type":20,"value":1763},"DependencyLayer",{"type":20,"value":1765}," is added to the application",{"type":14,"tag":392,"props":1767,"children":1769},{"id":1768},"order-of-a-phase",[1770],{"type":20,"value":1771},"Order of a Phase",{"type":14,"tag":22,"props":1773,"children":1774},{},[1775,1780,1782,1788,1790,1796],{"type":14,"tag":28,"props":1776,"children":1778},{"className":1777},[],[1779],{"type":20,"value":761},{"type":20,"value":1781}," classes has ",{"type":14,"tag":28,"props":1783,"children":1785},{"className":1784},[],[1786],{"type":20,"value":1787},"order",{"type":20,"value":1789}," parameter in their constructors. Default order\nis ",{"type":14,"tag":28,"props":1791,"children":1793},{"className":1792},[],[1794],{"type":20,"value":1795},"PhaseOrder.Normal",{"type":20,"value":1797},". If you need to change the order, pass the desired order\nto this parameter as shown below;",{"type":14,"tag":297,"props":1799,"children":1801},{"className":299,"code":1800,"language":301,"meta":7,"style":7},"public class DoThisEarlyOn()\n    : PhaseBase(PhaseOrder.Early)\n{ }\n",[1802],{"type":14,"tag":28,"props":1803,"children":1804},{"__ignoreMap":7},[1805,1825,1856],{"type":14,"tag":307,"props":1806,"children":1807},{"class":309,"line":310},[1808,1812,1816,1821],{"type":14,"tag":307,"props":1809,"children":1810},{"style":314},[1811],{"type":20,"value":317},{"type":14,"tag":307,"props":1813,"children":1814},{"style":314},[1815],{"type":20,"value":322},{"type":14,"tag":307,"props":1817,"children":1818},{"style":325},[1819],{"type":20,"value":1820}," DoThisEarlyOn",{"type":14,"tag":307,"props":1822,"children":1823},{"style":331},[1824],{"type":20,"value":654},{"type":14,"tag":307,"props":1826,"children":1827},{"class":309,"line":342},[1828,1832,1836,1840,1844,1848,1852],{"type":14,"tag":307,"props":1829,"children":1830},{"style":331},[1831],{"type":20,"value":1453},{"type":14,"tag":307,"props":1833,"children":1834},{"style":325},[1835],{"type":20,"value":761},{"type":14,"tag":307,"props":1837,"children":1838},{"style":331},[1839],{"type":20,"value":1035},{"type":14,"tag":307,"props":1841,"children":1842},{"style":325},[1843],{"type":20,"value":1466},{"type":14,"tag":307,"props":1845,"children":1846},{"style":331},[1847],{"type":20,"value":295},{"type":14,"tag":307,"props":1849,"children":1850},{"style":325},[1851],{"type":20,"value":1475},{"type":14,"tag":307,"props":1853,"children":1854},{"style":331},[1855],{"type":20,"value":1200},{"type":14,"tag":307,"props":1857,"children":1858},{"class":309,"line":351},[1859],{"type":14,"tag":307,"props":1860,"children":1861},{"style":331},[1862],{"type":20,"value":1863},"{ }\n",{"type":14,"tag":88,"props":1865,"children":1867},{"id":1866},"providing-configuration",[1868],{"type":20,"value":1869},"Providing Configuration",{"type":14,"tag":22,"props":1871,"children":1872},{},[1873,1875,1881],{"type":20,"value":1874},"Layers provide configuration objects phase by phase. This means a layer can\nprovide two different configuration objects for two different phases. For this\nreason, a layer returns ",{"type":14,"tag":28,"props":1876,"children":1878},{"className":1877},[],[1879],{"type":20,"value":1880},"PhaseContext",{"type":20,"value":1882}," instance per phase to which it provides\nconfiguration.",{"type":14,"tag":297,"props":1884,"children":1886},{"className":299,"code":1885,"language":301,"meta":7,"style":7},"public class LayerX : LayerBase\u003CAddServices>\n{\n    readonly LayerXConfiguration _configuration = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContext(_configuration);\n}\n",[1887],{"type":14,"tag":28,"props":1888,"children":1889},{"__ignoreMap":7},[1890,1926,1933,1963,1970,2014,2044],{"type":14,"tag":307,"props":1891,"children":1892},{"class":309,"line":310},[1893,1897,1901,1905,1909,1913,1917,1922],{"type":14,"tag":307,"props":1894,"children":1895},{"style":314},[1896],{"type":20,"value":317},{"type":14,"tag":307,"props":1898,"children":1899},{"style":314},[1900],{"type":20,"value":322},{"type":14,"tag":307,"props":1902,"children":1903},{"style":325},[1904],{"type":20,"value":328},{"type":14,"tag":307,"props":1906,"children":1907},{"style":331},[1908],{"type":20,"value":334},{"type":14,"tag":307,"props":1910,"children":1911},{"style":325},[1912],{"type":20,"value":293},{"type":14,"tag":307,"props":1914,"children":1915},{"style":331},[1916],{"type":20,"value":633},{"type":14,"tag":307,"props":1918,"children":1919},{"style":325},[1920],{"type":20,"value":1921},"AddServices",{"type":14,"tag":307,"props":1923,"children":1924},{"style":331},[1925],{"type":20,"value":1157},{"type":14,"tag":307,"props":1927,"children":1928},{"class":309,"line":342},[1929],{"type":14,"tag":307,"props":1930,"children":1931},{"style":331},[1932],{"type":20,"value":348},{"type":14,"tag":307,"props":1934,"children":1935},{"class":309,"line":351},[1936,1941,1946,1951,1955,1959],{"type":14,"tag":307,"props":1937,"children":1938},{"style":314},[1939],{"type":20,"value":1940},"    readonly",{"type":14,"tag":307,"props":1942,"children":1943},{"style":325},[1944],{"type":20,"value":1945}," LayerXConfiguration",{"type":14,"tag":307,"props":1947,"children":1948},{"style":512},[1949],{"type":20,"value":1950}," _configuration",{"type":14,"tag":307,"props":1952,"children":1953},{"style":518},[1954],{"type":20,"value":990},{"type":14,"tag":307,"props":1956,"children":1957},{"style":314},[1958],{"type":20,"value":681},{"type":14,"tag":307,"props":1960,"children":1961},{"style":331},[1962],{"type":20,"value":691},{"type":14,"tag":307,"props":1964,"children":1965},{"class":309,"line":360},[1966],{"type":14,"tag":307,"props":1967,"children":1968},{"emptyLinePlaceholder":732},[1969],{"type":20,"value":735},{"type":14,"tag":307,"props":1971,"children":1972},{"class":309,"line":543},[1973,1977,1981,1986,1991,1995,1999,2004,2009],{"type":14,"tag":307,"props":1974,"children":1975},{"style":314},[1976],{"type":20,"value":499},{"type":14,"tag":307,"props":1978,"children":1979},{"style":314},[1980],{"type":20,"value":504},{"type":14,"tag":307,"props":1982,"children":1983},{"style":325},[1984],{"type":20,"value":1985}," PhaseContext",{"type":14,"tag":307,"props":1987,"children":1988},{"style":646},[1989],{"type":20,"value":1990}," GetContext",{"type":14,"tag":307,"props":1992,"children":1993},{"style":331},[1994],{"type":20,"value":1035},{"type":14,"tag":307,"props":1996,"children":1997},{"style":325},[1998],{"type":20,"value":1921},{"type":14,"tag":307,"props":2000,"children":2001},{"style":512},[2002],{"type":20,"value":2003}," phase",{"type":14,"tag":307,"props":2005,"children":2006},{"style":331},[2007],{"type":20,"value":2008},") ",{"type":14,"tag":307,"props":2010,"children":2011},{"style":518},[2012],{"type":20,"value":2013},"=>\n",{"type":14,"tag":307,"props":2015,"children":2016},{"class":309,"line":694},[2017,2022,2026,2031,2035,2040],{"type":14,"tag":307,"props":2018,"children":2019},{"style":512},[2020],{"type":20,"value":2021},"        phase",{"type":14,"tag":307,"props":2023,"children":2024},{"style":331},[2025],{"type":20,"value":295},{"type":14,"tag":307,"props":2027,"children":2028},{"style":646},[2029],{"type":20,"value":2030},"CreateContext",{"type":14,"tag":307,"props":2032,"children":2033},{"style":331},[2034],{"type":20,"value":1035},{"type":14,"tag":307,"props":2036,"children":2037},{"style":512},[2038],{"type":20,"value":2039},"_configuration",{"type":14,"tag":307,"props":2041,"children":2042},{"style":331},[2043],{"type":20,"value":1045},{"type":14,"tag":307,"props":2045,"children":2046},{"class":309,"line":719},[2047],{"type":14,"tag":307,"props":2048,"children":2049},{"style":331},[2050],{"type":20,"value":366},{"type":14,"tag":22,"props":2052,"children":2053},{},[2054,2056,2061,2063,2069,2071,2076],{"type":20,"value":2055},"In this example, you see a layer named ",{"type":14,"tag":28,"props":2057,"children":2059},{"className":2058},[],[2060],{"type":20,"value":447},{"type":20,"value":2062}," providing a\n",{"type":14,"tag":28,"props":2064,"children":2066},{"className":2065},[],[2067],{"type":20,"value":2068},"LayerXConfiguration",{"type":20,"value":2070}," instance during ",{"type":14,"tag":28,"props":2072,"children":2074},{"className":2073},[],[2075],{"type":20,"value":1921},{"type":20,"value":1396},{"type":14,"tag":368,"props":2078,"children":2079},{},[2080,2087],{"type":14,"tag":22,"props":2081,"children":2082},{},[2083],{"type":14,"tag":307,"props":2084,"children":2085},{},[2086],{"type":20,"value":1318},{"type":14,"tag":22,"props":2088,"children":2089},{},[2090,2092,2098,2100,2105],{"type":20,"value":2091},"By default, a layer returns ",{"type":14,"tag":28,"props":2093,"children":2095},{"className":2094},[],[2096],{"type":20,"value":2097},"PhaseContext.Empty",{"type":20,"value":2099}," instance for the phases it\ndoes not provide a configuration. This means ",{"type":14,"tag":28,"props":2101,"children":2103},{"className":2102},[],[2104],{"type":20,"value":68},{"type":20,"value":2106}," skips that layer\nfor the phases it doesn't have anything to configure.",{"type":14,"tag":392,"props":2108,"children":2110},{"id":2109},"using-non-generic-layerbase",[2111,2113],{"type":20,"value":2112},"Using non-generic ",{"type":14,"tag":28,"props":2114,"children":2116},{"className":2115},[],[2117],{"type":20,"value":293},{"type":14,"tag":22,"props":2119,"children":2120},{},[2121,2127,2129,2134,2136,2142],{"type":14,"tag":28,"props":2122,"children":2124},{"className":2123},[],[2125],{"type":20,"value":2126},"LayerBase\u003C>",{"type":20,"value":2128}," classes allow up to three generic arguments. If you need to\nimplement a layer that has things to configure during more than three phases,\nuse non-generic ",{"type":14,"tag":28,"props":2130,"children":2132},{"className":2131},[],[2133],{"type":20,"value":293},{"type":20,"value":2135}," class, override ",{"type":14,"tag":28,"props":2137,"children":2139},{"className":2138},[],[2140],{"type":20,"value":2141},"GetContext(IPhase phase)",{"type":20,"value":2143}," method\nand switch given phase according to its type;",{"type":14,"tag":297,"props":2145,"children":2147},{"className":299,"code":2146,"language":301,"meta":7,"style":7},"public class MyLayer : LayerBase\n{\n    protected override PhaseContext GetContext(IPhase phase) =>\n        phase switch\n        {\n            PhaseA => phase.CreateContext(...),\n            PhaseB => phase.CreateContext(...),\n            _ => base.GetContext(phase)\n        };\n}\n",[2148],{"type":14,"tag":28,"props":2149,"children":2150},{"__ignoreMap":7},[2151,2175,2182,2221,2233,2241,2279,2315,2354,2362],{"type":14,"tag":307,"props":2152,"children":2153},{"class":309,"line":310},[2154,2158,2162,2167,2171],{"type":14,"tag":307,"props":2155,"children":2156},{"style":314},[2157],{"type":20,"value":317},{"type":14,"tag":307,"props":2159,"children":2160},{"style":314},[2161],{"type":20,"value":322},{"type":14,"tag":307,"props":2163,"children":2164},{"style":325},[2165],{"type":20,"value":2166}," MyLayer",{"type":14,"tag":307,"props":2168,"children":2169},{"style":331},[2170],{"type":20,"value":334},{"type":14,"tag":307,"props":2172,"children":2173},{"style":325},[2174],{"type":20,"value":339},{"type":14,"tag":307,"props":2176,"children":2177},{"class":309,"line":342},[2178],{"type":14,"tag":307,"props":2179,"children":2180},{"style":331},[2181],{"type":20,"value":348},{"type":14,"tag":307,"props":2183,"children":2184},{"class":309,"line":351},[2185,2189,2193,2197,2201,2205,2209,2213,2217],{"type":14,"tag":307,"props":2186,"children":2187},{"style":314},[2188],{"type":20,"value":499},{"type":14,"tag":307,"props":2190,"children":2191},{"style":314},[2192],{"type":20,"value":504},{"type":14,"tag":307,"props":2194,"children":2195},{"style":325},[2196],{"type":20,"value":1985},{"type":14,"tag":307,"props":2198,"children":2199},{"style":646},[2200],{"type":20,"value":1990},{"type":14,"tag":307,"props":2202,"children":2203},{"style":331},[2204],{"type":20,"value":1035},{"type":14,"tag":307,"props":2206,"children":2207},{"style":325},[2208],{"type":20,"value":638},{"type":14,"tag":307,"props":2210,"children":2211},{"style":512},[2212],{"type":20,"value":2003},{"type":14,"tag":307,"props":2214,"children":2215},{"style":331},[2216],{"type":20,"value":2008},{"type":14,"tag":307,"props":2218,"children":2219},{"style":518},[2220],{"type":20,"value":2013},{"type":14,"tag":307,"props":2222,"children":2223},{"class":309,"line":360},[2224,2228],{"type":14,"tag":307,"props":2225,"children":2226},{"style":512},[2227],{"type":20,"value":2021},{"type":14,"tag":307,"props":2229,"children":2230},{"style":668},[2231],{"type":20,"value":2232}," switch\n",{"type":14,"tag":307,"props":2234,"children":2235},{"class":309,"line":543},[2236],{"type":14,"tag":307,"props":2237,"children":2238},{"style":331},[2239],{"type":20,"value":2240},"        {\n",{"type":14,"tag":307,"props":2242,"children":2243},{"class":309,"line":694},[2244,2249,2253,2257,2261,2265,2269,2274],{"type":14,"tag":307,"props":2245,"children":2246},{"style":325},[2247],{"type":20,"value":2248},"            PhaseA",{"type":14,"tag":307,"props":2250,"children":2251},{"style":518},[2252],{"type":20,"value":521},{"type":14,"tag":307,"props":2254,"children":2255},{"style":512},[2256],{"type":20,"value":2003},{"type":14,"tag":307,"props":2258,"children":2259},{"style":331},[2260],{"type":20,"value":295},{"type":14,"tag":307,"props":2262,"children":2263},{"style":646},[2264],{"type":20,"value":2030},{"type":14,"tag":307,"props":2266,"children":2267},{"style":331},[2268],{"type":20,"value":1035},{"type":14,"tag":307,"props":2270,"children":2271},{"style":518},[2272],{"type":20,"value":2273},"..",{"type":14,"tag":307,"props":2275,"children":2276},{"style":331},[2277],{"type":20,"value":2278},".),\n",{"type":14,"tag":307,"props":2280,"children":2281},{"class":309,"line":719},[2282,2287,2291,2295,2299,2303,2307,2311],{"type":14,"tag":307,"props":2283,"children":2284},{"style":325},[2285],{"type":20,"value":2286},"            PhaseB",{"type":14,"tag":307,"props":2288,"children":2289},{"style":518},[2290],{"type":20,"value":521},{"type":14,"tag":307,"props":2292,"children":2293},{"style":512},[2294],{"type":20,"value":2003},{"type":14,"tag":307,"props":2296,"children":2297},{"style":331},[2298],{"type":20,"value":295},{"type":14,"tag":307,"props":2300,"children":2301},{"style":646},[2302],{"type":20,"value":2030},{"type":14,"tag":307,"props":2304,"children":2305},{"style":331},[2306],{"type":20,"value":1035},{"type":14,"tag":307,"props":2308,"children":2309},{"style":518},[2310],{"type":20,"value":2273},{"type":14,"tag":307,"props":2312,"children":2313},{"style":331},[2314],{"type":20,"value":2278},{"type":14,"tag":307,"props":2316,"children":2317},{"class":309,"line":728},[2318,2323,2327,2332,2336,2341,2345,2350],{"type":14,"tag":307,"props":2319,"children":2320},{"style":314},[2321],{"type":20,"value":2322},"            _",{"type":14,"tag":307,"props":2324,"children":2325},{"style":518},[2326],{"type":20,"value":521},{"type":14,"tag":307,"props":2328,"children":2329},{"style":314},[2330],{"type":20,"value":2331}," base",{"type":14,"tag":307,"props":2333,"children":2334},{"style":331},[2335],{"type":20,"value":295},{"type":14,"tag":307,"props":2337,"children":2338},{"style":646},[2339],{"type":20,"value":2340},"GetContext",{"type":14,"tag":307,"props":2342,"children":2343},{"style":331},[2344],{"type":20,"value":1035},{"type":14,"tag":307,"props":2346,"children":2347},{"style":512},[2348],{"type":20,"value":2349},"phase",{"type":14,"tag":307,"props":2351,"children":2352},{"style":331},[2353],{"type":20,"value":1200},{"type":14,"tag":307,"props":2355,"children":2356},{"class":309,"line":738},[2357],{"type":14,"tag":307,"props":2358,"children":2359},{"style":331},[2360],{"type":20,"value":2361},"        };\n",{"type":14,"tag":307,"props":2363,"children":2364},{"class":309,"line":769},[2365],{"type":14,"tag":307,"props":2366,"children":2367},{"style":331},[2368],{"type":20,"value":366},{"type":14,"tag":392,"props":2370,"children":2372},{"id":2371},"before-and-after-a-phase",[2373],{"type":20,"value":2374},"Before and After a Phase",{"type":14,"tag":22,"props":2376,"children":2377},{},[2378,2380,2386,2388,2394],{"type":20,"value":2379},"Layers might need to do some standard stuff before and after a phase is applied\nto all features for all layers. Use ",{"type":14,"tag":28,"props":2381,"children":2383},{"className":2382},[],[2384],{"type":20,"value":2385},"GetContext()",{"type":20,"value":2387}," method to do stuff before,\nand ",{"type":14,"tag":28,"props":2389,"children":2391},{"className":2390},[],[2392],{"type":20,"value":2393},"onDispose:",{"type":20,"value":2395}," delegate to do stuff after.",{"type":14,"tag":297,"props":2397,"children":2399},{"className":299,"code":2398,"language":301,"meta":7,"style":7},"public class LayerX : LayerBase\u003CAddServices>\n{\n    readonly LayerXConfiguration _configuration = new();\n\n    protected override PhaseContext GetContext(AddServices phase)\n    {\n        var services = Context.Get\u003CIServiceCollection>();\n\n        services.AddStandardStuffBefore();\n\n        phase.CreateContext(_configuration,\n            onDispose: () => services.AddStandardStuffAfter()\n        );\n    }\n}\n",[2400],{"type":14,"tag":28,"props":2401,"children":2402},{"__ignoreMap":7},[2403,2438,2445,2472,2479,2514,2521,2562,2569,2590,2597,2625,2660,2668,2675],{"type":14,"tag":307,"props":2404,"children":2405},{"class":309,"line":310},[2406,2410,2414,2418,2422,2426,2430,2434],{"type":14,"tag":307,"props":2407,"children":2408},{"style":314},[2409],{"type":20,"value":317},{"type":14,"tag":307,"props":2411,"children":2412},{"style":314},[2413],{"type":20,"value":322},{"type":14,"tag":307,"props":2415,"children":2416},{"style":325},[2417],{"type":20,"value":328},{"type":14,"tag":307,"props":2419,"children":2420},{"style":331},[2421],{"type":20,"value":334},{"type":14,"tag":307,"props":2423,"children":2424},{"style":325},[2425],{"type":20,"value":293},{"type":14,"tag":307,"props":2427,"children":2428},{"style":331},[2429],{"type":20,"value":633},{"type":14,"tag":307,"props":2431,"children":2432},{"style":325},[2433],{"type":20,"value":1921},{"type":14,"tag":307,"props":2435,"children":2436},{"style":331},[2437],{"type":20,"value":1157},{"type":14,"tag":307,"props":2439,"children":2440},{"class":309,"line":342},[2441],{"type":14,"tag":307,"props":2442,"children":2443},{"style":331},[2444],{"type":20,"value":348},{"type":14,"tag":307,"props":2446,"children":2447},{"class":309,"line":351},[2448,2452,2456,2460,2464,2468],{"type":14,"tag":307,"props":2449,"children":2450},{"style":314},[2451],{"type":20,"value":1940},{"type":14,"tag":307,"props":2453,"children":2454},{"style":325},[2455],{"type":20,"value":1945},{"type":14,"tag":307,"props":2457,"children":2458},{"style":512},[2459],{"type":20,"value":1950},{"type":14,"tag":307,"props":2461,"children":2462},{"style":518},[2463],{"type":20,"value":990},{"type":14,"tag":307,"props":2465,"children":2466},{"style":314},[2467],{"type":20,"value":681},{"type":14,"tag":307,"props":2469,"children":2470},{"style":331},[2471],{"type":20,"value":691},{"type":14,"tag":307,"props":2473,"children":2474},{"class":309,"line":360},[2475],{"type":14,"tag":307,"props":2476,"children":2477},{"emptyLinePlaceholder":732},[2478],{"type":20,"value":735},{"type":14,"tag":307,"props":2480,"children":2481},{"class":309,"line":543},[2482,2486,2490,2494,2498,2502,2506,2510],{"type":14,"tag":307,"props":2483,"children":2484},{"style":314},[2485],{"type":20,"value":499},{"type":14,"tag":307,"props":2487,"children":2488},{"style":314},[2489],{"type":20,"value":504},{"type":14,"tag":307,"props":2491,"children":2492},{"style":325},[2493],{"type":20,"value":1985},{"type":14,"tag":307,"props":2495,"children":2496},{"style":646},[2497],{"type":20,"value":1990},{"type":14,"tag":307,"props":2499,"children":2500},{"style":331},[2501],{"type":20,"value":1035},{"type":14,"tag":307,"props":2503,"children":2504},{"style":325},[2505],{"type":20,"value":1921},{"type":14,"tag":307,"props":2507,"children":2508},{"style":512},[2509],{"type":20,"value":2003},{"type":14,"tag":307,"props":2511,"children":2512},{"style":331},[2513],{"type":20,"value":1200},{"type":14,"tag":307,"props":2515,"children":2516},{"class":309,"line":694},[2517],{"type":14,"tag":307,"props":2518,"children":2519},{"style":331},[2520],{"type":20,"value":662},{"type":14,"tag":307,"props":2522,"children":2523},{"class":309,"line":719},[2524,2528,2532,2536,2541,2545,2549,2553,2557],{"type":14,"tag":307,"props":2525,"children":2526},{"style":314},[2527],{"type":20,"value":980},{"type":14,"tag":307,"props":2529,"children":2530},{"style":512},[2531],{"type":20,"value":1696},{"type":14,"tag":307,"props":2533,"children":2534},{"style":518},[2535],{"type":20,"value":990},{"type":14,"tag":307,"props":2537,"children":2538},{"style":512},[2539],{"type":20,"value":2540}," Context",{"type":14,"tag":307,"props":2542,"children":2543},{"style":331},[2544],{"type":20,"value":295},{"type":14,"tag":307,"props":2546,"children":2547},{"style":646},[2548],{"type":20,"value":190},{"type":14,"tag":307,"props":2550,"children":2551},{"style":331},[2552],{"type":20,"value":633},{"type":14,"tag":307,"props":2554,"children":2555},{"style":325},[2556],{"type":20,"value":1386},{"type":14,"tag":307,"props":2558,"children":2559},{"style":331},[2560],{"type":20,"value":2561},">();\n",{"type":14,"tag":307,"props":2563,"children":2564},{"class":309,"line":728},[2565],{"type":14,"tag":307,"props":2566,"children":2567},{"emptyLinePlaceholder":732},[2568],{"type":20,"value":735},{"type":14,"tag":307,"props":2570,"children":2571},{"class":309,"line":738},[2572,2577,2581,2586],{"type":14,"tag":307,"props":2573,"children":2574},{"style":512},[2575],{"type":20,"value":2576},"        services",{"type":14,"tag":307,"props":2578,"children":2579},{"style":331},[2580],{"type":20,"value":295},{"type":14,"tag":307,"props":2582,"children":2583},{"style":646},[2584],{"type":20,"value":2585},"AddStandardStuffBefore",{"type":14,"tag":307,"props":2587,"children":2588},{"style":331},[2589],{"type":20,"value":691},{"type":14,"tag":307,"props":2591,"children":2592},{"class":309,"line":769},[2593],{"type":14,"tag":307,"props":2594,"children":2595},{"emptyLinePlaceholder":732},[2596],{"type":20,"value":735},{"type":14,"tag":307,"props":2598,"children":2599},{"class":309,"line":797},[2600,2604,2608,2612,2616,2620],{"type":14,"tag":307,"props":2601,"children":2602},{"style":512},[2603],{"type":20,"value":2021},{"type":14,"tag":307,"props":2605,"children":2606},{"style":331},[2607],{"type":20,"value":295},{"type":14,"tag":307,"props":2609,"children":2610},{"style":646},[2611],{"type":20,"value":2030},{"type":14,"tag":307,"props":2613,"children":2614},{"style":331},[2615],{"type":20,"value":1035},{"type":14,"tag":307,"props":2617,"children":2618},{"style":512},[2619],{"type":20,"value":2039},{"type":14,"tag":307,"props":2621,"children":2622},{"style":331},[2623],{"type":20,"value":2624},",\n",{"type":14,"tag":307,"props":2626,"children":2627},{"class":309,"line":1576},[2628,2633,2638,2643,2647,2651,2656],{"type":14,"tag":307,"props":2629,"children":2630},{"style":512},[2631],{"type":20,"value":2632},"            onDispose",{"type":14,"tag":307,"props":2634,"children":2635},{"style":331},[2636],{"type":20,"value":2637},": () ",{"type":14,"tag":307,"props":2639,"children":2640},{"style":518},[2641],{"type":20,"value":2642},"=>",{"type":14,"tag":307,"props":2644,"children":2645},{"style":512},[2646],{"type":20,"value":1696},{"type":14,"tag":307,"props":2648,"children":2649},{"style":331},[2650],{"type":20,"value":295},{"type":14,"tag":307,"props":2652,"children":2653},{"style":646},[2654],{"type":20,"value":2655},"AddStandardStuffAfter",{"type":14,"tag":307,"props":2657,"children":2658},{"style":331},[2659],{"type":20,"value":654},{"type":14,"tag":307,"props":2661,"children":2662},{"class":309,"line":1596},[2663],{"type":14,"tag":307,"props":2664,"children":2665},{"style":331},[2666],{"type":20,"value":2667},"        );\n",{"type":14,"tag":307,"props":2669,"children":2670},{"class":309,"line":1646},[2671],{"type":14,"tag":307,"props":2672,"children":2673},{"style":331},[2674],{"type":20,"value":725},{"type":14,"tag":307,"props":2676,"children":2677},{"class":309,"line":1654},[2678],{"type":14,"tag":307,"props":2679,"children":2680},{"style":331},[2681],{"type":20,"value":366},{"type":14,"tag":368,"props":2683,"children":2684},{},[2685,2692],{"type":14,"tag":22,"props":2686,"children":2687},{},[2688],{"type":14,"tag":307,"props":2689,"children":2690},{},[2691],{"type":20,"value":1318},{"type":14,"tag":22,"props":2693,"children":2694},{},[2695,2697,2702,2704,2709,2711,2716],{"type":20,"value":2696},"Notice that a layer has access to the ",{"type":14,"tag":28,"props":2698,"children":2700},{"className":2699},[],[2701],{"type":20,"value":198},{"type":20,"value":2703}," instance through\n",{"type":14,"tag":28,"props":2705,"children":2707},{"className":2706},[],[2708],{"type":20,"value":876},{"type":20,"value":2710}," property provided in ",{"type":14,"tag":28,"props":2712,"children":2714},{"className":2713},[],[2715],{"type":20,"value":293},{"type":20,"value":2717}," base class.",{"type":14,"tag":368,"props":2719,"children":2720},{},[2721,2728],{"type":14,"tag":22,"props":2722,"children":2723},{},[2724],{"type":14,"tag":307,"props":2725,"children":2726},{},[2727],{"type":20,"value":1349},{"type":14,"tag":22,"props":2729,"children":2730},{},[2731,2736,2738,2743],{"type":14,"tag":28,"props":2732,"children":2734},{"className":2733},[],[2735],{"type":20,"value":2385},{"type":20,"value":2737}," method is called for every layer before applying any of them\nto features. And ",{"type":14,"tag":28,"props":2739,"children":2741},{"className":2740},[],[2742],{"type":20,"value":2393},{"type":20,"value":2744}," actions are called after applying these\ncontexts to all features.",{"type":14,"tag":392,"props":2746,"children":2748},{"id":2747},"providing-multiple-targets",[2749],{"type":20,"value":2750},"Providing Multiple Targets",{"type":14,"tag":22,"props":2752,"children":2753},{},[2754],{"type":20,"value":2755},"It is possible to provide up to three configuration objects for the same phase.\nThere are two ways of providing multiple targets; at once or one by one.",{"type":14,"tag":2757,"props":2758,"children":2760},"h4",{"id":2759},"at-once",[2761],{"type":20,"value":2762},"At Once",{"type":14,"tag":22,"props":2764,"children":2765},{},[2766],{"type":20,"value":2767},"Below code demonstrates providing two configuration objects at once;",{"type":14,"tag":297,"props":2769,"children":2771},{"className":299,"code":2770,"language":301,"meta":7,"style":7},"public class LayerX : LayerBase\u003CAddServices>\n{\n    readonly Configuration1 _configuration1 = new();\n    readonly Configuration2 _configuration2 = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContext(_configuration1, _configuration2);\n}\n",[2772],{"type":14,"tag":28,"props":2773,"children":2774},{"__ignoreMap":7},[2775,2810,2817,2846,2875,2882,2921,2958],{"type":14,"tag":307,"props":2776,"children":2777},{"class":309,"line":310},[2778,2782,2786,2790,2794,2798,2802,2806],{"type":14,"tag":307,"props":2779,"children":2780},{"style":314},[2781],{"type":20,"value":317},{"type":14,"tag":307,"props":2783,"children":2784},{"style":314},[2785],{"type":20,"value":322},{"type":14,"tag":307,"props":2787,"children":2788},{"style":325},[2789],{"type":20,"value":328},{"type":14,"tag":307,"props":2791,"children":2792},{"style":331},[2793],{"type":20,"value":334},{"type":14,"tag":307,"props":2795,"children":2796},{"style":325},[2797],{"type":20,"value":293},{"type":14,"tag":307,"props":2799,"children":2800},{"style":331},[2801],{"type":20,"value":633},{"type":14,"tag":307,"props":2803,"children":2804},{"style":325},[2805],{"type":20,"value":1921},{"type":14,"tag":307,"props":2807,"children":2808},{"style":331},[2809],{"type":20,"value":1157},{"type":14,"tag":307,"props":2811,"children":2812},{"class":309,"line":342},[2813],{"type":14,"tag":307,"props":2814,"children":2815},{"style":331},[2816],{"type":20,"value":348},{"type":14,"tag":307,"props":2818,"children":2819},{"class":309,"line":351},[2820,2824,2829,2834,2838,2842],{"type":14,"tag":307,"props":2821,"children":2822},{"style":314},[2823],{"type":20,"value":1940},{"type":14,"tag":307,"props":2825,"children":2826},{"style":325},[2827],{"type":20,"value":2828}," Configuration1",{"type":14,"tag":307,"props":2830,"children":2831},{"style":512},[2832],{"type":20,"value":2833}," _configuration1",{"type":14,"tag":307,"props":2835,"children":2836},{"style":518},[2837],{"type":20,"value":990},{"type":14,"tag":307,"props":2839,"children":2840},{"style":314},[2841],{"type":20,"value":681},{"type":14,"tag":307,"props":2843,"children":2844},{"style":331},[2845],{"type":20,"value":691},{"type":14,"tag":307,"props":2847,"children":2848},{"class":309,"line":360},[2849,2853,2858,2863,2867,2871],{"type":14,"tag":307,"props":2850,"children":2851},{"style":314},[2852],{"type":20,"value":1940},{"type":14,"tag":307,"props":2854,"children":2855},{"style":325},[2856],{"type":20,"value":2857}," Configuration2",{"type":14,"tag":307,"props":2859,"children":2860},{"style":512},[2861],{"type":20,"value":2862}," _configuration2",{"type":14,"tag":307,"props":2864,"children":2865},{"style":518},[2866],{"type":20,"value":990},{"type":14,"tag":307,"props":2868,"children":2869},{"style":314},[2870],{"type":20,"value":681},{"type":14,"tag":307,"props":2872,"children":2873},{"style":331},[2874],{"type":20,"value":691},{"type":14,"tag":307,"props":2876,"children":2877},{"class":309,"line":543},[2878],{"type":14,"tag":307,"props":2879,"children":2880},{"emptyLinePlaceholder":732},[2881],{"type":20,"value":735},{"type":14,"tag":307,"props":2883,"children":2884},{"class":309,"line":694},[2885,2889,2893,2897,2901,2905,2909,2913,2917],{"type":14,"tag":307,"props":2886,"children":2887},{"style":314},[2888],{"type":20,"value":499},{"type":14,"tag":307,"props":2890,"children":2891},{"style":314},[2892],{"type":20,"value":504},{"type":14,"tag":307,"props":2894,"children":2895},{"style":325},[2896],{"type":20,"value":1985},{"type":14,"tag":307,"props":2898,"children":2899},{"style":646},[2900],{"type":20,"value":1990},{"type":14,"tag":307,"props":2902,"children":2903},{"style":331},[2904],{"type":20,"value":1035},{"type":14,"tag":307,"props":2906,"children":2907},{"style":325},[2908],{"type":20,"value":1921},{"type":14,"tag":307,"props":2910,"children":2911},{"style":512},[2912],{"type":20,"value":2003},{"type":14,"tag":307,"props":2914,"children":2915},{"style":331},[2916],{"type":20,"value":2008},{"type":14,"tag":307,"props":2918,"children":2919},{"style":518},[2920],{"type":20,"value":2013},{"type":14,"tag":307,"props":2922,"children":2923},{"class":309,"line":719},[2924,2928,2932,2936,2940,2945,2949,2954],{"type":14,"tag":307,"props":2925,"children":2926},{"style":512},[2927],{"type":20,"value":2021},{"type":14,"tag":307,"props":2929,"children":2930},{"style":331},[2931],{"type":20,"value":295},{"type":14,"tag":307,"props":2933,"children":2934},{"style":646},[2935],{"type":20,"value":2030},{"type":14,"tag":307,"props":2937,"children":2938},{"style":331},[2939],{"type":20,"value":1035},{"type":14,"tag":307,"props":2941,"children":2942},{"style":512},[2943],{"type":20,"value":2944},"_configuration1",{"type":14,"tag":307,"props":2946,"children":2947},{"style":331},[2948],{"type":20,"value":208},{"type":14,"tag":307,"props":2950,"children":2951},{"style":512},[2952],{"type":20,"value":2953},"_configuration2",{"type":14,"tag":307,"props":2955,"children":2956},{"style":331},[2957],{"type":20,"value":1045},{"type":14,"tag":307,"props":2959,"children":2960},{"class":309,"line":728},[2961],{"type":14,"tag":307,"props":2962,"children":2963},{"style":331},[2964],{"type":20,"value":366},{"type":14,"tag":22,"props":2966,"children":2967},{},[2968],{"type":20,"value":2969},"This phase context will require an action with two parameter in a feature;",{"type":14,"tag":297,"props":2971,"children":2973},{"className":299,"code":2972,"language":301,"meta":7,"style":7},"...\npublic void Configure(LayerConfigurator configurator)\n{\n    configurator.Configure((Configuration1 configuration1, Configuration2 configuration2) =>\n    {\n        // use both objects to configure\n    });\n}\n...\n",[2974],{"type":14,"tag":28,"props":2975,"children":2976},{"__ignoreMap":7},[2977,2988,3021,3028,3081,3088,3096,3104,3111],{"type":14,"tag":307,"props":2978,"children":2979},{"class":309,"line":310},[2980,2984],{"type":14,"tag":307,"props":2981,"children":2982},{"style":518},[2983],{"type":20,"value":2273},{"type":14,"tag":307,"props":2985,"children":2986},{"style":331},[2987],{"type":20,"value":540},{"type":14,"tag":307,"props":2989,"children":2990},{"class":309,"line":342},[2991,2995,2999,3004,3008,3012,3017],{"type":14,"tag":307,"props":2992,"children":2993},{"style":314},[2994],{"type":20,"value":317},{"type":14,"tag":307,"props":2996,"children":2997},{"style":314},[2998],{"type":20,"value":956},{"type":14,"tag":307,"props":3000,"children":3001},{"style":646},[3002],{"type":20,"value":3003}," Configure",{"type":14,"tag":307,"props":3005,"children":3006},{"style":331},[3007],{"type":20,"value":1035},{"type":14,"tag":307,"props":3009,"children":3010},{"style":325},[3011],{"type":20,"value":230},{"type":14,"tag":307,"props":3013,"children":3014},{"style":512},[3015],{"type":20,"value":3016}," configurator",{"type":14,"tag":307,"props":3018,"children":3019},{"style":331},[3020],{"type":20,"value":1200},{"type":14,"tag":307,"props":3022,"children":3023},{"class":309,"line":351},[3024],{"type":14,"tag":307,"props":3025,"children":3026},{"style":331},[3027],{"type":20,"value":348},{"type":14,"tag":307,"props":3029,"children":3030},{"class":309,"line":360},[3031,3036,3040,3044,3049,3054,3059,3063,3068,3073,3077],{"type":14,"tag":307,"props":3032,"children":3033},{"style":512},[3034],{"type":20,"value":3035},"    configurator",{"type":14,"tag":307,"props":3037,"children":3038},{"style":331},[3039],{"type":20,"value":295},{"type":14,"tag":307,"props":3041,"children":3042},{"style":646},[3043],{"type":20,"value":223},{"type":14,"tag":307,"props":3045,"children":3046},{"style":331},[3047],{"type":20,"value":3048},"((",{"type":14,"tag":307,"props":3050,"children":3051},{"style":325},[3052],{"type":20,"value":3053},"Configuration1",{"type":14,"tag":307,"props":3055,"children":3056},{"style":512},[3057],{"type":20,"value":3058}," configuration1",{"type":14,"tag":307,"props":3060,"children":3061},{"style":331},[3062],{"type":20,"value":208},{"type":14,"tag":307,"props":3064,"children":3065},{"style":325},[3066],{"type":20,"value":3067},"Configuration2",{"type":14,"tag":307,"props":3069,"children":3070},{"style":512},[3071],{"type":20,"value":3072}," configuration2",{"type":14,"tag":307,"props":3074,"children":3075},{"style":331},[3076],{"type":20,"value":2008},{"type":14,"tag":307,"props":3078,"children":3079},{"style":518},[3080],{"type":20,"value":2013},{"type":14,"tag":307,"props":3082,"children":3083},{"class":309,"line":543},[3084],{"type":14,"tag":307,"props":3085,"children":3086},{"style":331},[3087],{"type":20,"value":662},{"type":14,"tag":307,"props":3089,"children":3090},{"class":309,"line":694},[3091],{"type":14,"tag":307,"props":3092,"children":3093},{"style":1409},[3094],{"type":20,"value":3095},"        // use both objects to configure\n",{"type":14,"tag":307,"props":3097,"children":3098},{"class":309,"line":719},[3099],{"type":14,"tag":307,"props":3100,"children":3101},{"style":331},[3102],{"type":20,"value":3103},"    });\n",{"type":14,"tag":307,"props":3105,"children":3106},{"class":309,"line":728},[3107],{"type":14,"tag":307,"props":3108,"children":3109},{"style":331},[3110],{"type":20,"value":366},{"type":14,"tag":307,"props":3112,"children":3113},{"class":309,"line":738},[3114,3118],{"type":14,"tag":307,"props":3115,"children":3116},{"style":518},[3117],{"type":20,"value":2273},{"type":14,"tag":307,"props":3119,"children":3120},{"style":331},[3121],{"type":20,"value":540},{"type":14,"tag":22,"props":3123,"children":3124},{},[3125,3127,3133],{"type":20,"value":3126},"See ",{"type":14,"tag":63,"props":3128,"children":3130},{"href":3129},"./feature",[3131],{"type":20,"value":3132},"Feature",{"type":20,"value":3134}," for more information on using layer configurators\nfor features.",{"type":14,"tag":2757,"props":3136,"children":3138},{"id":3137},"one-by-one",[3139],{"type":20,"value":3140},"One by One",{"type":14,"tag":22,"props":3142,"children":3143},{},[3144],{"type":20,"value":3145},"Below code demonstrates providing configuration objects one by one;",{"type":14,"tag":297,"props":3147,"children":3149},{"className":299,"code":3148,"language":301,"meta":7,"style":7},"public class LayerX : LayerBase\u003CAddServices>\n{\n    readonly Configuration1 _configuration1 = new();\n    readonly Configuration2 _configuration2 = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContextBuilder()\n            .Add(_configuration1)\n            .Add(_configuration2)\n            .Build()\n        ;\n}\n",[3150],{"type":14,"tag":28,"props":3151,"children":3152},{"__ignoreMap":7},[3153,3188,3195,3222,3249,3256,3295,3315,3339,3362,3377,3385],{"type":14,"tag":307,"props":3154,"children":3155},{"class":309,"line":310},[3156,3160,3164,3168,3172,3176,3180,3184],{"type":14,"tag":307,"props":3157,"children":3158},{"style":314},[3159],{"type":20,"value":317},{"type":14,"tag":307,"props":3161,"children":3162},{"style":314},[3163],{"type":20,"value":322},{"type":14,"tag":307,"props":3165,"children":3166},{"style":325},[3167],{"type":20,"value":328},{"type":14,"tag":307,"props":3169,"children":3170},{"style":331},[3171],{"type":20,"value":334},{"type":14,"tag":307,"props":3173,"children":3174},{"style":325},[3175],{"type":20,"value":293},{"type":14,"tag":307,"props":3177,"children":3178},{"style":331},[3179],{"type":20,"value":633},{"type":14,"tag":307,"props":3181,"children":3182},{"style":325},[3183],{"type":20,"value":1921},{"type":14,"tag":307,"props":3185,"children":3186},{"style":331},[3187],{"type":20,"value":1157},{"type":14,"tag":307,"props":3189,"children":3190},{"class":309,"line":342},[3191],{"type":14,"tag":307,"props":3192,"children":3193},{"style":331},[3194],{"type":20,"value":348},{"type":14,"tag":307,"props":3196,"children":3197},{"class":309,"line":351},[3198,3202,3206,3210,3214,3218],{"type":14,"tag":307,"props":3199,"children":3200},{"style":314},[3201],{"type":20,"value":1940},{"type":14,"tag":307,"props":3203,"children":3204},{"style":325},[3205],{"type":20,"value":2828},{"type":14,"tag":307,"props":3207,"children":3208},{"style":512},[3209],{"type":20,"value":2833},{"type":14,"tag":307,"props":3211,"children":3212},{"style":518},[3213],{"type":20,"value":990},{"type":14,"tag":307,"props":3215,"children":3216},{"style":314},[3217],{"type":20,"value":681},{"type":14,"tag":307,"props":3219,"children":3220},{"style":331},[3221],{"type":20,"value":691},{"type":14,"tag":307,"props":3223,"children":3224},{"class":309,"line":360},[3225,3229,3233,3237,3241,3245],{"type":14,"tag":307,"props":3226,"children":3227},{"style":314},[3228],{"type":20,"value":1940},{"type":14,"tag":307,"props":3230,"children":3231},{"style":325},[3232],{"type":20,"value":2857},{"type":14,"tag":307,"props":3234,"children":3235},{"style":512},[3236],{"type":20,"value":2862},{"type":14,"tag":307,"props":3238,"children":3239},{"style":518},[3240],{"type":20,"value":990},{"type":14,"tag":307,"props":3242,"children":3243},{"style":314},[3244],{"type":20,"value":681},{"type":14,"tag":307,"props":3246,"children":3247},{"style":331},[3248],{"type":20,"value":691},{"type":14,"tag":307,"props":3250,"children":3251},{"class":309,"line":543},[3252],{"type":14,"tag":307,"props":3253,"children":3254},{"emptyLinePlaceholder":732},[3255],{"type":20,"value":735},{"type":14,"tag":307,"props":3257,"children":3258},{"class":309,"line":694},[3259,3263,3267,3271,3275,3279,3283,3287,3291],{"type":14,"tag":307,"props":3260,"children":3261},{"style":314},[3262],{"type":20,"value":499},{"type":14,"tag":307,"props":3264,"children":3265},{"style":314},[3266],{"type":20,"value":504},{"type":14,"tag":307,"props":3268,"children":3269},{"style":325},[3270],{"type":20,"value":1985},{"type":14,"tag":307,"props":3272,"children":3273},{"style":646},[3274],{"type":20,"value":1990},{"type":14,"tag":307,"props":3276,"children":3277},{"style":331},[3278],{"type":20,"value":1035},{"type":14,"tag":307,"props":3280,"children":3281},{"style":325},[3282],{"type":20,"value":1921},{"type":14,"tag":307,"props":3284,"children":3285},{"style":512},[3286],{"type":20,"value":2003},{"type":14,"tag":307,"props":3288,"children":3289},{"style":331},[3290],{"type":20,"value":2008},{"type":14,"tag":307,"props":3292,"children":3293},{"style":518},[3294],{"type":20,"value":2013},{"type":14,"tag":307,"props":3296,"children":3297},{"class":309,"line":719},[3298,3302,3306,3311],{"type":14,"tag":307,"props":3299,"children":3300},{"style":512},[3301],{"type":20,"value":2021},{"type":14,"tag":307,"props":3303,"children":3304},{"style":331},[3305],{"type":20,"value":295},{"type":14,"tag":307,"props":3307,"children":3308},{"style":646},[3309],{"type":20,"value":3310},"CreateContextBuilder",{"type":14,"tag":307,"props":3312,"children":3313},{"style":331},[3314],{"type":20,"value":654},{"type":14,"tag":307,"props":3316,"children":3317},{"class":309,"line":728},[3318,3323,3327,3331,3335],{"type":14,"tag":307,"props":3319,"children":3320},{"style":331},[3321],{"type":20,"value":3322},"            .",{"type":14,"tag":307,"props":3324,"children":3325},{"style":646},[3326],{"type":20,"value":165},{"type":14,"tag":307,"props":3328,"children":3329},{"style":331},[3330],{"type":20,"value":1035},{"type":14,"tag":307,"props":3332,"children":3333},{"style":512},[3334],{"type":20,"value":2944},{"type":14,"tag":307,"props":3336,"children":3337},{"style":331},[3338],{"type":20,"value":1200},{"type":14,"tag":307,"props":3340,"children":3341},{"class":309,"line":738},[3342,3346,3350,3354,3358],{"type":14,"tag":307,"props":3343,"children":3344},{"style":331},[3345],{"type":20,"value":3322},{"type":14,"tag":307,"props":3347,"children":3348},{"style":646},[3349],{"type":20,"value":165},{"type":14,"tag":307,"props":3351,"children":3352},{"style":331},[3353],{"type":20,"value":1035},{"type":14,"tag":307,"props":3355,"children":3356},{"style":512},[3357],{"type":20,"value":2953},{"type":14,"tag":307,"props":3359,"children":3360},{"style":331},[3361],{"type":20,"value":1200},{"type":14,"tag":307,"props":3363,"children":3364},{"class":309,"line":769},[3365,3369,3373],{"type":14,"tag":307,"props":3366,"children":3367},{"style":331},[3368],{"type":20,"value":3322},{"type":14,"tag":307,"props":3370,"children":3371},{"style":646},[3372],{"type":20,"value":254},{"type":14,"tag":307,"props":3374,"children":3375},{"style":331},[3376],{"type":20,"value":654},{"type":14,"tag":307,"props":3378,"children":3379},{"class":309,"line":797},[3380],{"type":14,"tag":307,"props":3381,"children":3382},{"style":331},[3383],{"type":20,"value":3384},"        ;\n",{"type":14,"tag":307,"props":3386,"children":3387},{"class":309,"line":1576},[3388],{"type":14,"tag":307,"props":3389,"children":3390},{"style":331},[3391],{"type":20,"value":366},{"type":14,"tag":22,"props":3393,"children":3394},{},[3395],{"type":20,"value":3396},"This phase context will require two different actions in a feature;",{"type":14,"tag":297,"props":3398,"children":3400},{"className":299,"code":3399,"language":301,"meta":7,"style":7},"...\npublic void Configure(LayerConfigurator configurator)\n{\n    configurator.Configure((Configuration1 configuration1) =>\n    {\n        // configure one by one\n    });\n\n    configurator.Configure((Configuration2 configuration2) =>\n    {\n        // configure one by one\n    });\n}\n...\n",[3401],{"type":14,"tag":28,"props":3402,"children":3403},{"__ignoreMap":7},[3404,3415,3446,3453,3488,3495,3503,3510,3517,3552,3559,3566,3573,3580],{"type":14,"tag":307,"props":3405,"children":3406},{"class":309,"line":310},[3407,3411],{"type":14,"tag":307,"props":3408,"children":3409},{"style":518},[3410],{"type":20,"value":2273},{"type":14,"tag":307,"props":3412,"children":3413},{"style":331},[3414],{"type":20,"value":540},{"type":14,"tag":307,"props":3416,"children":3417},{"class":309,"line":342},[3418,3422,3426,3430,3434,3438,3442],{"type":14,"tag":307,"props":3419,"children":3420},{"style":314},[3421],{"type":20,"value":317},{"type":14,"tag":307,"props":3423,"children":3424},{"style":314},[3425],{"type":20,"value":956},{"type":14,"tag":307,"props":3427,"children":3428},{"style":646},[3429],{"type":20,"value":3003},{"type":14,"tag":307,"props":3431,"children":3432},{"style":331},[3433],{"type":20,"value":1035},{"type":14,"tag":307,"props":3435,"children":3436},{"style":325},[3437],{"type":20,"value":230},{"type":14,"tag":307,"props":3439,"children":3440},{"style":512},[3441],{"type":20,"value":3016},{"type":14,"tag":307,"props":3443,"children":3444},{"style":331},[3445],{"type":20,"value":1200},{"type":14,"tag":307,"props":3447,"children":3448},{"class":309,"line":351},[3449],{"type":14,"tag":307,"props":3450,"children":3451},{"style":331},[3452],{"type":20,"value":348},{"type":14,"tag":307,"props":3454,"children":3455},{"class":309,"line":360},[3456,3460,3464,3468,3472,3476,3480,3484],{"type":14,"tag":307,"props":3457,"children":3458},{"style":512},[3459],{"type":20,"value":3035},{"type":14,"tag":307,"props":3461,"children":3462},{"style":331},[3463],{"type":20,"value":295},{"type":14,"tag":307,"props":3465,"children":3466},{"style":646},[3467],{"type":20,"value":223},{"type":14,"tag":307,"props":3469,"children":3470},{"style":331},[3471],{"type":20,"value":3048},{"type":14,"tag":307,"props":3473,"children":3474},{"style":325},[3475],{"type":20,"value":3053},{"type":14,"tag":307,"props":3477,"children":3478},{"style":512},[3479],{"type":20,"value":3058},{"type":14,"tag":307,"props":3481,"children":3482},{"style":331},[3483],{"type":20,"value":2008},{"type":14,"tag":307,"props":3485,"children":3486},{"style":518},[3487],{"type":20,"value":2013},{"type":14,"tag":307,"props":3489,"children":3490},{"class":309,"line":543},[3491],{"type":14,"tag":307,"props":3492,"children":3493},{"style":331},[3494],{"type":20,"value":662},{"type":14,"tag":307,"props":3496,"children":3497},{"class":309,"line":694},[3498],{"type":14,"tag":307,"props":3499,"children":3500},{"style":1409},[3501],{"type":20,"value":3502},"        // configure one by one\n",{"type":14,"tag":307,"props":3504,"children":3505},{"class":309,"line":719},[3506],{"type":14,"tag":307,"props":3507,"children":3508},{"style":331},[3509],{"type":20,"value":3103},{"type":14,"tag":307,"props":3511,"children":3512},{"class":309,"line":728},[3513],{"type":14,"tag":307,"props":3514,"children":3515},{"emptyLinePlaceholder":732},[3516],{"type":20,"value":735},{"type":14,"tag":307,"props":3518,"children":3519},{"class":309,"line":738},[3520,3524,3528,3532,3536,3540,3544,3548],{"type":14,"tag":307,"props":3521,"children":3522},{"style":512},[3523],{"type":20,"value":3035},{"type":14,"tag":307,"props":3525,"children":3526},{"style":331},[3527],{"type":20,"value":295},{"type":14,"tag":307,"props":3529,"children":3530},{"style":646},[3531],{"type":20,"value":223},{"type":14,"tag":307,"props":3533,"children":3534},{"style":331},[3535],{"type":20,"value":3048},{"type":14,"tag":307,"props":3537,"children":3538},{"style":325},[3539],{"type":20,"value":3067},{"type":14,"tag":307,"props":3541,"children":3542},{"style":512},[3543],{"type":20,"value":3072},{"type":14,"tag":307,"props":3545,"children":3546},{"style":331},[3547],{"type":20,"value":2008},{"type":14,"tag":307,"props":3549,"children":3550},{"style":518},[3551],{"type":20,"value":2013},{"type":14,"tag":307,"props":3553,"children":3554},{"class":309,"line":769},[3555],{"type":14,"tag":307,"props":3556,"children":3557},{"style":331},[3558],{"type":20,"value":662},{"type":14,"tag":307,"props":3560,"children":3561},{"class":309,"line":797},[3562],{"type":14,"tag":307,"props":3563,"children":3564},{"style":1409},[3565],{"type":20,"value":3502},{"type":14,"tag":307,"props":3567,"children":3568},{"class":309,"line":1576},[3569],{"type":14,"tag":307,"props":3570,"children":3571},{"style":331},[3572],{"type":20,"value":3103},{"type":14,"tag":307,"props":3574,"children":3575},{"class":309,"line":1596},[3576],{"type":14,"tag":307,"props":3577,"children":3578},{"style":331},[3579],{"type":20,"value":366},{"type":14,"tag":307,"props":3581,"children":3582},{"class":309,"line":1646},[3583,3587],{"type":14,"tag":307,"props":3584,"children":3585},{"style":518},[3586],{"type":20,"value":2273},{"type":14,"tag":307,"props":3588,"children":3589},{"style":331},[3590],{"type":20,"value":540},{"type":14,"tag":368,"props":3592,"children":3593},{},[3594,3601],{"type":14,"tag":22,"props":3595,"children":3596},{},[3597],{"type":14,"tag":307,"props":3598,"children":3599},{},[3600],{"type":20,"value":378},{"type":14,"tag":22,"props":3602,"children":3603},{},[3604,3610,3612,3618],{"type":14,"tag":28,"props":3605,"children":3607},{"className":3606},[],[3608],{"type":20,"value":3609},"phase.CreateContext()",{"type":20,"value":3611}," is a helper method that utilizes\n",{"type":14,"tag":28,"props":3613,"children":3615},{"className":3614},[],[3616],{"type":20,"value":3617},"phase.CreateContextBuilder()",{"type":20,"value":3619}," behind the scenes.",{"type":14,"tag":2757,"props":3621,"children":3623},{"id":3622},"using-in-combination",[3624],{"type":20,"value":3625},"Using in Combination",{"type":14,"tag":22,"props":3627,"children":3628},{},[3629],{"type":20,"value":3630},"You may combine these two ways to provide configuration;",{"type":14,"tag":297,"props":3632,"children":3634},{"className":299,"code":3633,"language":301,"meta":7,"style":7},"public class LayerX : LayerBase\u003CAddServices>\n{\n    readonly Configuration1 _configuration1 = new();\n    readonly Configuration2 _configuration2 = new();\n    readonly Configuration3 _configuration3 = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContextBuilder()\n            .Add(_configuration1, _configuration2)\n            .Add(_configuration3)\n            .Build()\n        ;\n}\n",[3635],{"type":14,"tag":28,"props":3636,"children":3637},{"__ignoreMap":7},[3638,3673,3680,3707,3734,3763,3770,3809,3828,3859,3883,3898,3905],{"type":14,"tag":307,"props":3639,"children":3640},{"class":309,"line":310},[3641,3645,3649,3653,3657,3661,3665,3669],{"type":14,"tag":307,"props":3642,"children":3643},{"style":314},[3644],{"type":20,"value":317},{"type":14,"tag":307,"props":3646,"children":3647},{"style":314},[3648],{"type":20,"value":322},{"type":14,"tag":307,"props":3650,"children":3651},{"style":325},[3652],{"type":20,"value":328},{"type":14,"tag":307,"props":3654,"children":3655},{"style":331},[3656],{"type":20,"value":334},{"type":14,"tag":307,"props":3658,"children":3659},{"style":325},[3660],{"type":20,"value":293},{"type":14,"tag":307,"props":3662,"children":3663},{"style":331},[3664],{"type":20,"value":633},{"type":14,"tag":307,"props":3666,"children":3667},{"style":325},[3668],{"type":20,"value":1921},{"type":14,"tag":307,"props":3670,"children":3671},{"style":331},[3672],{"type":20,"value":1157},{"type":14,"tag":307,"props":3674,"children":3675},{"class":309,"line":342},[3676],{"type":14,"tag":307,"props":3677,"children":3678},{"style":331},[3679],{"type":20,"value":348},{"type":14,"tag":307,"props":3681,"children":3682},{"class":309,"line":351},[3683,3687,3691,3695,3699,3703],{"type":14,"tag":307,"props":3684,"children":3685},{"style":314},[3686],{"type":20,"value":1940},{"type":14,"tag":307,"props":3688,"children":3689},{"style":325},[3690],{"type":20,"value":2828},{"type":14,"tag":307,"props":3692,"children":3693},{"style":512},[3694],{"type":20,"value":2833},{"type":14,"tag":307,"props":3696,"children":3697},{"style":518},[3698],{"type":20,"value":990},{"type":14,"tag":307,"props":3700,"children":3701},{"style":314},[3702],{"type":20,"value":681},{"type":14,"tag":307,"props":3704,"children":3705},{"style":331},[3706],{"type":20,"value":691},{"type":14,"tag":307,"props":3708,"children":3709},{"class":309,"line":360},[3710,3714,3718,3722,3726,3730],{"type":14,"tag":307,"props":3711,"children":3712},{"style":314},[3713],{"type":20,"value":1940},{"type":14,"tag":307,"props":3715,"children":3716},{"style":325},[3717],{"type":20,"value":2857},{"type":14,"tag":307,"props":3719,"children":3720},{"style":512},[3721],{"type":20,"value":2862},{"type":14,"tag":307,"props":3723,"children":3724},{"style":518},[3725],{"type":20,"value":990},{"type":14,"tag":307,"props":3727,"children":3728},{"style":314},[3729],{"type":20,"value":681},{"type":14,"tag":307,"props":3731,"children":3732},{"style":331},[3733],{"type":20,"value":691},{"type":14,"tag":307,"props":3735,"children":3736},{"class":309,"line":543},[3737,3741,3746,3751,3755,3759],{"type":14,"tag":307,"props":3738,"children":3739},{"style":314},[3740],{"type":20,"value":1940},{"type":14,"tag":307,"props":3742,"children":3743},{"style":325},[3744],{"type":20,"value":3745}," Configuration3",{"type":14,"tag":307,"props":3747,"children":3748},{"style":512},[3749],{"type":20,"value":3750}," _configuration3",{"type":14,"tag":307,"props":3752,"children":3753},{"style":518},[3754],{"type":20,"value":990},{"type":14,"tag":307,"props":3756,"children":3757},{"style":314},[3758],{"type":20,"value":681},{"type":14,"tag":307,"props":3760,"children":3761},{"style":331},[3762],{"type":20,"value":691},{"type":14,"tag":307,"props":3764,"children":3765},{"class":309,"line":694},[3766],{"type":14,"tag":307,"props":3767,"children":3768},{"emptyLinePlaceholder":732},[3769],{"type":20,"value":735},{"type":14,"tag":307,"props":3771,"children":3772},{"class":309,"line":719},[3773,3777,3781,3785,3789,3793,3797,3801,3805],{"type":14,"tag":307,"props":3774,"children":3775},{"style":314},[3776],{"type":20,"value":499},{"type":14,"tag":307,"props":3778,"children":3779},{"style":314},[3780],{"type":20,"value":504},{"type":14,"tag":307,"props":3782,"children":3783},{"style":325},[3784],{"type":20,"value":1985},{"type":14,"tag":307,"props":3786,"children":3787},{"style":646},[3788],{"type":20,"value":1990},{"type":14,"tag":307,"props":3790,"children":3791},{"style":331},[3792],{"type":20,"value":1035},{"type":14,"tag":307,"props":3794,"children":3795},{"style":325},[3796],{"type":20,"value":1921},{"type":14,"tag":307,"props":3798,"children":3799},{"style":512},[3800],{"type":20,"value":2003},{"type":14,"tag":307,"props":3802,"children":3803},{"style":331},[3804],{"type":20,"value":2008},{"type":14,"tag":307,"props":3806,"children":3807},{"style":518},[3808],{"type":20,"value":2013},{"type":14,"tag":307,"props":3810,"children":3811},{"class":309,"line":728},[3812,3816,3820,3824],{"type":14,"tag":307,"props":3813,"children":3814},{"style":512},[3815],{"type":20,"value":2021},{"type":14,"tag":307,"props":3817,"children":3818},{"style":331},[3819],{"type":20,"value":295},{"type":14,"tag":307,"props":3821,"children":3822},{"style":646},[3823],{"type":20,"value":3310},{"type":14,"tag":307,"props":3825,"children":3826},{"style":331},[3827],{"type":20,"value":654},{"type":14,"tag":307,"props":3829,"children":3830},{"class":309,"line":738},[3831,3835,3839,3843,3847,3851,3855],{"type":14,"tag":307,"props":3832,"children":3833},{"style":331},[3834],{"type":20,"value":3322},{"type":14,"tag":307,"props":3836,"children":3837},{"style":646},[3838],{"type":20,"value":165},{"type":14,"tag":307,"props":3840,"children":3841},{"style":331},[3842],{"type":20,"value":1035},{"type":14,"tag":307,"props":3844,"children":3845},{"style":512},[3846],{"type":20,"value":2944},{"type":14,"tag":307,"props":3848,"children":3849},{"style":331},[3850],{"type":20,"value":208},{"type":14,"tag":307,"props":3852,"children":3853},{"style":512},[3854],{"type":20,"value":2953},{"type":14,"tag":307,"props":3856,"children":3857},{"style":331},[3858],{"type":20,"value":1200},{"type":14,"tag":307,"props":3860,"children":3861},{"class":309,"line":769},[3862,3866,3870,3874,3879],{"type":14,"tag":307,"props":3863,"children":3864},{"style":331},[3865],{"type":20,"value":3322},{"type":14,"tag":307,"props":3867,"children":3868},{"style":646},[3869],{"type":20,"value":165},{"type":14,"tag":307,"props":3871,"children":3872},{"style":331},[3873],{"type":20,"value":1035},{"type":14,"tag":307,"props":3875,"children":3876},{"style":512},[3877],{"type":20,"value":3878},"_configuration3",{"type":14,"tag":307,"props":3880,"children":3881},{"style":331},[3882],{"type":20,"value":1200},{"type":14,"tag":307,"props":3884,"children":3885},{"class":309,"line":797},[3886,3890,3894],{"type":14,"tag":307,"props":3887,"children":3888},{"style":331},[3889],{"type":20,"value":3322},{"type":14,"tag":307,"props":3891,"children":3892},{"style":646},[3893],{"type":20,"value":254},{"type":14,"tag":307,"props":3895,"children":3896},{"style":331},[3897],{"type":20,"value":654},{"type":14,"tag":307,"props":3899,"children":3900},{"class":309,"line":1576},[3901],{"type":14,"tag":307,"props":3902,"children":3903},{"style":331},[3904],{"type":20,"value":3384},{"type":14,"tag":307,"props":3906,"children":3907},{"class":309,"line":1596},[3908],{"type":14,"tag":307,"props":3909,"children":3910},{"style":331},[3911],{"type":20,"value":366},{"type":14,"tag":22,"props":3913,"children":3914},{},[3915],{"type":20,"value":3916},"This phase context will require two different actions;",{"type":14,"tag":100,"props":3918,"children":3919},{},[3920,3931],{"type":14,"tag":104,"props":3921,"children":3922},{},[3923,3925],{"type":20,"value":3924},"For the first two configuration objects: ",{"type":14,"tag":28,"props":3926,"children":3928},{"className":3927},[],[3929],{"type":20,"value":3930},"(Configuration1 configuration1, Configuration2 configuration2)",{"type":14,"tag":104,"props":3932,"children":3933},{},[3934,3936,3942],{"type":20,"value":3935},"For the last configuration object: ",{"type":14,"tag":28,"props":3937,"children":3939},{"className":3938},[],[3940],{"type":20,"value":3941},"(Configuration3 configuration3)",{"type":20,"value":295},{"type":14,"tag":3944,"props":3945,"children":3946},"style",{},[3947],{"type":20,"value":3948},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":342,"depth":342,"links":3950},[3951,3952,3956,3961],{"id":90,"depth":342,"text":93},{"id":279,"depth":342,"text":282,"children":3953},[3954],{"id":394,"depth":351,"text":3955},"Id of a Layer",{"id":551,"depth":342,"text":554,"children":3957},[3958,3959,3960],{"id":849,"depth":351,"text":852},{"id":1083,"depth":351,"text":1086},{"id":1768,"depth":351,"text":1771},{"id":1866,"depth":342,"text":1869,"children":3962},[3963,3965,3966],{"id":2109,"depth":351,"text":3964},"Using non-generic LayerBase",{"id":2371,"depth":351,"text":2374},{"id":2747,"depth":351,"text":2750},"markdown","content:architecture:layer.md","content","architecture/layer.md","md",{},["Set"],{"content-query-hBLt6OxXWy":3975},null,1716570055814,{"sectionStore":3978,"pageStore":3995},{"sections":3979},[3980,3983,3986,3989,3992],{"_path":3981,"_dir":7,"title":3982},"/blueprints/","Blueprints",{"_path":3984,"_dir":7,"title":3985},"/features/","Features",{"_path":3987,"_dir":7,"title":3988},"/layers/","Layers",{"_path":3990,"_dir":7,"title":3991},"/architecture/","Architecture",{"_path":3993,"_dir":7,"title":3994},"/release-notes/","Release Notes",{"pages":3996},[3997,4001,4003,4004],{"_path":3990,"title":3991,"pages":3998},[3999,17,4000],"application","feature",{"_path":4002,"title":68},"/architecture/application",{"_path":4,"title":8},{"_path":4005,"title":3132},"/architecture/feature"]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{mdc:{components:{prose:true,map:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"}},headings:{anchorLinks:{h1:false,h2:false,h3:false,h4:false,h5:false,h6:false}}},baseURL:"/",githubURL:"/mouseless/do",content:{locales:[],defaultLocale:"",integrity:1716570046064,experimental:{stripQueryParameters:false,advanceQuery:false,clientDB:false},respectPathCase:false,api:{baseURL:"/api/_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{theme:"slack-dark",preload:["diff","ts","js","css","java","markdown","sql","xml","json","csharp","md","bash"],highlighter:"shiki",langs:["js","jsx","json","ts","tsx","vue","css","html","vue","bash","md","mdc","yaml","diff","ts","js","css","java","markdown","sql","xml","json","csharp","md","bash"]},wsUrl:"",documentDriven:false,host:"",trailingSlash:false,search:"",contentHead:true,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"/",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>