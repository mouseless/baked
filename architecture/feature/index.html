<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><script type="importmap">{"imports":{"#entry":"/_nuxt/Cdn6zXjx.js"}}</script><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"><link rel="stylesheet" type="text/css" href="https://brand.mouseless.codes/assets/css/default.css"><link rel="stylesheet" href="/_nuxt/entry.B0G4llYu.css" crossorigin><link rel="stylesheet" href="/_nuxt/default.C0NN0KRm.css" crossorigin><link rel="stylesheet" href="/_nuxt/Header.sXa2Vnjb.css" crossorigin><link rel="stylesheet" href="/_nuxt/Matrix.DFzrTc58.css" crossorigin><link rel="stylesheet" href="/_nuxt/Side.C76uAFVe.css" crossorigin><link rel="stylesheet" href="/_nuxt/Footer.CGR61OHC.css" crossorigin><link rel="stylesheet" href="/_nuxt/_...DLrb7MuZ.css" crossorigin><link rel="stylesheet" href="/_nuxt/BottomNavigation.r3LNpwrO.css" crossorigin><link rel="stylesheet" href="/_nuxt/Toc.Af1r4o9q.css" crossorigin><link rel="stylesheet" href="/_nuxt/ProseA.CqVAhxst.css" crossorigin><link rel="stylesheet" href="/_nuxt/ProsePre.D5orA6B_.css" crossorigin><link rel="stylesheet" href="/_nuxt/ProseBlockquote.Cuq1vwaP.css" crossorigin><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Cdn6zXjx.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ClJbpLae.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BLq6gJE2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BIWPiWbr.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DaJU8bM5.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DlAUqK2U.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DeoQc62T.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/D4x74b3S.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Ggij8kke.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DygSDjUM.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DUExxKo2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/SmALQxf5.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/8glGIOur.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BuAl_KBO.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BUucS_Bm.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/E0v6GAzE.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CD0r9d6d.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CUTXS7NW.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/COpogkKb.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BxNRJ-mV.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/C23gDzEc.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BppuMbFt.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B5rglt7O.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ajmGX5Lx.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DfyMop2e.js"><link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/53ac06a3-5107-47eb-b9f0-629f6a51e8ef.json"><link rel="prefetch" as="style" crossorigin href="/_nuxt/error-404.DlVPZ4GE.css"><link rel="prefetch" as="script" crossorigin href="/_nuxt/CVmD4fOr.js"><link rel="prefetch" as="style" crossorigin href="/_nuxt/error-500.DjyirMQI.css"><link rel="prefetch" as="script" crossorigin href="/_nuxt/DViDmhL1.js"><meta id="og:type" property="og:type" content="website"><meta id="og:locale" property="og:locale" content="en_US"><meta id="og:site_name" property="og:site_name" content="Baked"><meta id="og:description" property="og:description" content="An opinionated framework for .NET"><meta id="og:image" property="og:image" content="https://baked.mouseless.codes/favicon.ico"><meta id="og:image:width" property="og:image:width" content="50"><meta id="og:image:height" property="og:image:height" content="50"><link rel="icon" type="image/x-icon" href="/favicon.ico"><script type="module" src="/_nuxt/Cdn6zXjx.js" crossorigin></script></head><body><div id="__nuxt"><!--[--><div class="top" data-v-5fe722f5 data-v-dae87e82><header data-v-dae87e82><div class="logo" data-v-dae87e82><a href="/" class="" data-v-dae87e82><img class="baked logo" data-v-dae87e82></a></div><!----><a class="bars" data-v-dae87e82><i class="fa-solid fa-bars" data-v-dae87e82></i></a><nav class="" data-v-dae87e82><a class="close" data-v-dae87e82><i class="fa-solid fa-close" data-v-dae87e82></i></a><!--[--><a href="/recipes" class="" data-v-dae87e82>Recipes</a><a href="/features" class="" data-v-dae87e82>Features</a><a href="/layers" class="" data-v-dae87e82>Layers</a><a href="/architecture" class="active" data-v-dae87e82>Architecture</a><a href="/release-notes" class="" data-v-dae87e82>Release Notes</a><!--]--><a href="https://github.com/mouseless/baked" rel="noopener noreferrer" target="_blank" data-v-dae87e82><i class="fa-brands fa-github" data-v-dae87e82></i></a><a href="https://matrix.to/#/#baked:mouseless.org" rel="noopener noreferrer" target="_blank" class="matrix" data-v-dae87e82><svg viewbox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" data-v-dae87e82 data-v-43ea57fe><g clip-path="url(#clip0_602_4)" data-v-43ea57fe><path d="M0.844 0.735023V31.266H3.041V32.001H0V0.00102344H3.041V0.736023L0.844 0.735023ZM10.235 10.412V11.959H10.276C10.6603 11.3936 11.1698 10.9244 11.765 10.588C12.344 10.265 13.016 10.104 13.765 10.104C14.484 10.104 15.145 10.245 15.74 10.521C16.339 10.802 16.787 11.297 17.099 12C17.438 11.5 17.902 11.057 18.479 10.677C19.058 10.297 19.746 10.104 20.542 10.104C21.1088 10.0983 21.6736 10.1737 22.219 10.328C22.74 10.473 23.178 10.708 23.547 11.031C23.912 11.36 24.198 11.782 24.407 12.303C24.61 12.823 24.714 13.454 24.714 14.194V21.829H21.585V15.361C21.5859 14.9991 21.5699 14.6374 21.537 14.277C21.518 13.9705 21.4366 13.6711 21.298 13.397C21.1674 13.1451 20.9639 12.9384 20.714 12.804C20.459 12.652 20.105 12.58 19.667 12.58C19.224 12.58 18.87 12.663 18.599 12.829C18.3333 12.9945 18.1133 13.2238 17.959 13.496C17.7987 13.7828 17.6942 14.0974 17.651 14.423C17.6005 14.7702 17.5728 15.1203 17.568 15.471V21.83H14.437V15.429C14.437 15.09 14.432 14.757 14.412 14.429C14.4029 14.1146 14.3375 13.8044 14.219 13.513C14.1146 13.234 13.9204 12.9976 13.667 12.841C13.412 12.674 13.031 12.586 12.531 12.586C12.38 12.586 12.183 12.617 11.943 12.685C11.703 12.752 11.464 12.877 11.24 13.06C10.9866 13.2784 10.7854 13.5507 10.651 13.857C10.49 14.2 10.412 14.653 10.412 15.216V21.836H7.281V10.415L10.235 10.412ZM31.156 31.265V0.734023H28.959V-0.000976562H32V31.999H28.959V31.264L31.156 31.265Z" fill="black" data-v-43ea57fe></path></g><defs data-v-43ea57fe><clipPath id="clip0_602_4" data-v-43ea57fe><rect width="32" height="32" fill="black" data-v-43ea57fe></rect></clipPath></defs></svg></a></nav></header></div><div class="content" data-v-5fe722f5><nav class="side" data-v-5fe722f5 data-v-02200698><h4 data-v-02200698><a data-v-02200698>Pages</a></h4><ul class="" data-v-02200698><li data-v-02200698><!--[--><!--]--></li></ul></nav><article data-v-5fe722f5><!--[--><div class="container"><div class="content"><div class="toc-root"><h1 id="feature"><!--[-->Feature<!--]--></h1><p><!--[-->Features consist of two parts; abstraction (port) and implementation (adapter).
Each adapter exposes a class that implements <code><!--[-->IFeature<!--]--></code> interface.<!--]--></p><h2 id="conventions"><!--[-->Conventions<!--]--></h2><p><!--[-->For a consistent developer experience, follow below conventions when
implementing a new feature;<!--]--></p><h3 id="abstraction"><!--[-->Abstraction<!--]--></h3><ol><!--[--><li><!--[-->Place all abstraction classes under a folder named after feature, e.g.,
<code><!--[-->Greeting/<!--]--></code>.<!--]--></li><li><!--[-->Provide a configurator and an extension class for abstraction part, e.g.,
<code><!--[-->Greeting/GreetingConfigurator.cs<!--]--></code>, <code><!--[-->Greeting/GreetingExtensions.cs<!--]--></code>.<!--]--></li><li><!--[-->Provide an <code><!--[-->Add<!--]--></code> method to add feature to an application, e.g.,
<code><!--[-->AddGreeting()<!--]--></code>.
<ol><!--[--><li><!--[-->If feature allows multiple implementations, indicate this with a plural
add method, e.g., <code><!--[-->AddCodingStyles()<!--]--></code>. Also accept a list of features
instead of a single feature.<!--]--></li><!--]--></ol><!--]--></li><!--]--></ol><h3 id="implementation"><!--[-->Implementation<!--]--></h3><ol><!--[--><li><!--[-->Place all implementation classes under their own folder in the abstraction
folder, e.g., <code><!--[-->Greeting/WelcomePage/<!--]--></code>.<!--]--></li><li><!--[-->Provide an extension method with the implementation name to allow adding
that implementation, e.g., <code><!--[-->WelcomePage()<!--]--></code>.
<ol><!--[--><li><!--[-->This method should be in an extension class under <code><!--[-->Baked<!--]--></code> namespace, e.g.,
<code><!--[-->Greeting/WelcomePage/WelcomePageGreetingExtensions.cs<!--]--></code>.<!--]--></li><!--]--></ol><!--]--></li><li><!--[-->Name feature class after implementation name with abstraction name as a
suffix, e.g., <code><!--[-->WelcomePageGreetingFeature<!--]--></code>.<!--]--></li><li><!--[-->Features depend on other features through their abstraction parts. Direct
dependency between feature implementations is forbidden.<!--]--></li><li><!--[-->To create a configuration overrider, add an extension and feature class
directly under the feature folder, e.g.,
<code><!--[-->ConfigurationOverrider/ConfigurationOverriderExtensions.cs<!--]--></code> and
<code><!--[-->ConfigurationOverrider/ConfigurationOverriderFeature.cs<!--]--></code>.
<ol><!--[--><li><!--[-->Unlike regular features, provide <code><!--[-->AddConfigurationOverrider()<!--]--></code> extension
method directly to allow <code><!--[-->app.Features.AddConfigurationOverrider()<!--]--></code>
usage.<!--]--></li><li><!--[-->Implement <code><!--[-->IFeature<!--]--></code> in <code><!--[-->ConfigurationOverriderFeature<!--]--></code> where you add
all your configuration overrides.<!--]--></li><!--]--></ol><!--]--></li><!--]--></ol><p><!--[-->Please refer to existing features in <a href="https://github.com/mouseless/baked" rel="nofollow" target="_blank" class="external" data-v-348f032c><!--[-->github.com/mouseless/baked<!--]--><i class="fa-solid fa-arrow-up-right-from-square" data-v-348f032c></i></a> for
examples.<!--]--></p><h2 id="creating-a-feature"><!--[-->Creating A Feature<!--]--></h2><p><!--[-->To create a feature implementation, create a class using above conventions and
implement <code><!--[-->IFeature&lt;TConfigurator&gt;<!--]--></code> where <code><!--[-->TConfigurator<!--]--></code> is the configurator
class of your feature abstraction.<!--]--></p><p><!--[--><code><!--[-->WelcomePageGreetingFeature.cs<!--]--></code><!--]--></p><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span class="scz_3">public</span><span class="scz_3"> class</span><span class="sNl3T"> WelcomePageGreetingFeature</span><span class="sMfK5"> : </span><span class="sNl3T">IFeature</span><span class="sMfK5">&lt;</span><span class="sNl3T">GreetingConfigurator</span><span class="sMfK5">&gt;
</span></span><span class="line" line="2"><span class="sMfK5">{
</span></span><span class="line" line="3"><span class="scz_3">    public</span><span class="scz_3"> void</span><span class="sCudf"> Configure</span><span class="sMfK5">(</span><span class="sNl3T">LayerConfigurator</span><span class="s3F5K"> configurator</span><span class="sMfK5">)
</span></span><span class="line" line="4"><span class="sMfK5">    {
</span></span><span class="line" line="5"><span class="sTNBD">        ..</span><span class="sMfK5">.
</span></span><span class="line" line="6"><span class="sMfK5">    }
</span></span><span class="line" line="7"><span class="sMfK5">}
</span></span></code><!--]--></pre><h3 id="id-of-a-feature"><!--[--><code><!--[-->Id<!--]--></code> of a Feature<!--]--></h3><p><!--[--><code><!--[-->IFeature<!--]--></code> has an <code><!--[-->Id<!--]--></code> property which should be unique per <code><!--[-->Application<!--]--></code>
instance. By default, value of this property is name of the implementing
feature.<!--]--></p><p><!--[-->You can override its value by implementing <code><!--[-->IFeature.Id<!--]--></code> property in feature
implementation class as shown below;<!--]--></p><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span class="scz_3">public</span><span class="scz_3"> class</span><span class="sNl3T"> WelcomePageGreetingFeature</span><span class="sMfK5"> : </span><span class="sNl3T">IFeature</span><span class="sMfK5">&lt;</span><span class="sNl3T">GreetingConfigurator</span><span class="sMfK5">&gt;
</span></span><span class="line" line="2"><span class="sMfK5">{
</span></span><span class="line" line="3"><span class="scz_3">    public</span><span class="scz_3"> string</span><span class="s3F5K"> Id</span><span class="sTNBD"> =&gt;</span><span class="sKc5r"> &quot;CustomFeatureId&quot;</span><span class="sMfK5">;
</span></span><span class="line" line="4"><span class="sMfK5">    ...
</span></span><span class="line" line="5"><span class="sMfK5">}
</span></span></code><!--]--></pre><h3 id="disabling-a-feature"><!--[-->Disabling a Feature<!--]--></h3><p><!--[-->To allow a feature to be disabled, you can provide a <code><!--[-->Disable<!--]--></code> method in your
configurator which returns <code><!--[-->Feature.Empty&lt;TConfigurator&gt;()<!--]--></code>, this feautre does
not configure any layers.<!--]--></p><p><!--[--><code><!--[-->GreetingConfigurator.cs<!--]--></code><!--]--></p><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span class="scz_3">public</span><span class="scz_3"> class</span><span class="sNl3T"> GreetingConfigurator
</span></span><span class="line" line="2"><span class="sMfK5">{
</span></span><span class="line" line="3"><span class="scz_3">    public</span><span class="sNl3T"> IFeature</span><span class="sMfK5">&lt;</span><span class="sNl3T">GreetingConfigurator</span><span class="sMfK5">&gt; </span><span class="sCudf">Disabled</span><span class="sMfK5">() </span><span class="sTNBD">=&gt;
</span></span><span class="line" line="4"><span class="s3F5K">        Feature</span><span class="sMfK5">.</span><span class="sCudf">Empty</span><span class="sMfK5">&lt;</span><span class="sNl3T">GreetingConfigurator</span><span class="sMfK5">&gt;();
</span></span><span class="line" line="5"><span class="sMfK5">}
</span></span></code><!--]--></pre><h2 id="configuring-layers"><!--[-->Configuring Layers<!--]--></h2><p><!--[-->To configure layers, a <code><!--[-->LayerCofigurator<!--]--></code> instance is passed to the
<code><!--[-->Configure()<!--]--></code> method of the <code><!--[-->IFeature<!--]--></code> interface. Using extension methods on
the given configurator, a feature accesses configuration targets of layers.<!--]--></p><p><!--[--><code><!--[-->WelcomePageGreetingFeature.cs<!--]--></code><!--]--></p><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span class="scz_3">public</span><span class="scz_3"> class</span><span class="sNl3T"> WelcomePageGreetingFeature</span><span class="sMfK5"> : </span><span class="sNl3T">IFeature</span><span class="sMfK5">&lt;</span><span class="sNl3T">GreetingConfigurator</span><span class="sMfK5">&gt;
</span></span><span class="line" line="2"><span class="sMfK5">{
</span></span><span class="line" line="3"><span class="scz_3">    public</span><span class="scz_3"> void</span><span class="sCudf"> Configure</span><span class="sMfK5">(</span><span class="sNl3T">LayerConfigurator</span><span class="s3F5K"> configurator</span><span class="sMfK5">)
</span></span><span class="line" line="4"><span class="sMfK5">    {
</span></span><span class="line" line="5"><span class="s3F5K">        configurator</span><span class="sMfK5">.</span><span class="sCudf">ConfigureMiddlewareCollection</span><span class="sMfK5">(</span><span class="s3F5K">middlewares</span><span class="sTNBD"> =&gt;
</span></span><span class="line" line="6"><span class="sMfK5">        {
</span></span><span class="line" line="7"><span class="s3F5K">            middlewares</span><span class="sMfK5">.</span><span class="sCudf">Add</span><span class="sMfK5">(</span><span class="s3F5K">app</span><span class="sTNBD"> =&gt;</span><span class="s3F5K"> app</span><span class="sMfK5">.</span><span class="sCudf">UseWelcomePage</span><span class="sMfK5">());
</span></span><span class="line" line="8"><span class="sMfK5">        });
</span></span><span class="line" line="9"><span class="sMfK5">    }
</span></span><span class="line" line="10"><span class="sMfK5">}
</span></span></code><!--]--></pre><blockquote class="info" data-v-52748c37><i class="fa fa-circle-info" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->Layers allow up to three configuration targets per configuration action.<!--]--></p><!--]--></div></blockquote><p><!--[--><code><!--[-->Configure<!--]--></code> method will be called multiple times, each time to configure a
different part of the application. <code><!--[-->LayerConfigurator<!--]--></code> ensures that given
configuration action is only applied to the related target, e.g.,
<code><!--[-->IMiddlewareCollection<!--]--></code> in the above code.<!--]--></p><p><!--[-->A layer might provide the same object in different configurators. For example,
<code><!--[-->WebApplication<!--]--></code> implements <code><!--[-->IEndpointRouteBuilder<!--]--></code> but <code><!--[-->HttpServerLayer<!--]--></code>
provides it with its interface not its concrete type.<!--]--></p><blockquote class="warning" data-v-52748c37><i class="fa fa-warning" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->Do <strong><!--[-->NOT<!--]--></strong> cast given configuration objects to their other interfaces. A
layer provides a separate extension method, e.g.,
<code><!--[-->ConfigureEndpointRouteBuilder()<!--]--></code>.<!--]--></p><!--]--></div></blockquote><blockquote class="tip" data-v-52748c37><i class="fa fa-lightbulb" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->The order of the configuration calls does not have an effect in the outcome.
Feel free to organize these calls in the way you like.<!--]--></p><!--]--></div></blockquote><h3 id="using-phase-artifacts"><!--[-->Using Phase Artifacts<!--]--></h3><p><!--[-->To access and use objects stored in application context in a feature,
<code><!--[-->LayerConfigurator<!--]--></code> provides <code><!--[-->Use&lt;T&gt;<!--]--></code> helper which will invoke given
action with context phase artifact.<!--]--></p><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span class="s3F5K">configurator</span><span class="sMfK5">.</span><span class="sCudf">ConfigureApiModel</span><span class="sMfK5">(</span><span class="s3F5K">api</span><span class="sTNBD"> =&gt;
</span></span><span class="line" line="2"><span class="sMfK5">{
</span></span><span class="line" line="3"><span class="s3F5K">    configurator</span><span class="sMfK5">.</span><span class="sCudf">UseDomainModel</span><span class="sMfK5">(</span><span class="s3F5K">domain</span><span class="sTNBD"> =&gt;
</span></span><span class="line" line="4"><span class="sMfK5">    {
</span></span><span class="line" line="5"><span class="sTNBD">        ..</span><span class="sMfK5">.
</span></span><span class="line" line="6"><span class="sMfK5">    });
</span></span><span class="line" line="7"><span class="sMfK5">});
</span></span></code><!--]--></pre><blockquote class="warning" data-v-52748c37><i class="fa fa-warning" data-v-52748c37></i><div data-v-52748c37><!--[--><p><!--[-->Unlike configuration targets, phase artifacts may or may not exist in the
application context or not configured properly at the moment
<code><!--[-->LayerConfigurator<!--]--></code> applies configurations. Phase execution orders and
configurations should be taken into consideration when using phase artifacts.<!--]--></p><!--]--></div></blockquote><h3 id="including-an-option"><!--[-->Including an Option<!--]--></h3><p><!--[-->To include an option in a feature, take the option as a parameter in
configurator extension and pass it to the feature implementation as shown
below;<!--]--></p><p><!--[--><code><!--[-->WelcomePageGreetingFeature.cs<!--]--></code><!--]--></p><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span class="scz_3">public</span><span class="scz_3"> class</span><span class="sNl3T"> WelcomePageGreetingFeature</span><span class="sMfK5">(</span><span class="scz_3">string</span><span class="s3F5K"> _path</span><span class="sMfK5">)
</span></span><span class="line" line="2"><span class="sMfK5">    : </span><span class="sNl3T">IFeature</span><span class="sMfK5">&lt;</span><span class="sNl3T">GreetingConfigurator</span><span class="sMfK5">&gt;
</span></span><span class="line" line="3"><span class="sMfK5">{
</span></span><span class="line" line="4"><span class="scz_3">    public</span><span class="scz_3"> void</span><span class="sCudf"> Configure</span><span class="sMfK5">(</span><span class="sNl3T">LayerConfigurator</span><span class="s3F5K"> configurator</span><span class="sMfK5">)
</span></span><span class="line" line="5"><span class="sMfK5">    {
</span></span><span class="line" line="6"><span class="s3F5K">        configurator</span><span class="sMfK5">.</span><span class="sCudf">ConfigureApplicationBuilder</span><span class="sMfK5">(</span><span class="s3F5K">app</span><span class="sTNBD"> =&gt;
</span></span><span class="line" line="7"><span class="sMfK5">        {
</span></span><span class="line" line="8"><span class="s3F5K">            app</span><span class="sMfK5">.</span><span class="sCudf">UseWelcomePage</span><span class="sMfK5">(</span><span class="s3F5K">_path</span><span class="sMfK5">);
</span></span><span class="line" line="9"><span class="sMfK5">        });
</span></span><span class="line" line="10"><span class="sMfK5">    }
</span></span><span class="line" line="11"><span class="sMfK5">}
</span></span></code><!--]--></pre><p><!--[--><code><!--[-->WelcomePageGreetingExtensions.cs<!--]--></code><!--]--></p><pre class="language-csharp shiki shiki-themes slack-dark" style=""><!--[--><code><span class="line" line="1"><span class="scz_3">public</span><span class="scz_3"> static</span><span class="scz_3"> class</span><span class="sNl3T"> WelcomePageGreetingExtensions
</span></span><span class="line" line="2"><span class="sMfK5">{
</span></span><span class="line" line="3"><span class="scz_3">    public</span><span class="scz_3"> static</span><span class="sNl3T"> WelcomePageGreetingFeature</span><span class="sCudf"> WelcomePage</span><span class="sMfK5">(
</span></span><span class="line" line="4"><span class="scz_3">        this</span><span class="sNl3T"> GreetingConfigurator</span><span class="s3F5K"> source</span><span class="sMfK5">,
</span></span><span class="line" line="5"><span class="scz_3">        string</span><span class="sMfK5">? </span><span class="s3F5K">path</span><span class="sTNBD"> =</span><span class="scz_3"> default
</span></span><span class="line" line="6"><span class="sMfK5">    ) </span><span class="sTNBD">=&gt;</span><span class="scz_3"> new</span><span class="sMfK5">(</span><span class="s3F5K">path</span><span class="sTNBD"> ??</span><span class="sKc5r"> &quot;/&quot;</span><span class="sMfK5">);
</span></span><span class="line" line="7"><span class="sMfK5">}
</span></span></code><!--]--></pre><style>html pre.shiki code .scz_3, html code.shiki .scz_3{--shiki-default:#569CD6}html pre.shiki code .sNl3T, html code.shiki .sNl3T{--shiki-default:#4EC9B0}html pre.shiki code .sMfK5, html code.shiki .sMfK5{--shiki-default:#E6E6E6}html pre.shiki code .sCudf, html code.shiki .sCudf{--shiki-default:#DCDCAA}html pre.shiki code .s3F5K, html code.shiki .s3F5K{--shiki-default:#9CDCFE}html pre.shiki code .sTNBD, html code.shiki .sTNBD{--shiki-default:#D4D4D4}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .sKc5r, html code.shiki .sKc5r{--shiki-default:#CE9178}</style></div><div class="navigation-buttons-container" data-v-b9143a5a><div class="button left" data-v-b9143a5a><a href="/architecture/layer" class="" data-v-b9143a5a><div class="link-text" data-v-b9143a5a><i class="fa-solid fa-caret-left" data-v-b9143a5a></i> Previous <h3 data-v-b9143a5a>Layer</h3></div></a></div><!----></div></div><nav data-v-05a0cfe4><h4 data-v-05a0cfe4><a data-v-05a0cfe4>On This Page</a></h4><ul class="" data-v-05a0cfe4><!--[--><li data-v-05a0cfe4><a href="#conventions" class="" data-v-05a0cfe4>Conventions</a><ul data-v-05a0cfe4><!--[--><li data-v-05a0cfe4><a href="#abstraction" class="" data-v-05a0cfe4>Abstraction</a></li><li data-v-05a0cfe4><a href="#implementation" class="" data-v-05a0cfe4>Implementation</a></li><!--]--></ul></li><li data-v-05a0cfe4><a href="#creating-a-feature" class="" data-v-05a0cfe4>Creating A Feature</a><ul data-v-05a0cfe4><!--[--><li data-v-05a0cfe4><a href="#id-of-a-feature" class="" data-v-05a0cfe4>Id of a Feature</a></li><li data-v-05a0cfe4><a href="#disabling-a-feature" class="" data-v-05a0cfe4>Disabling a Feature</a></li><!--]--></ul></li><li data-v-05a0cfe4><a href="#configuring-layers" class="" data-v-05a0cfe4>Configuring Layers</a><ul data-v-05a0cfe4><!--[--><li data-v-05a0cfe4><a href="#using-phase-artifacts" class="" data-v-05a0cfe4>Using Phase Artifacts</a></li><li data-v-05a0cfe4><a href="#including-an-option" class="" data-v-05a0cfe4>Including an Option</a></li><!--]--></ul></li><!--]--><li data-v-05a0cfe4><a class="return-to-top" href="#" data-v-05a0cfe4>Return to top</a></li></ul></nav></div><!--]--></article></div><div class="bottom" data-v-5fe722f5 data-v-aead6b69><footer data-v-aead6b69><div class="logo" data-v-aead6b69><a href="/" class="" data-v-aead6b69><img class="baked logo mono" data-v-aead6b69></a><span data-v-aead6b69>Copyright (c) 2025 Mouseless - MIT License</span></div><nav data-v-aead6b69><!--[--><a href="/recipes" class="" data-v-aead6b69>Recipes</a><a href="/features" class="" data-v-aead6b69>Features</a><a href="/layers" class="" data-v-aead6b69>Layers</a><a href="/architecture" class="active" data-v-aead6b69>Architecture</a><a href="/release-notes" class="" data-v-aead6b69>Release Notes</a><!--]--><a href="https://github.com/mouseless/baked" rel="noopener noreferrer" target="_blank" data-v-aead6b69><i class="fa-brands fa-github" data-v-aead6b69></i> /mouseless/baked</a><a href="https://matrix.to/#/#baked:mouseless.org" rel="noopener noreferrer" target="_blank" class="matrix" data-v-aead6b69><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" style="" data-v-aead6b69><g clip-path="url(#clip0_602_4)" data-v-aead6b69><path d="M0.844 0.735023V31.266H3.041V32.001H0V0.00102344H3.041V0.736023L0.844 0.735023ZM10.235 10.412V11.959H10.276C10.6603 11.3936 11.1698 10.9244 11.765 10.588C12.344 10.265 13.016 10.104 13.765 10.104C14.484 10.104 15.145 10.245 15.74 10.521C16.339 10.802 16.787 11.297 17.099 12C17.438 11.5 17.902 11.057 18.479 10.677C19.058 10.297 19.746 10.104 20.542 10.104C21.1088 10.0983 21.6736 10.1737 22.219 10.328C22.74 10.473 23.178 10.708 23.547 11.031C23.912 11.36 24.198 11.782 24.407 12.303C24.61 12.823 24.714 13.454 24.714 14.194V21.829H21.585V15.361C21.5859 14.9991 21.5699 14.6374 21.537 14.277C21.518 13.9705 21.4366 13.6711 21.298 13.397C21.1674 13.1451 20.9639 12.9384 20.714 12.804C20.459 12.652 20.105 12.58 19.667 12.58C19.224 12.58 18.87 12.663 18.599 12.829C18.3333 12.9945 18.1133 13.2238 17.959 13.496C17.7987 13.7828 17.6942 14.0974 17.651 14.423C17.6005 14.7702 17.5728 15.1203 17.568 15.471V21.83H14.437V15.429C14.437 15.09 14.432 14.757 14.412 14.429C14.4029 14.1146 14.3375 13.8044 14.219 13.513C14.1146 13.234 13.9204 12.9976 13.667 12.841C13.412 12.674 13.031 12.586 12.531 12.586C12.38 12.586 12.183 12.617 11.943 12.685C11.703 12.752 11.464 12.877 11.24 13.06C10.9866 13.2784 10.7854 13.5507 10.651 13.857C10.49 14.2 10.412 14.653 10.412 15.216V21.836H7.281V10.415L10.235 10.412ZM31.156 31.265V0.734023H28.959V-0.000976562H32V31.999H28.959V31.264L31.156 31.265Z" fill="black" data-v-aead6b69></path></g><defs data-v-aead6b69><clipPath id="clip0_602_4" data-v-aead6b69><rect width="32" height="32" fill="black" data-v-aead6b69></rect></clipPath></defs></svg> #baked:mouseless.org</a></nav></footer></div><!--]--></div><div id="teleports"></div><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__">[["ShallowReactive",1],{"prerenderedAt":2,"data":3,"state":5,"once":7,"_errors":8,"serverRendered":10,"path":11,"pinia":12},1759505090938,["ShallowReactive",4],{},["Reactive",6],{},["Set"],["ShallowReactive",9],{},true,"/architecture/feature",{"sectionStore":13,"pageStore":341},{"sections":14},[15,59,76,93,287],{"id":16,"title":17,"extension":18,"meta":19,"path":55,"position":56,"stem":57,"__hash__":58},"sections/recipes/index.md","Recipes","md",{"description":20,"body":21},"Baked consists of many features and layers as separate packages. You are free to\nadd necessary feature and layer packages to your project and bake an application\nthat fits your needs. However, there are also architectural recipes that include\na set of layers and features with a default configuration to allow you to reuse\nwhat is commonly needed for an application.",{"type":22,"value":23,"toc":51},"minimark",[24,28,31,48],[25,26,17],"h1",{"id":27},"recipes",[29,30,20],"p",{},[32,33,34,40],"blockquote",{},[29,35,36],{},[37,38,39],"span",{},"!TIP",[29,41,42,43],{},"To override a built-in configuration see\n",[44,45,47],"a",{"href":46},"../architecture/application#overriding-a-configuration","Overriding A Configuration",[29,49,50],{},"Each recipe comes with its own package that references to all the packages it\nuses. This way your application will only need to depend on one recipe package.",{"title":52,"searchDepth":53,"depth":53,"links":54},"",2,[],"/recipes",null,"recipes/index","lTn1t5R34juMkNgaOVt0PDMD2DEGrfJ4XEWL5nKzseE",{"id":60,"title":61,"extension":18,"meta":62,"path":73,"position":56,"stem":74,"__hash__":75},"sections/features/index.md","Features",{"description":63,"body":64},"Here you can find every feature that has been implemented in Baked.",{"type":22,"value":65,"toc":71},[66,69],[25,67,61],{"id":68},"features",[29,70,63],{},{"title":52,"searchDepth":53,"depth":53,"links":72},[],"/features","features/index","VC5QZVc3qMfU9B4tEQL7G4peBnaKqNhnLPb59EdMHas",{"id":77,"title":78,"extension":18,"meta":79,"path":90,"position":56,"stem":91,"__hash__":92},"sections/layers/index.md","Layers",{"description":80,"body":81},"Here you can find documentation for every layer in Baked.",{"type":22,"value":82,"toc":88},[83,86],[25,84,78],{"id":85},"layers",[29,87,80],{},{"title":52,"searchDepth":53,"depth":53,"links":89},[],"/layers","layers/index","3n55iCv6t_usWuyp3pz1SMsPaIgswK1k77noPqwJiOc",{"id":94,"title":95,"extension":18,"meta":96,"path":284,"position":56,"stem":285,"__hash__":286},"sections/architecture/index.md","Architecture",{"description":97,"pages":98,"body":102},"Baked has an architectural core that is designed to allow us to build software\nwith any architectural style. Core idea is to enable a good separation of\nconcerns without causing any repetitive work. To achieve this Baked breaks down\nan application into following components: domain objects, layers and features.",[99,100,101],"application","layer","feature",{"type":22,"value":103,"toc":275},[104,107,109,112,117,120,127,129,132,141,146,166,179,182,190,192,195,200,203,226,231,235,238,249,267,270],[25,105,95],{"id":106},"architecture",[29,108,97],{},[29,110,111],{},"Let's dive into each type of software component to have a better understanding\nof how Baked is structured.",[113,114,116],"h2",{"id":115},"domain-objects","Domain Objects",[29,118,119],{},"At the core of an application lies its domain logic. By this we understand the\nvery reason for an application to exist. Everything else exists only to expose\nthis domain to outside world. So first component is domain objects;",[29,121,122],{},[123,124],"img",{"alt":125,"src":126},"diagram","./README-1.svg",[113,128,78],{"id":85},[29,130,131],{},"Second component is layers. Every layer introduces a new technology, such as a\ndatabase server, message queue server or a framework, into your application\narchitecture.",[32,133,134,138],{},[29,135,136],{},[37,137,39],{},[29,139,140],{},"Layers are named after the concept of their technology.",[29,142,143],{},[123,144],{"alt":125,"src":145},"./README-2.svg",[29,147,148,149,153,154,157,158,161,162,165],{},"In this example, ",[150,151,152],"code",{},"HttpServer"," introduces the concept of web as a layer through\nthe ",[150,155,156],{},"ASP.NET Core"," technology. Also, ",[150,159,160],{},"DataAccess"," introduces the concept of\nrelational databases as a layer through the ",[150,163,164],{},"NHibernate"," framework.",[32,167,168,173],{},[29,169,170],{},[37,171,172],{},"!NOTE",[29,174,175,178],{},[150,176,177],{},"Domain"," is a unique layer that introduces the business logic of an\napplication by encapsulating its domain objects. It processes the assemblies\nto create an application schema, so that it can be used in creating\nconfiguration, conventions and/or generating source code.",[29,180,181],{},"For domain objects to be exposed as API endpoints or mapped onto a relational\ndatabase, layers require an insight about how to interpret domain objects.",[29,183,184,185,189],{},"This is why every layer comes with its own configuration that is specific to\nthe technology it uses. Configurations may contain a set of helper classes\nand/or facade methods that makes it easy to build a certain type of\nconfiguration, but they do ",[186,187,188],"strong",{},"not"," have opinions upfront.",[113,191,61],{"id":68},[29,193,194],{},"Finally, features connect layers in an opinionated way to introduce new\nbehaviours to the application. Features consist of two parts; an optional\nabstraction (port) and a required implementation (adapter).",[196,197,199],"h3",{"id":198},"abstraction","Abstraction",[29,201,202],{},"An abstraction is the library that contains all common classes, interfaces,\nattributes, if any, for a feature. It is the only accessible part of a feature\nfrom domain objects or from other feature implementations.",[32,204,205,209],{},[29,206,207],{},[37,208,172],{},[29,210,211,212,215,216,215,219,215,222,225],{},"Each feature has only one abstraction, named after the ability it provides,\ne.g. ",[150,213,214],{},"Authentication",", ",[150,217,218],{},"Lifetime",[150,220,221],{},"Logging",[150,223,224],{},"Orm"," etc.",[29,227,228],{},[123,229],{"alt":125,"src":230},"./README-3.svg",[196,232,234],{"id":233},"implementation","Implementation",[29,236,237],{},"This is the implementation part of a feature that provides concrete\nimplementations for the interfaces defined in the abstraction, along with\nopinionated configurations using the configuration API of the corresponding\nlayer(s).",[29,239,240,241,244,245,248],{},"Features may have multiple implementations, each named after its corresponding\ndesign or technology, e.g. ",[150,242,243],{},"Authentication.FixedBearerToken"," and\n",[150,246,247],{},"Database.MySql",".",[32,250,251,255],{},[29,252,253],{},[37,254,39],{},[29,256,257,259,260,244,263,266],{},[150,258,218],{}," represents lifetime feature that provides an API to your domain to\nregister services in different lifetimes. ",[150,261,262],{},"Lifetime.Singleton",[150,264,265],{},"Lifetime.Transient"," are two different implementations of how you register and\nretrieve your domain objects from dependency injection.",[29,268,269],{},"In conclusion, feature implementations serve as bridges, connecting layers to\neach other through their opinionated configurations. Below is a complete sample\narchitecture, showcasing the integration of domain logic, layers and features;",[29,271,272],{},[123,273],{"alt":125,"src":274},"./README-4.svg",{"title":52,"searchDepth":53,"depth":53,"links":276},[277,278,279],{"id":115,"depth":53,"text":116},{"id":85,"depth":53,"text":78},{"id":68,"depth":53,"text":61,"children":280},[281,283],{"id":198,"depth":282,"text":199},3,{"id":233,"depth":282,"text":234},"/architecture","architecture/index","MwFmRyk66IDMJ-mxa5mH6qLreFpNKT9_OTOmceSJsYY",{"id":288,"title":289,"extension":18,"meta":290,"path":338,"position":56,"stem":339,"__hash__":340},"sections/release-notes/index.md","Release Notes",{"description":291,"sort":292,"body":295},"Releases follow [major].[minor].[patch] Semantic Versioning format;",{"by":293,"order":294,"version":10},"title","desc",{"type":22,"value":296,"toc":336},[297,300,314],[25,298,289],{"id":299},"release-notes",[29,301,302,303,306,307,313],{},"Releases follow ",[150,304,305],{},"[major].[minor].[patch]"," ",[44,308,312],{"href":309,"rel":310},"https://semver.org/",[311],"nofollow","Semantic Versioning"," format;",[315,316,317,324,330],"ul",{},[318,319,320,323],"li",{},[150,321,322],{},"[major]",": This part will only increase with the major .NET releases with no\nbackward compatibility.",[318,325,326,329],{},[150,327,328],{},"[minor]",": This will increase when there is at least one new feature or\nbreaking change.",[318,331,332,335],{},[150,333,334],{},"[patch]",": For release that has only a bugfix or an improvement, patch number\nwill increase.",{"title":52,"searchDepth":53,"depth":53,"links":337},[],"/release-notes","release-notes/index","oJYM6WJmYYGoNbFTh9T2rokPgnqxOQeKq2avaqEVN4U",{"pages":342},[343,472,1340,3528],{"id":344,"title":95,"extension":18,"meta":345,"pages":470,"path":284,"position":56,"sort":56,"stem":285,"__hash__":471},"pageData/architecture/index.md",{"description":97,"body":346},{"type":22,"value":347,"toc":462},[348,350,352,354,356,358,362,364,366,374,378,388,398,400,404,406,408,410,412,428,432,434,436,442,456,458],[25,349,95],{"id":106},[29,351,97],{},[29,353,111],{},[113,355,116],{"id":115},[29,357,119],{},[29,359,360],{},[123,361],{"alt":125,"src":126},[113,363,78],{"id":85},[29,365,131],{},[32,367,368,372],{},[29,369,370],{},[37,371,39],{},[29,373,140],{},[29,375,376],{},[123,377],{"alt":125,"src":145},[29,379,148,380,153,382,157,384,161,386,165],{},[150,381,152],{},[150,383,156],{},[150,385,160],{},[150,387,164],{},[32,389,390,394],{},[29,391,392],{},[37,393,172],{},[29,395,396,178],{},[150,397,177],{},[29,399,181],{},[29,401,184,402,189],{},[186,403,188],{},[113,405,61],{"id":68},[29,407,194],{},[196,409,199],{"id":198},[29,411,202],{},[32,413,414,418],{},[29,415,416],{},[37,417,172],{},[29,419,211,420,215,422,215,424,215,426,225],{},[150,421,214],{},[150,423,218],{},[150,425,221],{},[150,427,224],{},[29,429,430],{},[123,431],{"alt":125,"src":230},[196,433,234],{"id":233},[29,435,237],{},[29,437,240,438,244,440,248],{},[150,439,243],{},[150,441,247],{},[32,443,444,448],{},[29,445,446],{},[37,447,39],{},[29,449,450,259,452,244,454,266],{},[150,451,218],{},[150,453,262],{},[150,455,265],{},[29,457,269],{},[29,459,460],{},[123,461],{"alt":125,"src":274},{"title":52,"searchDepth":53,"depth":53,"links":463},[464,465,466],{"id":115,"depth":53,"text":116},{"id":85,"depth":53,"text":78},{"id":68,"depth":53,"text":61,"children":467},[468,469],{"id":198,"depth":282,"text":199},{"id":233,"depth":282,"text":234},[99,100,101],"SBJ5PALF55X2QdOmbvJOx-r7mpe4xXodSNlLOtdlO9U",{"id":473,"title":474,"extension":18,"meta":475,"pages":56,"path":1337,"position":56,"sort":56,"stem":1338,"__hash__":1339},"pageData/architecture/application.md","Application",{"description":476,"body":477},"Application acts as a container object for all the domain objects, features\nand layers of the software you develop.",{"type":22,"value":478,"toc":1327},[479,481,486,490,505,576,589,604,608,611,627,642,657,659,662,712,721,724,726,729,794,803,806,850,854,866,945,949,956,1002,1015,1022,1027,1066,1089,1117,1141,1158,1163,1188,1192,1195,1214,1217,1235,1240,1253,1260,1277,1280,1284,1304,1323],[25,480,474],{"id":99},[29,482,483,485],{},[150,484,474],{}," acts as a container object for all the domain objects, features\nand layers of the software you develop.",[113,487,489],{"id":488},"baking-an-application","Baking an Application",[29,491,492,493,496,497,500,501,504],{},"Baked provides a fluent interface to create an application. You can access it\nthrough ",[150,494,495],{},"Bake.New"," under ",[150,498,499],{},"Baked"," namespace. Below is a sample ",[150,502,503],{},"Program.cs"," that\ncreates and runs a new application;",[506,507,511],"pre",{"className":508,"code":509,"language":510,"meta":52,"style":52},"language-csharp shiki shiki-themes slack-dark","Bake.New\n    .Application(app =>\n    {\n        ...\n    })\n    .Run();\n","csharp",[150,512,513,527,545,550,559,565],{"__ignoreMap":52},[37,514,517,521,524],{"class":515,"line":516},"line",1,[37,518,520],{"class":519},"s3F5K","Bake",[37,522,248],{"class":523},"sMfK5",[37,525,526],{"class":519},"New\n",[37,528,529,532,535,538,541],{"class":515,"line":53},[37,530,531],{"class":523},"    .",[37,533,474],{"class":534},"sCudf",[37,536,537],{"class":523},"(",[37,539,540],{"class":519},"app",[37,542,544],{"class":543},"sTNBD"," =>\n",[37,546,547],{"class":515,"line":282},[37,548,549],{"class":523},"    {\n",[37,551,553,556],{"class":515,"line":552},4,[37,554,555],{"class":543},"        ..",[37,557,558],{"class":523},".\n",[37,560,562],{"class":515,"line":561},5,[37,563,564],{"class":523},"    })\n",[37,566,568,570,573],{"class":515,"line":567},6,[37,569,531],{"class":523},[37,571,572],{"class":534},"Run",[37,574,575],{"class":523},"();\n",[32,577,578,582],{},[29,579,580],{},[37,581,172],{},[29,583,584,586,587,248],{},[150,585,499],{}," is automatically added as a global using so that you can directly make\na call to ",[150,588,495],{},[32,590,591,595],{},[29,592,593],{},[37,594,172],{},[29,596,597,599,600,603],{},[150,598,520],{}," always sets current culture to ",[150,601,602],{},"CultureInfo.InvariantCulture"," to avoid\ncase conversion errors.",[113,605,607],{"id":606},"adding-extensions","Adding Extensions",[29,609,610],{},"To add a new extension to an application, you need to make use of the feature /\nlayer system.",[29,612,613,614,617,618,621,622,248],{},"Baked does not allow you to use ",[150,615,616],{},"build.Services.Add"," or ",[150,619,620],{},"app.Use"," methods\ndirectly. This is a design decision to avoid any unexpected behavior because the\norder of extensions may require a special attention as in ",[44,623,626],{"href":624,"rel":625},"https://learn.microsoft.com/en-us/aspnet/core/security/cors#enable-cors",[311],"Enabling Cors",[29,628,629,632,633,636,637,244,639,641],{},[150,630,631],{},"As"," method provides an ",[150,634,635],{},"ApplicationDescriptor"," instance that has ",[150,638,78],{},[150,640,61],{}," properties. Using these properties, you can add desired extensions\ninto your application.",[32,643,644,648],{},[29,645,646],{},[37,647,172],{},[29,649,650,651,653,654,248],{},"Layers and features come with extension methods exposed directly in ",[150,652,499],{},"\nnamespace so that you can see options without adding an extra ",[150,655,656],{},"using",[196,658,78],{"id":85},[29,660,661],{},"Layers are added without any options to configure;",[506,663,665],{"className":508,"code":664,"language":510,"meta":52,"style":52},"app.Layers.AddDomain();\napp.Layers.AddHttpServer();\napp.Layers.AddDataAccess();\n",[150,666,667,682,697],{"__ignoreMap":52},[37,668,669,671,673,675,677,680],{"class":515,"line":516},[37,670,540],{"class":519},[37,672,248],{"class":523},[37,674,78],{"class":519},[37,676,248],{"class":523},[37,678,679],{"class":534},"AddDomain",[37,681,575],{"class":523},[37,683,684,686,688,690,692,695],{"class":515,"line":53},[37,685,540],{"class":519},[37,687,248],{"class":523},[37,689,78],{"class":519},[37,691,248],{"class":523},[37,693,694],{"class":534},"AddHttpServer",[37,696,575],{"class":523},[37,698,699,701,703,705,707,710],{"class":515,"line":282},[37,700,540],{"class":519},[37,702,248],{"class":523},[37,704,78],{"class":519},[37,706,248],{"class":523},[37,708,709],{"class":534},"AddDataAccess",[37,711,575],{"class":523},[32,713,714,718],{},[29,715,716],{},[37,717,172],{},[29,719,720],{},"A layer can only be added once.",[29,722,723],{},"To configure a layer, you need to add a feature mentioned in the next section.",[196,725,61],{"id":68},[29,727,728],{},"Features are added using one of the implementations available in given\nconfigurator;",[506,730,732],{"className":508,"code":731,"language":510,"meta":52,"style":52},"app.Features.AddGreeting(c => c.WelcomePage());\napp.Features.AddDatabase(c => c.MySql());\n",[150,733,734,766],{"__ignoreMap":52},[37,735,736,738,740,742,744,747,749,752,755,758,760,763],{"class":515,"line":516},[37,737,540],{"class":519},[37,739,248],{"class":523},[37,741,61],{"class":519},[37,743,248],{"class":523},[37,745,746],{"class":534},"AddGreeting",[37,748,537],{"class":523},[37,750,751],{"class":519},"c",[37,753,754],{"class":543}," =>",[37,756,757],{"class":519}," c",[37,759,248],{"class":523},[37,761,762],{"class":534},"WelcomePage",[37,764,765],{"class":523},"());\n",[37,767,768,770,772,774,776,779,781,783,785,787,789,792],{"class":515,"line":53},[37,769,540],{"class":519},[37,771,248],{"class":523},[37,773,61],{"class":519},[37,775,248],{"class":523},[37,777,778],{"class":534},"AddDatabase",[37,780,537],{"class":523},[37,782,751],{"class":519},[37,784,754],{"class":543},[37,786,757],{"class":519},[37,788,248],{"class":523},[37,790,791],{"class":534},"MySql",[37,793,765],{"class":523},[32,795,796,800],{},[29,797,798],{},[37,799,172],{},[29,801,802],{},"A feature can only be added once.",[29,804,805],{},"An implementation may ask for additional options within its configurator\nmethod;",[506,807,809],{"className":508,"code":808,"language":510,"meta":52,"style":52},"app.Features.AddDatabase(c => c.MySql(autoUpdateSchema: true));\n",[150,810,811],{"__ignoreMap":52},[37,812,813,815,817,819,821,823,825,827,829,831,833,835,837,840,843,847],{"class":515,"line":516},[37,814,540],{"class":519},[37,816,248],{"class":523},[37,818,61],{"class":519},[37,820,248],{"class":523},[37,822,778],{"class":534},[37,824,537],{"class":523},[37,826,751],{"class":519},[37,828,754],{"class":543},[37,830,757],{"class":519},[37,832,248],{"class":523},[37,834,791],{"class":534},[37,836,537],{"class":523},[37,838,839],{"class":519},"autoUpdateSchema",[37,841,842],{"class":523},": ",[37,844,846],{"class":845},"scz_3","true",[37,848,849],{"class":523},"));\n",[851,852,47],"h4",{"id":853},"overriding-a-configuration",[29,855,856,857,861,862,865],{},"To override configurations of added features, follow\n",[44,858,860],{"href":859},"feature#conventions","feature conventions",", create a\n",[150,863,864],{},"ConfigurationOverrider"," feature and add your overrider after all other\nfeatures as shown below;",[506,867,869],{"className":508,"code":868,"language":510,"meta":52,"style":52},"app.Features.AddGreeting(c => c.WelcomePage());\napp.Features.AddDatabase(c => c.MySql());\n...\napp.Features.AddConfigurationOverrider();\n",[150,870,871,897,923,930],{"__ignoreMap":52},[37,872,873,875,877,879,881,883,885,887,889,891,893,895],{"class":515,"line":516},[37,874,540],{"class":519},[37,876,248],{"class":523},[37,878,61],{"class":519},[37,880,248],{"class":523},[37,882,746],{"class":534},[37,884,537],{"class":523},[37,886,751],{"class":519},[37,888,754],{"class":543},[37,890,757],{"class":519},[37,892,248],{"class":523},[37,894,762],{"class":534},[37,896,765],{"class":523},[37,898,899,901,903,905,907,909,911,913,915,917,919,921],{"class":515,"line":53},[37,900,540],{"class":519},[37,902,248],{"class":523},[37,904,61],{"class":519},[37,906,248],{"class":523},[37,908,778],{"class":534},[37,910,537],{"class":523},[37,912,751],{"class":519},[37,914,754],{"class":543},[37,916,757],{"class":519},[37,918,248],{"class":523},[37,920,791],{"class":534},[37,922,765],{"class":523},[37,924,925,928],{"class":515,"line":282},[37,926,927],{"class":543},"..",[37,929,558],{"class":523},[37,931,932,934,936,938,940,943],{"class":515,"line":552},[37,933,540],{"class":519},[37,935,248],{"class":523},[37,937,61],{"class":519},[37,939,248],{"class":523},[37,941,942],{"class":534},"AddConfigurationOverrider",[37,944,575],{"class":523},[113,946,948],{"id":947},"running-an-application","Running an Application",[29,950,951,952,955],{},"To run an application you need to call ",[150,953,954],{},"Run()"," method after baking it.",[506,957,958],{"className":508,"code":509,"language":510,"meta":52,"style":52},[150,959,960,968,980,984,990,994],{"__ignoreMap":52},[37,961,962,964,966],{"class":515,"line":516},[37,963,520],{"class":519},[37,965,248],{"class":523},[37,967,526],{"class":519},[37,969,970,972,974,976,978],{"class":515,"line":53},[37,971,531],{"class":523},[37,973,474],{"class":534},[37,975,537],{"class":523},[37,977,540],{"class":519},[37,979,544],{"class":543},[37,981,982],{"class":515,"line":282},[37,983,549],{"class":523},[37,985,986,988],{"class":515,"line":552},[37,987,555],{"class":543},[37,989,558],{"class":523},[37,991,992],{"class":515,"line":561},[37,993,564],{"class":523},[37,995,996,998,1000],{"class":515,"line":567},[37,997,531],{"class":523},[37,999,572],{"class":534},[37,1001,575],{"class":523},[29,1003,1004,1005,617,1008,1011,1012,248],{},"Application runs in phases provided by its layers. These phases come from\n",[150,1006,1007],{},"GetStartPhases()",[150,1009,1010],{},"GetGeneratePhases()"," methods of ",[150,1013,1014],{},"ILayer",[29,1016,1017,1018,1021],{},"For example ",[150,1019,1020],{},"HttpServerLayer"," uses ASP.NET Core to build a web application which typically\nruns in three phases;",[29,1023,1024],{},[123,1025],{"alt":125,"src":1026},"./application-1.svg",[32,1028,1029,1033],{},[29,1030,1031],{},[37,1032,39],{},[29,1034,1035,1036,1039,1040,1043,1044,1047,1048,1050,1051,1039,1053,1055,1056,1058,1059,244,1061,1058,1063,1065],{},"Application has ",[150,1037,1038],{},"Generate"," and ",[150,1041,1042],{},"Start"," mode which is configured with ",[150,1045,1046],{},"RunFlags","\nparameter. ",[150,1049,1046],{}," enables running ",[150,1052,1038],{},[150,1054,1042],{}," modes\nmodes individually or respectively. ",[150,1057,1038],{}," mode calls ",[150,1060,1010],{},[150,1062,1042],{},[150,1064,1007],{}," methods to collect phases",[29,1067,1068,1069,1072,1073,215,1076,1079,1080,1083,1084,1088],{},"At the beginning of each phase, application initializes it by providing an\n",[150,1070,1071],{},"ApplicationContext"," instance. This way each phase can add/get certain objects\nto/from the context, such as ",[150,1074,1075],{},"IServiceCollection",[150,1077,1078],{},"IMiddlewareCollection",",\n",[150,1081,1082],{},"IEndpointRouteBuilder"," etc.\nRefer to ",[44,1085,1087],{"href":1086},"./layer#readiness-via-dependencies","Readiness via Dependencies","\nfor more details.",[32,1090,1091,1096],{},[29,1092,1093],{},[37,1094,1095],{},"!WARNING",[29,1097,1098,1099,1101,1102,1105,1106,1108,1109,1112,1113,1116],{},"When trying to get a certain object from ",[150,1100,1071],{},", exact type\nshould be given. Using any other type that extends or implements the target\nobject will result in an unsuccessful ",[150,1103,1104],{},"Get"," operation. For example, trying to\n",[150,1107,1104],{}," a ",[150,1110,1111],{},"WebApplication"," using ",[150,1114,1115],{},"IApplicationBuilder"," type will be unsuccessful.",[29,1118,1119,1120,1124,1125,1127,1128,1132,1133,1136,1137,1140],{},"As mentioned ",[44,1121,1123],{"href":1122},"./#layer","earlier",", layers provide features with things\nto configure. For this to happen, application asks every layer what to configure\nat each phase. If a layer has something to get configured at a phase, such as\nthe ",[150,1126,1078],{}," at the ",[1129,1130,1131],"em",{},"Build"," phase, it returns that object within\na phase context in ",[150,1134,1135],{},"ILayer.GetContext()",". Using this phase context, application\npasses the provided object(s) to all of the features through\n",[150,1138,1139],{},"IFeature.Configure()",". Phase contexts are disposed at the end of their phase.",[29,1142,1143,1144,1039,1147,1150,1151,1039,1154,1157],{},"Below sequence diagram shows how an application runs in phases. In this diagram\nthere are two layers (",[150,1145,1146],{},"A",[150,1148,1149],{},"B","), each having one phase, and two features\n(",[150,1152,1153],{},"X",[150,1155,1156],{},"Y",");",[29,1159,1160],{},[123,1161],{"alt":125,"src":1162},"./application-2.svg",[32,1164,1165,1169],{},[29,1166,1167],{},[37,1168,172],{},[29,1170,1171,1172,1174,1175,1177,1178,215,1180,244,1182,1184,1185,1187],{},"A layer doesn't necessarily introduce new phases to an application, but all\nphases are applied to all layers nevertheless. For example, ",[150,1173,1020],{},"\nintroduces ",[1129,1176,1131],{}," phase which is applied to ",[150,1179,177],{},[150,1181,152],{},[150,1183,160],{}," layers to allow them provide their configuration specific to the\n",[1129,1186,1131],{}," phase.",[196,1189,1191],{"id":1190},"order-of-phases","Order of Phases",[29,1193,1194],{},"Initialization order of phases are determined by;",[1196,1197,1198,1205,1211],"ol",{},[318,1199,1200,1201,1204],{},"Readiness of a phase through ",[150,1202,1203],{},"IPhase.IsReady"," property,",[318,1206,1207,1208,1204],{},"Value of ",[150,1209,1210],{},"IPhase.Order",[318,1212,1213],{},"And the order they are added to the application.",[29,1215,1216],{},"Application checks if a phase is ready and if it is not, application keeps it\nfor the next iteration of initializations.",[29,1218,1219,1220,1222,1223,1225,1226,1228,1229,1231,1232,1234],{},"A phase makes use of given application context to determine if it is ready to\nbe initialized or not. For example, ",[150,1221,572],{}," phase looks for ",[150,1224,1111],{}," in\nthe given context. If it does not, phase decides not to initialize. This way\napplication knows that ",[150,1227,572],{}," phase is not ready until some other phase, e.g.,\n",[150,1230,1131],{}," phase, adds ",[150,1233,1111],{}," to the context.",[29,1236,1237],{},[123,1238],{"alt":125,"src":1239},"./application-3.svg",[32,1241,1242,1246],{},[29,1243,1244],{},[37,1245,172],{},[29,1247,1248,1249,1252],{},"All phases need to initialize. Application will cause a\n",[150,1250,1251],{},"CannotProceedException"," if any of the phases never gets initialized.",[29,1254,1255,1256,1259],{},"When two phases are ready to be initialized at the same iteration, application\nsorts them by their ",[150,1257,1258],{},"Order"," property. A phase can have the following orders;",[1196,1261,1262,1265,1268,1271,1274],{},[318,1263,1264],{},"Earliest",[318,1266,1267],{},"Early",[318,1269,1270],{},"Normal",[318,1272,1273],{},"Late",[318,1275,1276],{},"Latest",[29,1278,1279],{},"Application may have any number of phases with the same order at the same\niteration. So in that case, they will initialize in the order they are provided\nfrom layers.",[851,1281,1283],{"id":1282},"earliest-and-latest-phases","Earliest and Latest Phases",[29,1285,1286,1287,1290,1291,1294,1295,617,1297,1299,1300,1303],{},"There should be only one ",[1129,1288,1289],{},"earliest"," phase and one ",[1129,1292,1293],{},"latest"," phase per iteration.\nIf there are multiple ",[1129,1296,1289],{},[1129,1298,1293],{}," phases, application will throw an\n",[150,1301,1302],{},"OverlappingPhaseException"," and execution will stop. If you see this exception,\nit means you need to reorder phases so that they don't overlap, or you might\nchange their readiness so that they run in their own iteration.",[29,1305,1306,1307,215,1309,1312,1313,1316,1317,1319,1320,1322],{},"These special values ensures certain phases are initialized firstly or lastly.\nFor example, the first phase of ",[150,1308,1020],{},[1129,1310,1311],{},"Create Builder",", adds\n",[150,1314,1315],{},"WebApplicationBuilder"," to the application context, which should be the first\nthing to be done when running an application. To ensure this, ",[1129,1318,1311],{},"\nshould be able to declare itself to be the only ",[1129,1321,1289],{}," phase of its\niteration.",[1324,1325,1326],"style",{},"html pre.shiki code .s3F5K, html code.shiki .s3F5K{--shiki-default:#9CDCFE}html pre.shiki code .sMfK5, html code.shiki .sMfK5{--shiki-default:#E6E6E6}html pre.shiki code .sCudf, html code.shiki .sCudf{--shiki-default:#DCDCAA}html pre.shiki code .sTNBD, html code.shiki .sTNBD{--shiki-default:#D4D4D4}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .scz_3, html code.shiki .scz_3{--shiki-default:#569CD6}",{"title":52,"searchDepth":53,"depth":53,"links":1328},[1329,1330,1334],{"id":488,"depth":53,"text":489},{"id":606,"depth":53,"text":607,"children":1331},[1332,1333],{"id":85,"depth":282,"text":78},{"id":68,"depth":282,"text":61},{"id":947,"depth":53,"text":948,"children":1335},[1336],{"id":1190,"depth":282,"text":1191},"/architecture/application","architecture/application","Hqkv8Nrrh7DaAlg-vVis0QSBt0q5OzTGKb1EkDEPTAM",{"id":1341,"title":1342,"extension":18,"meta":1343,"pages":56,"path":3525,"position":56,"sort":56,"stem":3526,"__hash__":3527},"pageData/architecture/layer.md","Layer",{"description":1344,"body":1345},"Each ILayer implementation represents an internal system component of the\nsoftware you develop. A layer provides application features with configuration\nof this system component so that the features can bind domain objects and\nsystem components together.",{"type":22,"value":1346,"toc":3507},[1347,1349,1355,1362,1377,1381,1384,1462,1471,1475,1481,1519,1531,1538,1559,1562,1614,1618,1629,1794,1814,1823,1827,1850,1940,1951,1954,1967,2062,2072,2088,2103,2116,2301,2317,2321,2334,2371,2375,2382,2477,2489,2505,2511,2524,2648,2652,2663,2815,2833,2847,2851,2854,2858,2861,2968,2971,3058,3066,3070,3073,3205,3208,3314,3330,3334,3337,3487,3490,3504],[25,1348,1342],{"id":100},[29,1350,1351,1352,1354],{},"Each ",[150,1353,1014],{}," implementation represents an internal system component of the\nsoftware you develop. A layer provides application features with configuration\nof this system component so that the features can bind domain objects and\nsystem components together.",[29,1356,1357,1358,1361],{},"Let's take relational database as an example. A relational database is treated\nas an internal system component and is introduced by the ",[150,1359,1360],{},"DataAccessLayer"," along\nwith a configuration API. This API enables a feature to map your domain entities\nto database tables.",[29,1363,1364,1365,1367,1368,1371,1372,244,1374,1376],{},"Another good example is the ",[150,1366,1020],{},". This layer introduces the ASP.NET\nCore framework into your application. It provides three phases, as mentioned in\n",[44,1369,474],{"href":1370},"./application",", along with ",[150,1373,1078],{},[150,1375,1082],{}," objects as its configuration API. This way, any feature\nhas the ability to use a middleware or add routes to the application.",[113,1378,1380],{"id":1379},"conventions","Conventions",[29,1382,1383],{},"For a consistent developer experience, follow below conventions when\nimplementing a new layer;",[1196,1385,1386,1392,1401,1452,1455],{},[318,1387,1388,1389],{},"Place all layer related classes under the same folder named after layer,\ne.g., ",[150,1390,1391],{},"Runtime/",[318,1393,1394,1395,1397,1398],{},"Use ",[150,1396,1342],{}," suffix in layer class name, e.g.,\n",[150,1399,1400],{},"Runtime/RuntimeLayer.cs",[318,1402,1403,1404,1406,1407,1410,1411],{},"Provide extension methods in ",[150,1405,499],{}," namespace, e.g.,\n",[150,1408,1409],{},"Runtime/RuntimeExtensions.cs",";\n",[1196,1412,1413,1426,1440],{},[318,1414,1415,1418,1419,1422,1423],{},[150,1416,1417],{},"Add"," extension to ",[150,1420,1421],{},"List\u003CILayer>",", e.g., ",[150,1424,1425],{},"AddRuntime()",[318,1427,1428,1430,1431,1433,1434,215,1437],{},[150,1429,1104],{}," extensions to ",[150,1432,1071],{},", e.g.,\n",[150,1435,1436],{},"GetWebApplicationBuilder()",[150,1438,1439],{},"GetWebApplication()",[318,1441,1442,1430,1445,1448,1449],{},[150,1443,1444],{},"Configure",[150,1446,1447],{},"LayerConfigurator"," per configuration\ntarget(s), e.g., ",[150,1450,1451],{},"ConfigureServiceCollection()",[318,1453,1454],{},"Place phase implementations as nested classes under the layer class",[318,1456,1457,1458,244,1460],{},"Don't use any suffix for phases and use method-like names, e.g., ",[150,1459,1131],{},[150,1461,572],{},[29,1463,1464,1465,1470],{},"Please refer to existing layers in ",[44,1466,1469],{"href":1467,"rel":1468},"https://github.com/mouseless/baked",[311],"github.com/mouseless/baked"," for examples.",[113,1472,1474],{"id":1473},"creating-a-layer","Creating A Layer",[29,1476,1477,1478,248],{},"To create a layer, create a class using above conventions and extend\n",[150,1479,1480],{},"LayerBase",[506,1482,1484],{"className":508,"code":1483,"language":510,"meta":52,"style":52},"public class LayerX : LayerBase\n{\n    ...\n}\n",[150,1485,1486,1504,1509,1514],{"__ignoreMap":52},[37,1487,1488,1491,1494,1498,1501],{"class":515,"line":516},[37,1489,1490],{"class":845},"public",[37,1492,1493],{"class":845}," class",[37,1495,1497],{"class":1496},"sNl3T"," LayerX",[37,1499,1500],{"class":523}," : ",[37,1502,1503],{"class":1496},"LayerBase\n",[37,1505,1506],{"class":515,"line":53},[37,1507,1508],{"class":523},"{\n",[37,1510,1511],{"class":515,"line":282},[37,1512,1513],{"class":523},"    ...\n",[37,1515,1516],{"class":515,"line":552},[37,1517,1518],{"class":523},"}\n",[32,1520,1521,1525],{},[29,1522,1523],{},[37,1524,39],{},[29,1526,1527,1528,1530],{},"You can directly implement provided interface ",[150,1529,1014],{},", however we've created\nsome base classes to make it easier for you to create layers. All examples\ndemonstrate usage of these base classes.",[196,1532,1534,1537],{"id":1533},"id-of-a-layer",[150,1535,1536],{},"Id"," of a Layer",[29,1539,1540,1542,1543,1545,1546,1548,1549,1551,1552,1554,1555,1558],{},[150,1541,1014],{}," has an ",[150,1544,1536],{}," property which should be a unique per ",[150,1547,474],{},"\ninstance. ",[150,1550,1480],{}," sets the ",[150,1553,1536],{}," as name of the concrete class e.g.,\n",[150,1556,1557],{},"LayerX"," at above example.",[29,1560,1561],{},"You can override its value in layer implementation class as shown below;",[506,1563,1565],{"className":508,"code":1564,"language":510,"meta":52,"style":52},"public class LayerX : LayerBase\n{\n    protected override string Id => \"CustomUniqueId\"\n    ...\n}\n",[150,1566,1567,1579,1583,1603,1610],{"__ignoreMap":52},[37,1568,1569,1571,1573,1575,1577],{"class":515,"line":516},[37,1570,1490],{"class":845},[37,1572,1493],{"class":845},[37,1574,1497],{"class":1496},[37,1576,1500],{"class":523},[37,1578,1503],{"class":1496},[37,1580,1581],{"class":515,"line":53},[37,1582,1508],{"class":523},[37,1584,1585,1588,1591,1594,1597,1599],{"class":515,"line":282},[37,1586,1587],{"class":845},"    protected",[37,1589,1590],{"class":845}," override",[37,1592,1593],{"class":845}," string",[37,1595,1596],{"class":519}," Id",[37,1598,754],{"class":543},[37,1600,1602],{"class":1601},"sKc5r"," \"CustomUniqueId\"\n",[37,1604,1605,1608],{"class":515,"line":552},[37,1606,1607],{"class":543},"    ..",[37,1609,558],{"class":523},[37,1611,1612],{"class":515,"line":561},[37,1613,1518],{"class":523},[113,1615,1617],{"id":1616},"adding-phases","Adding Phases",[29,1619,1620,1621,1623,1624,617,1626,1628],{},"By default ",[150,1622,1480],{}," returns no phases. To add one or more phases into the\napplication, you need to override ",[150,1625,1007],{},[150,1627,1010],{}," methods\nas shown below;",[506,1630,1632],{"className":508,"code":1631,"language":510,"meta":52,"style":52},"public class SampleLayer : LayerBase\n{\n    protected override IEnumerable\u003CIPhase> GetStartPhases()\n    {\n        yield return new DoA();\n    }\n\n    protected override IEnumerable\u003CIPhase> GetGeneratePhases()\n    {\n        yield return new DoB();\n    }\n\n    public class DoA : PhaseBase { ... }\n    public class DoB : PhaseBase { ... }\n}\n",[150,1633,1634,1647,1651,1675,1679,1696,1701,1707,1727,1732,1746,1751,1756,1774,1789],{"__ignoreMap":52},[37,1635,1636,1638,1640,1643,1645],{"class":515,"line":516},[37,1637,1490],{"class":845},[37,1639,1493],{"class":845},[37,1641,1642],{"class":1496}," SampleLayer",[37,1644,1500],{"class":523},[37,1646,1503],{"class":1496},[37,1648,1649],{"class":515,"line":53},[37,1650,1508],{"class":523},[37,1652,1653,1655,1657,1660,1663,1666,1669,1672],{"class":515,"line":282},[37,1654,1587],{"class":845},[37,1656,1590],{"class":845},[37,1658,1659],{"class":1496}," IEnumerable",[37,1661,1662],{"class":523},"\u003C",[37,1664,1665],{"class":1496},"IPhase",[37,1667,1668],{"class":523},"> ",[37,1670,1671],{"class":534},"GetStartPhases",[37,1673,1674],{"class":523},"()\n",[37,1676,1677],{"class":515,"line":552},[37,1678,549],{"class":523},[37,1680,1681,1685,1688,1691,1694],{"class":515,"line":561},[37,1682,1684],{"class":1683},"sYbnZ","        yield",[37,1686,1687],{"class":1683}," return",[37,1689,1690],{"class":845}," new",[37,1692,1693],{"class":1496}," DoA",[37,1695,575],{"class":523},[37,1697,1698],{"class":515,"line":567},[37,1699,1700],{"class":523},"    }\n",[37,1702,1704],{"class":515,"line":1703},7,[37,1705,1706],{"emptyLinePlaceholder":10},"\n",[37,1708,1710,1712,1714,1716,1718,1720,1722,1725],{"class":515,"line":1709},8,[37,1711,1587],{"class":845},[37,1713,1590],{"class":845},[37,1715,1659],{"class":1496},[37,1717,1662],{"class":523},[37,1719,1665],{"class":1496},[37,1721,1668],{"class":523},[37,1723,1724],{"class":534},"GetGeneratePhases",[37,1726,1674],{"class":523},[37,1728,1730],{"class":515,"line":1729},9,[37,1731,549],{"class":523},[37,1733,1735,1737,1739,1741,1744],{"class":515,"line":1734},10,[37,1736,1684],{"class":1683},[37,1738,1687],{"class":1683},[37,1740,1690],{"class":845},[37,1742,1743],{"class":1496}," DoB",[37,1745,575],{"class":523},[37,1747,1749],{"class":515,"line":1748},11,[37,1750,1700],{"class":523},[37,1752,1754],{"class":515,"line":1753},12,[37,1755,1706],{"emptyLinePlaceholder":10},[37,1757,1759,1762,1764,1766,1768,1771],{"class":515,"line":1758},13,[37,1760,1761],{"class":845},"    public",[37,1763,1493],{"class":845},[37,1765,1693],{"class":1496},[37,1767,1500],{"class":523},[37,1769,1770],{"class":1496},"PhaseBase",[37,1772,1773],{"class":523}," { ... }\n",[37,1775,1777,1779,1781,1783,1785,1787],{"class":515,"line":1776},14,[37,1778,1761],{"class":845},[37,1780,1493],{"class":845},[37,1782,1743],{"class":1496},[37,1784,1500],{"class":523},[37,1786,1770],{"class":1496},[37,1788,1773],{"class":523},[37,1790,1792],{"class":515,"line":1791},15,[37,1793,1518],{"class":523},[29,1795,1796,1797,1800,1801,1804,1805,1807,1808,1804,1811,1813],{},"Here ",[150,1798,1799],{},"SampleLayer"," adds two phases, ",[150,1802,1803],{},"DoA"," to ",[150,1806,1042],{}," mode and ",[150,1809,1810],{},"DoB",[150,1812,1038],{},"\nmode of the application.",[32,1815,1816,1820],{},[29,1817,1818],{},[37,1819,39],{},[29,1821,1822],{},"By convention place the phase implementations as a nested class in the layer\nit is added.",[196,1824,1826],{"id":1825},"initializing-a-phase","Initializing a Phase",[29,1828,1829,1831,1832,1835,1836,1839,1840,1842,1843,1846,1847,1849],{},[150,1830,1770],{}," class has ",[150,1833,1834],{},"Initialize()"," method to override so that it can add an\nobject to the application context via ",[150,1837,1838],{},"Context"," property. Base ",[150,1841,1834],{},"\nmethod does not add any objects to the application. Below, you can see how\n",[150,1844,1845],{},"CreateBuilder"," phase adds ",[150,1848,1315],{}," to the context;",[506,1851,1853],{"className":508,"code":1852,"language":510,"meta":52,"style":52},"public class CreateBuilder : PhaseBase\n{\n    protected override void Initialize()\n    {\n        var build = WebApplication.CreateBuilder();\n\n        Context.Add(build);\n    }\n}\n",[150,1854,1855,1869,1873,1887,1891,1911,1915,1932,1936],{"__ignoreMap":52},[37,1856,1857,1859,1861,1864,1866],{"class":515,"line":516},[37,1858,1490],{"class":845},[37,1860,1493],{"class":845},[37,1862,1863],{"class":1496}," CreateBuilder",[37,1865,1500],{"class":523},[37,1867,1868],{"class":1496},"PhaseBase\n",[37,1870,1871],{"class":515,"line":53},[37,1872,1508],{"class":523},[37,1874,1875,1877,1879,1882,1885],{"class":515,"line":282},[37,1876,1587],{"class":845},[37,1878,1590],{"class":845},[37,1880,1881],{"class":845}," void",[37,1883,1884],{"class":534}," Initialize",[37,1886,1674],{"class":523},[37,1888,1889],{"class":515,"line":552},[37,1890,549],{"class":523},[37,1892,1893,1896,1899,1902,1905,1907,1909],{"class":515,"line":561},[37,1894,1895],{"class":845},"        var",[37,1897,1898],{"class":519}," build",[37,1900,1901],{"class":543}," =",[37,1903,1904],{"class":519}," WebApplication",[37,1906,248],{"class":523},[37,1908,1845],{"class":534},[37,1910,575],{"class":523},[37,1912,1913],{"class":515,"line":567},[37,1914,1706],{"emptyLinePlaceholder":10},[37,1916,1917,1920,1922,1924,1926,1929],{"class":515,"line":1703},[37,1918,1919],{"class":519},"        Context",[37,1921,248],{"class":523},[37,1923,1417],{"class":534},[37,1925,537],{"class":523},[37,1927,1928],{"class":519},"build",[37,1930,1931],{"class":523},");\n",[37,1933,1934],{"class":515,"line":1709},[37,1935,1700],{"class":523},[37,1937,1938],{"class":515,"line":1729},[37,1939,1518],{"class":523},[32,1941,1942,1946],{},[29,1943,1944],{},[37,1945,39],{},[29,1947,1527,1948,1950],{},[150,1949,1665],{},", however we've created\nsome base classes to make it easier for you to create phases. All examples\ndemonstrate usage of these base classes.",[196,1952,1087],{"id":1953},"readiness-via-dependencies",[29,1955,1956,1957,1960,1961,1963,1964,1966],{},"You can define context dependencies via generic ",[150,1958,1959],{},"PhaseBase\u003C>"," classes to make\nthe phase wait until context is ready to provide that dependency. For example,\n",[150,1962,1131],{}," depends on the ",[150,1965,1315],{}," instance as shown below;",[506,1968,1970],{"className":508,"code":1969,"language":510,"meta":52,"style":52},"public class Build : PhaseBase\u003CWebApplicationBuilder>\n{\n    protected override void Initialize(WebApplicationBuilder build)\n    {\n        var app = build.Build();\n\n        Context.Add(app);\n    }\n}\n",[150,1971,1972,1992,1996,2015,2019,2036,2040,2054,2058],{"__ignoreMap":52},[37,1973,1974,1976,1978,1981,1983,1985,1987,1989],{"class":515,"line":516},[37,1975,1490],{"class":845},[37,1977,1493],{"class":845},[37,1979,1980],{"class":1496}," Build",[37,1982,1500],{"class":523},[37,1984,1770],{"class":1496},[37,1986,1662],{"class":523},[37,1988,1315],{"class":1496},[37,1990,1991],{"class":523},">\n",[37,1993,1994],{"class":515,"line":53},[37,1995,1508],{"class":523},[37,1997,1998,2000,2002,2004,2006,2008,2010,2012],{"class":515,"line":282},[37,1999,1587],{"class":845},[37,2001,1590],{"class":845},[37,2003,1881],{"class":845},[37,2005,1884],{"class":534},[37,2007,537],{"class":523},[37,2009,1315],{"class":1496},[37,2011,1898],{"class":519},[37,2013,2014],{"class":523},")\n",[37,2016,2017],{"class":515,"line":552},[37,2018,549],{"class":523},[37,2020,2021,2023,2026,2028,2030,2032,2034],{"class":515,"line":561},[37,2022,1895],{"class":845},[37,2024,2025],{"class":519}," app",[37,2027,1901],{"class":543},[37,2029,1898],{"class":519},[37,2031,248],{"class":523},[37,2033,1131],{"class":534},[37,2035,575],{"class":523},[37,2037,2038],{"class":515,"line":567},[37,2039,1706],{"emptyLinePlaceholder":10},[37,2041,2042,2044,2046,2048,2050,2052],{"class":515,"line":1703},[37,2043,1919],{"class":519},[37,2045,248],{"class":523},[37,2047,1417],{"class":534},[37,2049,537],{"class":523},[37,2051,540],{"class":519},[37,2053,1931],{"class":523},[37,2055,2056],{"class":515,"line":1709},[37,2057,1700],{"class":523},[37,2059,2060],{"class":515,"line":1729},[37,2061,1518],{"class":523},[29,2063,2064,2067,2068,2071],{},[150,2065,2066],{},"PhaseBase\u003CT>"," class requires ",[150,2069,2070],{},"Initialize(T t)"," method to be implemented.",[32,2073,2074,2078],{},[29,2075,2076],{},[37,2077,172],{},[29,2079,2080,2081,2084,2085,2071],{},"You can provide more than one dependency for a phase. E.g., ",[150,2082,2083],{},"Phase\u003CX, Y>","\nwill require ",[150,2086,2087],{},"Initialize(X x, Y y)",[32,2089,2090,2094],{},[29,2091,2092],{},[37,2093,1095],{},[29,2095,2096,2097,2099,2100],{},"Type of the dependency provided, must be exactly the same as the type of\ndependency in ",[150,2098,1071],{},". For more information\n",[44,2101,948],{"href":2102},"../architecture/application#running-an-application",[29,2104,2105,2106,2109,2110,2112,2113,1187],{},"Phases can also define context dependencies from other phase artifacts. For\nexample ",[150,2107,2108],{},"HttpServerLayer.Build"," phase can require ",[150,2111,1075],{}," which\nwill be provided during ",[150,2114,2115],{},"DependencyInjectionLayer.AddServices",[506,2117,2119],{"className":508,"code":2118,"language":510,"meta":52,"style":52},"// DependencyInjectionLayer\npublic class AddServices(IServiceCollection _services)\n    : PhaseBase(PhaseOrder.Early)\n{\n    protected override void Initialize()\n    {\n        Context.Add(_services);\n    }\n}\n\n// HttpServerLayer\npublic class Build()\n    : PhaseBase\u003CWebApplicationBuilder, IServiceCollection>(PhaseOrder.Latest)\n{\n    protected override void Initialize(WebApplicationBuilder build, IServiceCollection services)\n    {\n        ...\n    }\n}\n",[150,2120,2121,2127,2145,2163,2167,2179,2183,2198,2202,2206,2210,2215,2225,2250,2254,2279,2284,2291,2296],{"__ignoreMap":52},[37,2122,2123],{"class":515,"line":516},[37,2124,2126],{"class":2125},"sOLPB","// DependencyInjectionLayer\n",[37,2128,2129,2131,2133,2136,2138,2140,2143],{"class":515,"line":53},[37,2130,1490],{"class":845},[37,2132,1493],{"class":845},[37,2134,2135],{"class":1496}," AddServices",[37,2137,537],{"class":523},[37,2139,1075],{"class":1496},[37,2141,2142],{"class":519}," _services",[37,2144,2014],{"class":523},[37,2146,2147,2150,2152,2154,2157,2159,2161],{"class":515,"line":282},[37,2148,2149],{"class":523},"    : ",[37,2151,1770],{"class":1496},[37,2153,537],{"class":523},[37,2155,2156],{"class":1496},"PhaseOrder",[37,2158,248],{"class":523},[37,2160,1267],{"class":1496},[37,2162,2014],{"class":523},[37,2164,2165],{"class":515,"line":552},[37,2166,1508],{"class":523},[37,2168,2169,2171,2173,2175,2177],{"class":515,"line":561},[37,2170,1587],{"class":845},[37,2172,1590],{"class":845},[37,2174,1881],{"class":845},[37,2176,1884],{"class":534},[37,2178,1674],{"class":523},[37,2180,2181],{"class":515,"line":567},[37,2182,549],{"class":523},[37,2184,2185,2187,2189,2191,2193,2196],{"class":515,"line":1703},[37,2186,1919],{"class":519},[37,2188,248],{"class":523},[37,2190,1417],{"class":534},[37,2192,537],{"class":523},[37,2194,2195],{"class":519},"_services",[37,2197,1931],{"class":523},[37,2199,2200],{"class":515,"line":1709},[37,2201,1700],{"class":523},[37,2203,2204],{"class":515,"line":1729},[37,2205,1518],{"class":523},[37,2207,2208],{"class":515,"line":1734},[37,2209,1706],{"emptyLinePlaceholder":10},[37,2211,2212],{"class":515,"line":1748},[37,2213,2214],{"class":2125},"// HttpServerLayer\n",[37,2216,2217,2219,2221,2223],{"class":515,"line":1753},[37,2218,1490],{"class":845},[37,2220,1493],{"class":845},[37,2222,1980],{"class":1496},[37,2224,1674],{"class":523},[37,2226,2227,2229,2231,2233,2235,2237,2239,2242,2244,2246,2248],{"class":515,"line":1758},[37,2228,2149],{"class":523},[37,2230,1770],{"class":1496},[37,2232,1662],{"class":523},[37,2234,1315],{"class":1496},[37,2236,215],{"class":523},[37,2238,1075],{"class":1496},[37,2240,2241],{"class":523},">(",[37,2243,2156],{"class":1496},[37,2245,248],{"class":523},[37,2247,1276],{"class":1496},[37,2249,2014],{"class":523},[37,2251,2252],{"class":515,"line":1776},[37,2253,1508],{"class":523},[37,2255,2256,2258,2260,2262,2264,2266,2268,2270,2272,2274,2277],{"class":515,"line":1791},[37,2257,1587],{"class":845},[37,2259,1590],{"class":845},[37,2261,1881],{"class":845},[37,2263,1884],{"class":534},[37,2265,537],{"class":523},[37,2267,1315],{"class":1496},[37,2269,1898],{"class":519},[37,2271,215],{"class":523},[37,2273,1075],{"class":1496},[37,2275,2276],{"class":519}," services",[37,2278,2014],{"class":523},[37,2280,2282],{"class":515,"line":2281},16,[37,2283,549],{"class":523},[37,2285,2287,2289],{"class":515,"line":2286},17,[37,2288,555],{"class":543},[37,2290,558],{"class":523},[37,2292,2294],{"class":515,"line":2293},18,[37,2295,1700],{"class":523},[37,2297,2299],{"class":515,"line":2298},19,[37,2300,1518],{"class":523},[32,2302,2303,2307],{},[29,2304,2305],{},[37,2306,1095],{},[29,2308,2309,2310,2312,2313,2316],{},"This type of artifact requirement will create a dependency between phases\nwhich results to a layer to layer dependency. In the above example ",[150,2311,1131],{},"\nphase will never execute unless ",[150,2314,2315],{},"DependencyLayer"," is added to the application",[196,2318,2320],{"id":2319},"order-of-a-phase","Order of a Phase",[29,2322,2323,2325,2326,2329,2330,2333],{},[150,2324,1770],{}," classes has ",[150,2327,2328],{},"order"," parameter in their constructors. Default order\nis ",[150,2331,2332],{},"PhaseOrder.Normal",". If you need to change the order, pass the desired order\nto this parameter as shown below;",[506,2335,2337],{"className":508,"code":2336,"language":510,"meta":52,"style":52},"public class DoThisEarlyOn()\n    : PhaseBase(PhaseOrder.Early)\n{ }\n",[150,2338,2339,2350,2366],{"__ignoreMap":52},[37,2340,2341,2343,2345,2348],{"class":515,"line":516},[37,2342,1490],{"class":845},[37,2344,1493],{"class":845},[37,2346,2347],{"class":1496}," DoThisEarlyOn",[37,2349,1674],{"class":523},[37,2351,2352,2354,2356,2358,2360,2362,2364],{"class":515,"line":53},[37,2353,2149],{"class":523},[37,2355,1770],{"class":1496},[37,2357,537],{"class":523},[37,2359,2156],{"class":1496},[37,2361,248],{"class":523},[37,2363,1267],{"class":1496},[37,2365,2014],{"class":523},[37,2367,2368],{"class":515,"line":282},[37,2369,2370],{"class":523},"{ }\n",[113,2372,2374],{"id":2373},"providing-configuration","Providing Configuration",[29,2376,2377,2378,2381],{},"Layers provide configuration objects phase by phase. This means a layer can\nprovide two different configuration objects for two different phases. For this\nreason, a layer returns ",[150,2379,2380],{},"PhaseContext"," instance per phase to which it provides\nconfiguration.",[506,2383,2385],{"className":508,"code":2384,"language":510,"meta":52,"style":52},"public class LayerX : LayerBase\u003CAddServices>\n{\n    readonly LayerXConfiguration _configuration = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContext(_configuration);\n}\n",[150,2386,2387,2406,2410,2427,2431,2456,2473],{"__ignoreMap":52},[37,2388,2389,2391,2393,2395,2397,2399,2401,2404],{"class":515,"line":516},[37,2390,1490],{"class":845},[37,2392,1493],{"class":845},[37,2394,1497],{"class":1496},[37,2396,1500],{"class":523},[37,2398,1480],{"class":1496},[37,2400,1662],{"class":523},[37,2402,2403],{"class":1496},"AddServices",[37,2405,1991],{"class":523},[37,2407,2408],{"class":515,"line":53},[37,2409,1508],{"class":523},[37,2411,2412,2415,2418,2421,2423,2425],{"class":515,"line":282},[37,2413,2414],{"class":845},"    readonly",[37,2416,2417],{"class":1496}," LayerXConfiguration",[37,2419,2420],{"class":519}," _configuration",[37,2422,1901],{"class":543},[37,2424,1690],{"class":845},[37,2426,575],{"class":523},[37,2428,2429],{"class":515,"line":552},[37,2430,1706],{"emptyLinePlaceholder":10},[37,2432,2433,2435,2437,2440,2443,2445,2447,2450,2453],{"class":515,"line":561},[37,2434,1587],{"class":845},[37,2436,1590],{"class":845},[37,2438,2439],{"class":1496}," PhaseContext",[37,2441,2442],{"class":534}," GetContext",[37,2444,537],{"class":523},[37,2446,2403],{"class":1496},[37,2448,2449],{"class":519}," phase",[37,2451,2452],{"class":523},") ",[37,2454,2455],{"class":543},"=>\n",[37,2457,2458,2461,2463,2466,2468,2471],{"class":515,"line":567},[37,2459,2460],{"class":519},"        phase",[37,2462,248],{"class":523},[37,2464,2465],{"class":534},"CreateContext",[37,2467,537],{"class":523},[37,2469,2470],{"class":519},"_configuration",[37,2472,1931],{"class":523},[37,2474,2475],{"class":515,"line":1703},[37,2476,1518],{"class":523},[29,2478,2479,2480,2482,2483,2486,2487,1187],{},"In this example, you see a layer named ",[150,2481,1557],{}," providing a\n",[150,2484,2485],{},"LayerXConfiguration"," instance during ",[150,2488,2403],{},[32,2490,2491,2495],{},[29,2492,2493],{},[37,2494,172],{},[29,2496,2497,2498,2501,2502,2504],{},"By default, a layer returns ",[150,2499,2500],{},"PhaseContext.Empty"," instance for the phases it\ndoes not provide a configuration. This means ",[150,2503,474],{}," skips that layer\nfor the phases it doesn't have anything to configure.",[196,2506,2508,2509],{"id":2507},"using-non-generic-layerbase","Using non-generic ",[150,2510,1480],{},[29,2512,2513,2516,2517,2519,2520,2523],{},[150,2514,2515],{},"LayerBase\u003C>"," classes allow up to three generic arguments. If you need to\nimplement a layer that has things to configure during more than three phases,\nuse non-generic ",[150,2518,1480],{}," class, override ",[150,2521,2522],{},"GetContext(IPhase phase)"," method\nand switch given phase according to its type;",[506,2525,2527],{"className":508,"code":2526,"language":510,"meta":52,"style":52},"public class MyLayer : LayerBase\n{\n    protected override PhaseContext GetContext(IPhase phase) =>\n        phase switch\n        {\n            PhaseA => phase.CreateContext(...),\n            PhaseB => phase.CreateContext(...),\n            _ => base.GetContext(phase)\n        };\n}\n",[150,2528,2529,2542,2546,2566,2573,2578,2598,2617,2639,2644],{"__ignoreMap":52},[37,2530,2531,2533,2535,2538,2540],{"class":515,"line":516},[37,2532,1490],{"class":845},[37,2534,1493],{"class":845},[37,2536,2537],{"class":1496}," MyLayer",[37,2539,1500],{"class":523},[37,2541,1503],{"class":1496},[37,2543,2544],{"class":515,"line":53},[37,2545,1508],{"class":523},[37,2547,2548,2550,2552,2554,2556,2558,2560,2562,2564],{"class":515,"line":282},[37,2549,1587],{"class":845},[37,2551,1590],{"class":845},[37,2553,2439],{"class":1496},[37,2555,2442],{"class":534},[37,2557,537],{"class":523},[37,2559,1665],{"class":1496},[37,2561,2449],{"class":519},[37,2563,2452],{"class":523},[37,2565,2455],{"class":543},[37,2567,2568,2570],{"class":515,"line":552},[37,2569,2460],{"class":519},[37,2571,2572],{"class":1683}," switch\n",[37,2574,2575],{"class":515,"line":561},[37,2576,2577],{"class":523},"        {\n",[37,2579,2580,2583,2585,2587,2589,2591,2593,2595],{"class":515,"line":567},[37,2581,2582],{"class":1496},"            PhaseA",[37,2584,754],{"class":543},[37,2586,2449],{"class":519},[37,2588,248],{"class":523},[37,2590,2465],{"class":534},[37,2592,537],{"class":523},[37,2594,927],{"class":543},[37,2596,2597],{"class":523},".),\n",[37,2599,2600,2603,2605,2607,2609,2611,2613,2615],{"class":515,"line":1703},[37,2601,2602],{"class":1496},"            PhaseB",[37,2604,754],{"class":543},[37,2606,2449],{"class":519},[37,2608,248],{"class":523},[37,2610,2465],{"class":534},[37,2612,537],{"class":523},[37,2614,927],{"class":543},[37,2616,2597],{"class":523},[37,2618,2619,2622,2624,2627,2629,2632,2634,2637],{"class":515,"line":1709},[37,2620,2621],{"class":845},"            _",[37,2623,754],{"class":543},[37,2625,2626],{"class":845}," base",[37,2628,248],{"class":523},[37,2630,2631],{"class":534},"GetContext",[37,2633,537],{"class":523},[37,2635,2636],{"class":519},"phase",[37,2638,2014],{"class":523},[37,2640,2641],{"class":515,"line":1729},[37,2642,2643],{"class":523},"        };\n",[37,2645,2646],{"class":515,"line":1734},[37,2647,1518],{"class":523},[196,2649,2651],{"id":2650},"before-and-after-a-phase","Before and After a Phase",[29,2653,2654,2655,2658,2659,2662],{},"Layers might need to do some standard stuff before and after a phase is applied\nto all features for all layers. Use ",[150,2656,2657],{},"GetContext()"," method to do stuff before,\nand ",[150,2660,2661],{},"onDispose:"," delegate to do stuff after.",[506,2664,2666],{"className":508,"code":2665,"language":510,"meta":52,"style":52},"public class LayerX : LayerBase\u003CAddServices>\n{\n    readonly LayerXConfiguration _configuration = new();\n\n    protected override PhaseContext GetContext(AddServices phase)\n    {\n        var services = Context.GetServiceCollection();\n\n        services.AddStandardStuffBefore();\n\n        phase.CreateContext(_configuration,\n            onDispose: () => services.AddStandardStuffAfter()\n        );\n    }\n}\n",[150,2667,2668,2686,2690,2704,2708,2726,2730,2748,2752,2764,2768,2782,2802,2807,2811],{"__ignoreMap":52},[37,2669,2670,2672,2674,2676,2678,2680,2682,2684],{"class":515,"line":516},[37,2671,1490],{"class":845},[37,2673,1493],{"class":845},[37,2675,1497],{"class":1496},[37,2677,1500],{"class":523},[37,2679,1480],{"class":1496},[37,2681,1662],{"class":523},[37,2683,2403],{"class":1496},[37,2685,1991],{"class":523},[37,2687,2688],{"class":515,"line":53},[37,2689,1508],{"class":523},[37,2691,2692,2694,2696,2698,2700,2702],{"class":515,"line":282},[37,2693,2414],{"class":845},[37,2695,2417],{"class":1496},[37,2697,2420],{"class":519},[37,2699,1901],{"class":543},[37,2701,1690],{"class":845},[37,2703,575],{"class":523},[37,2705,2706],{"class":515,"line":552},[37,2707,1706],{"emptyLinePlaceholder":10},[37,2709,2710,2712,2714,2716,2718,2720,2722,2724],{"class":515,"line":561},[37,2711,1587],{"class":845},[37,2713,1590],{"class":845},[37,2715,2439],{"class":1496},[37,2717,2442],{"class":534},[37,2719,537],{"class":523},[37,2721,2403],{"class":1496},[37,2723,2449],{"class":519},[37,2725,2014],{"class":523},[37,2727,2728],{"class":515,"line":567},[37,2729,549],{"class":523},[37,2731,2732,2734,2736,2738,2741,2743,2746],{"class":515,"line":1703},[37,2733,1895],{"class":845},[37,2735,2276],{"class":519},[37,2737,1901],{"class":543},[37,2739,2740],{"class":519}," Context",[37,2742,248],{"class":523},[37,2744,2745],{"class":534},"GetServiceCollection",[37,2747,575],{"class":523},[37,2749,2750],{"class":515,"line":1709},[37,2751,1706],{"emptyLinePlaceholder":10},[37,2753,2754,2757,2759,2762],{"class":515,"line":1729},[37,2755,2756],{"class":519},"        services",[37,2758,248],{"class":523},[37,2760,2761],{"class":534},"AddStandardStuffBefore",[37,2763,575],{"class":523},[37,2765,2766],{"class":515,"line":1734},[37,2767,1706],{"emptyLinePlaceholder":10},[37,2769,2770,2772,2774,2776,2778,2780],{"class":515,"line":1748},[37,2771,2460],{"class":519},[37,2773,248],{"class":523},[37,2775,2465],{"class":534},[37,2777,537],{"class":523},[37,2779,2470],{"class":519},[37,2781,1079],{"class":523},[37,2783,2784,2787,2790,2793,2795,2797,2800],{"class":515,"line":1753},[37,2785,2786],{"class":519},"            onDispose",[37,2788,2789],{"class":523},": () ",[37,2791,2792],{"class":543},"=>",[37,2794,2276],{"class":519},[37,2796,248],{"class":523},[37,2798,2799],{"class":534},"AddStandardStuffAfter",[37,2801,1674],{"class":523},[37,2803,2804],{"class":515,"line":1758},[37,2805,2806],{"class":523},"        );\n",[37,2808,2809],{"class":515,"line":1776},[37,2810,1700],{"class":523},[37,2812,2813],{"class":515,"line":1791},[37,2814,1518],{"class":523},[32,2816,2817,2821],{},[29,2818,2819],{},[37,2820,172],{},[29,2822,2823,2824,2826,2827,2829,2830,2832],{},"Notice that a layer has access to the ",[150,2825,1071],{}," instance through\n",[150,2828,1838],{}," property provided in ",[150,2831,1480],{}," base class.",[32,2834,2835,2839],{},[29,2836,2837],{},[37,2838,1095],{},[29,2840,2841,2843,2844,2846],{},[150,2842,2657],{}," method is called for every layer before applying any of them\nto features. And ",[150,2845,2661],{}," actions are called after applying these\ncontexts to all features.",[196,2848,2850],{"id":2849},"providing-multiple-targets","Providing Multiple Targets",[29,2852,2853],{},"It is possible to provide up to three configuration objects for the same phase.\nThere are two ways of providing multiple targets; at once or one by one.",[851,2855,2857],{"id":2856},"at-once","At Once",[29,2859,2860],{},"Below code demonstrates providing two configuration objects at once;",[506,2862,2864],{"className":508,"code":2863,"language":510,"meta":52,"style":52},"public class LayerX : LayerBase\u003CAddServices>\n{\n    readonly Configuration1 _configuration1 = new();\n    readonly Configuration2 _configuration2 = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContext(_configuration1, _configuration2);\n}\n",[150,2865,2866,2884,2888,2904,2920,2924,2944,2964],{"__ignoreMap":52},[37,2867,2868,2870,2872,2874,2876,2878,2880,2882],{"class":515,"line":516},[37,2869,1490],{"class":845},[37,2871,1493],{"class":845},[37,2873,1497],{"class":1496},[37,2875,1500],{"class":523},[37,2877,1480],{"class":1496},[37,2879,1662],{"class":523},[37,2881,2403],{"class":1496},[37,2883,1991],{"class":523},[37,2885,2886],{"class":515,"line":53},[37,2887,1508],{"class":523},[37,2889,2890,2892,2895,2898,2900,2902],{"class":515,"line":282},[37,2891,2414],{"class":845},[37,2893,2894],{"class":1496}," Configuration1",[37,2896,2897],{"class":519}," _configuration1",[37,2899,1901],{"class":543},[37,2901,1690],{"class":845},[37,2903,575],{"class":523},[37,2905,2906,2908,2911,2914,2916,2918],{"class":515,"line":552},[37,2907,2414],{"class":845},[37,2909,2910],{"class":1496}," Configuration2",[37,2912,2913],{"class":519}," _configuration2",[37,2915,1901],{"class":543},[37,2917,1690],{"class":845},[37,2919,575],{"class":523},[37,2921,2922],{"class":515,"line":561},[37,2923,1706],{"emptyLinePlaceholder":10},[37,2925,2926,2928,2930,2932,2934,2936,2938,2940,2942],{"class":515,"line":567},[37,2927,1587],{"class":845},[37,2929,1590],{"class":845},[37,2931,2439],{"class":1496},[37,2933,2442],{"class":534},[37,2935,537],{"class":523},[37,2937,2403],{"class":1496},[37,2939,2449],{"class":519},[37,2941,2452],{"class":523},[37,2943,2455],{"class":543},[37,2945,2946,2948,2950,2952,2954,2957,2959,2962],{"class":515,"line":1703},[37,2947,2460],{"class":519},[37,2949,248],{"class":523},[37,2951,2465],{"class":534},[37,2953,537],{"class":523},[37,2955,2956],{"class":519},"_configuration1",[37,2958,215],{"class":523},[37,2960,2961],{"class":519},"_configuration2",[37,2963,1931],{"class":523},[37,2965,2966],{"class":515,"line":1709},[37,2967,1518],{"class":523},[29,2969,2970],{},"This phase context will require an action with two parameter in a feature;",[506,2972,2974],{"className":508,"code":2973,"language":510,"meta":52,"style":52},"...\npublic void Configure(LayerConfigurator configurator)\n{\n    configurator.Configure((Configuration1 configuration1, Configuration2 configuration2) =>\n    {\n        // use both objects to configure\n    });\n}\n...\n",[150,2975,2976,2982,3000,3004,3034,3038,3043,3048,3052],{"__ignoreMap":52},[37,2977,2978,2980],{"class":515,"line":516},[37,2979,927],{"class":543},[37,2981,558],{"class":523},[37,2983,2984,2986,2988,2991,2993,2995,2998],{"class":515,"line":53},[37,2985,1490],{"class":845},[37,2987,1881],{"class":845},[37,2989,2990],{"class":534}," Configure",[37,2992,537],{"class":523},[37,2994,1447],{"class":1496},[37,2996,2997],{"class":519}," configurator",[37,2999,2014],{"class":523},[37,3001,3002],{"class":515,"line":282},[37,3003,1508],{"class":523},[37,3005,3006,3009,3011,3013,3016,3019,3022,3024,3027,3030,3032],{"class":515,"line":552},[37,3007,3008],{"class":519},"    configurator",[37,3010,248],{"class":523},[37,3012,1444],{"class":534},[37,3014,3015],{"class":523},"((",[37,3017,3018],{"class":1496},"Configuration1",[37,3020,3021],{"class":519}," configuration1",[37,3023,215],{"class":523},[37,3025,3026],{"class":1496},"Configuration2",[37,3028,3029],{"class":519}," configuration2",[37,3031,2452],{"class":523},[37,3033,2455],{"class":543},[37,3035,3036],{"class":515,"line":561},[37,3037,549],{"class":523},[37,3039,3040],{"class":515,"line":567},[37,3041,3042],{"class":2125},"        // use both objects to configure\n",[37,3044,3045],{"class":515,"line":1703},[37,3046,3047],{"class":523},"    });\n",[37,3049,3050],{"class":515,"line":1709},[37,3051,1518],{"class":523},[37,3053,3054,3056],{"class":515,"line":1729},[37,3055,927],{"class":543},[37,3057,558],{"class":523},[29,3059,3060,3061,3065],{},"See ",[44,3062,3064],{"href":3063},"./feature","Feature"," for more information on using layer configurators\nfor features.",[851,3067,3069],{"id":3068},"one-by-one","One by One",[29,3071,3072],{},"Below code demonstrates providing configuration objects one by one;",[506,3074,3076],{"className":508,"code":3075,"language":510,"meta":52,"style":52},"public class LayerX : LayerBase\u003CAddServices>\n{\n    readonly Configuration1 _configuration1 = new();\n    readonly Configuration2 _configuration2 = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContextBuilder()\n            .Add(_configuration1)\n            .Add(_configuration2)\n            .Build()\n        ;\n}\n",[150,3077,3078,3096,3100,3114,3128,3132,3152,3163,3176,3188,3196,3201],{"__ignoreMap":52},[37,3079,3080,3082,3084,3086,3088,3090,3092,3094],{"class":515,"line":516},[37,3081,1490],{"class":845},[37,3083,1493],{"class":845},[37,3085,1497],{"class":1496},[37,3087,1500],{"class":523},[37,3089,1480],{"class":1496},[37,3091,1662],{"class":523},[37,3093,2403],{"class":1496},[37,3095,1991],{"class":523},[37,3097,3098],{"class":515,"line":53},[37,3099,1508],{"class":523},[37,3101,3102,3104,3106,3108,3110,3112],{"class":515,"line":282},[37,3103,2414],{"class":845},[37,3105,2894],{"class":1496},[37,3107,2897],{"class":519},[37,3109,1901],{"class":543},[37,3111,1690],{"class":845},[37,3113,575],{"class":523},[37,3115,3116,3118,3120,3122,3124,3126],{"class":515,"line":552},[37,3117,2414],{"class":845},[37,3119,2910],{"class":1496},[37,3121,2913],{"class":519},[37,3123,1901],{"class":543},[37,3125,1690],{"class":845},[37,3127,575],{"class":523},[37,3129,3130],{"class":515,"line":561},[37,3131,1706],{"emptyLinePlaceholder":10},[37,3133,3134,3136,3138,3140,3142,3144,3146,3148,3150],{"class":515,"line":567},[37,3135,1587],{"class":845},[37,3137,1590],{"class":845},[37,3139,2439],{"class":1496},[37,3141,2442],{"class":534},[37,3143,537],{"class":523},[37,3145,2403],{"class":1496},[37,3147,2449],{"class":519},[37,3149,2452],{"class":523},[37,3151,2455],{"class":543},[37,3153,3154,3156,3158,3161],{"class":515,"line":1703},[37,3155,2460],{"class":519},[37,3157,248],{"class":523},[37,3159,3160],{"class":534},"CreateContextBuilder",[37,3162,1674],{"class":523},[37,3164,3165,3168,3170,3172,3174],{"class":515,"line":1709},[37,3166,3167],{"class":523},"            .",[37,3169,1417],{"class":534},[37,3171,537],{"class":523},[37,3173,2956],{"class":519},[37,3175,2014],{"class":523},[37,3177,3178,3180,3182,3184,3186],{"class":515,"line":1729},[37,3179,3167],{"class":523},[37,3181,1417],{"class":534},[37,3183,537],{"class":523},[37,3185,2961],{"class":519},[37,3187,2014],{"class":523},[37,3189,3190,3192,3194],{"class":515,"line":1734},[37,3191,3167],{"class":523},[37,3193,1131],{"class":534},[37,3195,1674],{"class":523},[37,3197,3198],{"class":515,"line":1748},[37,3199,3200],{"class":523},"        ;\n",[37,3202,3203],{"class":515,"line":1753},[37,3204,1518],{"class":523},[29,3206,3207],{},"This phase context will require two different actions in a feature;",[506,3209,3211],{"className":508,"code":3210,"language":510,"meta":52,"style":52},"...\npublic void Configure(LayerConfigurator configurator)\n{\n    configurator.Configure((Configuration1 configuration1) =>\n    {\n        // configure one by one\n    });\n\n    configurator.Configure((Configuration2 configuration2) =>\n    {\n        // configure one by one\n    });\n}\n...\n",[150,3212,3213,3219,3235,3239,3257,3261,3266,3270,3274,3292,3296,3300,3304,3308],{"__ignoreMap":52},[37,3214,3215,3217],{"class":515,"line":516},[37,3216,927],{"class":543},[37,3218,558],{"class":523},[37,3220,3221,3223,3225,3227,3229,3231,3233],{"class":515,"line":53},[37,3222,1490],{"class":845},[37,3224,1881],{"class":845},[37,3226,2990],{"class":534},[37,3228,537],{"class":523},[37,3230,1447],{"class":1496},[37,3232,2997],{"class":519},[37,3234,2014],{"class":523},[37,3236,3237],{"class":515,"line":282},[37,3238,1508],{"class":523},[37,3240,3241,3243,3245,3247,3249,3251,3253,3255],{"class":515,"line":552},[37,3242,3008],{"class":519},[37,3244,248],{"class":523},[37,3246,1444],{"class":534},[37,3248,3015],{"class":523},[37,3250,3018],{"class":1496},[37,3252,3021],{"class":519},[37,3254,2452],{"class":523},[37,3256,2455],{"class":543},[37,3258,3259],{"class":515,"line":561},[37,3260,549],{"class":523},[37,3262,3263],{"class":515,"line":567},[37,3264,3265],{"class":2125},"        // configure one by one\n",[37,3267,3268],{"class":515,"line":1703},[37,3269,3047],{"class":523},[37,3271,3272],{"class":515,"line":1709},[37,3273,1706],{"emptyLinePlaceholder":10},[37,3275,3276,3278,3280,3282,3284,3286,3288,3290],{"class":515,"line":1729},[37,3277,3008],{"class":519},[37,3279,248],{"class":523},[37,3281,1444],{"class":534},[37,3283,3015],{"class":523},[37,3285,3026],{"class":1496},[37,3287,3029],{"class":519},[37,3289,2452],{"class":523},[37,3291,2455],{"class":543},[37,3293,3294],{"class":515,"line":1734},[37,3295,549],{"class":523},[37,3297,3298],{"class":515,"line":1748},[37,3299,3265],{"class":2125},[37,3301,3302],{"class":515,"line":1753},[37,3303,3047],{"class":523},[37,3305,3306],{"class":515,"line":1758},[37,3307,1518],{"class":523},[37,3309,3310,3312],{"class":515,"line":1776},[37,3311,927],{"class":543},[37,3313,558],{"class":523},[32,3315,3316,3320],{},[29,3317,3318],{},[37,3319,39],{},[29,3321,3322,3325,3326,3329],{},[150,3323,3324],{},"phase.CreateContext()"," is a helper method that utilizes\n",[150,3327,3328],{},"phase.CreateContextBuilder()"," behind the scenes.",[851,3331,3333],{"id":3332},"using-in-combination","Using in Combination",[29,3335,3336],{},"You may combine these two ways to provide configuration;",[506,3338,3340],{"className":508,"code":3339,"language":510,"meta":52,"style":52},"public class LayerX : LayerBase\u003CAddServices>\n{\n    readonly Configuration1 _configuration1 = new();\n    readonly Configuration2 _configuration2 = new();\n    readonly Configuration3 _configuration3 = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContextBuilder()\n            .Add(_configuration1, _configuration2)\n            .Add(_configuration3)\n            .Build()\n        ;\n}\n",[150,3341,3342,3360,3364,3378,3392,3408,3412,3432,3442,3458,3471,3479,3483],{"__ignoreMap":52},[37,3343,3344,3346,3348,3350,3352,3354,3356,3358],{"class":515,"line":516},[37,3345,1490],{"class":845},[37,3347,1493],{"class":845},[37,3349,1497],{"class":1496},[37,3351,1500],{"class":523},[37,3353,1480],{"class":1496},[37,3355,1662],{"class":523},[37,3357,2403],{"class":1496},[37,3359,1991],{"class":523},[37,3361,3362],{"class":515,"line":53},[37,3363,1508],{"class":523},[37,3365,3366,3368,3370,3372,3374,3376],{"class":515,"line":282},[37,3367,2414],{"class":845},[37,3369,2894],{"class":1496},[37,3371,2897],{"class":519},[37,3373,1901],{"class":543},[37,3375,1690],{"class":845},[37,3377,575],{"class":523},[37,3379,3380,3382,3384,3386,3388,3390],{"class":515,"line":552},[37,3381,2414],{"class":845},[37,3383,2910],{"class":1496},[37,3385,2913],{"class":519},[37,3387,1901],{"class":543},[37,3389,1690],{"class":845},[37,3391,575],{"class":523},[37,3393,3394,3396,3399,3402,3404,3406],{"class":515,"line":561},[37,3395,2414],{"class":845},[37,3397,3398],{"class":1496}," Configuration3",[37,3400,3401],{"class":519}," _configuration3",[37,3403,1901],{"class":543},[37,3405,1690],{"class":845},[37,3407,575],{"class":523},[37,3409,3410],{"class":515,"line":567},[37,3411,1706],{"emptyLinePlaceholder":10},[37,3413,3414,3416,3418,3420,3422,3424,3426,3428,3430],{"class":515,"line":1703},[37,3415,1587],{"class":845},[37,3417,1590],{"class":845},[37,3419,2439],{"class":1496},[37,3421,2442],{"class":534},[37,3423,537],{"class":523},[37,3425,2403],{"class":1496},[37,3427,2449],{"class":519},[37,3429,2452],{"class":523},[37,3431,2455],{"class":543},[37,3433,3434,3436,3438,3440],{"class":515,"line":1709},[37,3435,2460],{"class":519},[37,3437,248],{"class":523},[37,3439,3160],{"class":534},[37,3441,1674],{"class":523},[37,3443,3444,3446,3448,3450,3452,3454,3456],{"class":515,"line":1729},[37,3445,3167],{"class":523},[37,3447,1417],{"class":534},[37,3449,537],{"class":523},[37,3451,2956],{"class":519},[37,3453,215],{"class":523},[37,3455,2961],{"class":519},[37,3457,2014],{"class":523},[37,3459,3460,3462,3464,3466,3469],{"class":515,"line":1734},[37,3461,3167],{"class":523},[37,3463,1417],{"class":534},[37,3465,537],{"class":523},[37,3467,3468],{"class":519},"_configuration3",[37,3470,2014],{"class":523},[37,3472,3473,3475,3477],{"class":515,"line":1748},[37,3474,3167],{"class":523},[37,3476,1131],{"class":534},[37,3478,1674],{"class":523},[37,3480,3481],{"class":515,"line":1753},[37,3482,3200],{"class":523},[37,3484,3485],{"class":515,"line":1758},[37,3486,1518],{"class":523},[29,3488,3489],{},"This phase context will require two different actions;",[1196,3491,3492,3498],{},[318,3493,3494,3495],{},"For the first two configuration objects: ",[150,3496,3497],{},"(Configuration1 configuration1, Configuration2 configuration2)",[318,3499,3500,3501,248],{},"For the last configuration object: ",[150,3502,3503],{},"(Configuration3 configuration3)",[1324,3505,3506],{},"html pre.shiki code .scz_3, html code.shiki .scz_3{--shiki-default:#569CD6}html pre.shiki code .sNl3T, html code.shiki .sNl3T{--shiki-default:#4EC9B0}html pre.shiki code .sMfK5, html code.shiki .sMfK5{--shiki-default:#E6E6E6}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .s3F5K, html code.shiki .s3F5K{--shiki-default:#9CDCFE}html pre.shiki code .sTNBD, html code.shiki .sTNBD{--shiki-default:#D4D4D4}html pre.shiki code .sKc5r, html code.shiki .sKc5r{--shiki-default:#CE9178}html pre.shiki code .sCudf, html code.shiki .sCudf{--shiki-default:#DCDCAA}html pre.shiki code .sYbnZ, html code.shiki .sYbnZ{--shiki-default:#C586C0}html pre.shiki code .sOLPB, html code.shiki .sOLPB{--shiki-default:#6A9955}",{"title":52,"searchDepth":53,"depth":53,"links":3508},[3509,3510,3514,3519],{"id":1379,"depth":53,"text":1380},{"id":1473,"depth":53,"text":1474,"children":3511},[3512],{"id":1533,"depth":282,"text":3513},"Id of a Layer",{"id":1616,"depth":53,"text":1617,"children":3515},[3516,3517,3518],{"id":1825,"depth":282,"text":1826},{"id":1953,"depth":282,"text":1087},{"id":2319,"depth":282,"text":2320},{"id":2373,"depth":53,"text":2374,"children":3520},[3521,3523,3524],{"id":2507,"depth":282,"text":3522},"Using non-generic LayerBase",{"id":2650,"depth":282,"text":2651},{"id":2849,"depth":282,"text":2850},"/architecture/layer","architecture/layer","tvngJ5hTU66Vh3IxDiER_DBG-_TyuhOzSsS9g2q13SY",{"id":3529,"title":3064,"extension":18,"meta":3530,"pages":56,"path":11,"position":56,"sort":56,"stem":4395,"__hash__":4396},"pageData/architecture/feature.md",{"description":3531,"body":3532},"Features consist of two parts; abstraction (port) and implementation (adapter).\nEach adapter exposes a class that implements IFeature interface.",{"type":22,"value":3533,"toc":4380},[3534,3536,3543,3545,3548,3550,3585,3587,3652,3659,3663,3674,3679,3742,3748,3758,3765,3815,3819,3830,3835,3895,3899,3913,3917,4022,4031,4042,4054,4070,4079,4083,4093,4154,4166,4170,4173,4177,4283,4288,4377],[25,3535,3064],{"id":101},[29,3537,3538,3539,3542],{},"Features consist of two parts; abstraction (port) and implementation (adapter).\nEach adapter exposes a class that implements ",[150,3540,3541],{},"IFeature"," interface.",[113,3544,1380],{"id":1379},[29,3546,3547],{},"For a consistent developer experience, follow below conventions when\nimplementing a new feature;",[196,3549,199],{"id":198},[1196,3551,3552,3558,3567],{},[318,3553,3554,3555,248],{},"Place all abstraction classes under a folder named after feature, e.g.,\n",[150,3556,3557],{},"Greeting/",[318,3559,3560,3561,215,3564,248],{},"Provide a configurator and an extension class for abstraction part, e.g.,\n",[150,3562,3563],{},"Greeting/GreetingConfigurator.cs",[150,3565,3566],{},"Greeting/GreetingExtensions.cs",[318,3568,3569,3570,3572,3573,558,3576],{},"Provide an ",[150,3571,1417],{}," method to add feature to an application, e.g.,\n",[150,3574,3575],{},"AddGreeting()",[1196,3577,3578],{},[318,3579,3580,3581,3584],{},"If feature allows multiple implementations, indicate this with a plural\nadd method, e.g., ",[150,3582,3583],{},"AddCodingStyles()",". Also accept a list of features\ninstead of a single feature.",[196,3586,234],{"id":233},[1196,3588,3589,3595,3611,3617,3620],{},[318,3590,3591,3592,248],{},"Place all implementation classes under their own folder in the abstraction\nfolder, e.g., ",[150,3593,3594],{},"Greeting/WelcomePage/",[318,3596,3597,3598,558,3601],{},"Provide an extension method with the implementation name to allow adding\nthat implementation, e.g., ",[150,3599,3600],{},"WelcomePage()",[1196,3602,3603],{},[318,3604,3605,3606,1406,3608,248],{},"This method should be in an extension class under ",[150,3607,499],{},[150,3609,3610],{},"Greeting/WelcomePage/WelcomePageGreetingExtensions.cs",[318,3612,3613,3614,248],{},"Name feature class after implementation name with abstraction name as a\nsuffix, e.g., ",[150,3615,3616],{},"WelcomePageGreetingFeature",[318,3618,3619],{},"Features depend on other features through their abstraction parts. Direct\ndependency between feature implementations is forbidden.",[318,3621,3622,3623,244,3626,558,3629],{},"To create a configuration overrider, add an extension and feature class\ndirectly under the feature folder, e.g.,\n",[150,3624,3625],{},"ConfigurationOverrider/ConfigurationOverriderExtensions.cs",[150,3627,3628],{},"ConfigurationOverrider/ConfigurationOverriderFeature.cs",[1196,3630,3631,3642],{},[318,3632,3633,3634,3637,3638,3641],{},"Unlike regular features, provide ",[150,3635,3636],{},"AddConfigurationOverrider()"," extension\nmethod directly to allow ",[150,3639,3640],{},"app.Features.AddConfigurationOverrider()","\nusage.",[318,3643,3644,3645,3647,3648,3651],{},"Implement ",[150,3646,3541],{}," in ",[150,3649,3650],{},"ConfigurationOverriderFeature"," where you add\nall your configuration overrides.",[29,3653,3654,3655,3658],{},"Please refer to existing features in ",[44,3656,1469],{"href":1467,"rel":3657},[311]," for\nexamples.",[113,3660,3662],{"id":3661},"creating-a-feature","Creating A Feature",[29,3664,3665,3666,3669,3670,3673],{},"To create a feature implementation, create a class using above conventions and\nimplement ",[150,3667,3668],{},"IFeature\u003CTConfigurator>"," where ",[150,3671,3672],{},"TConfigurator"," is the configurator\nclass of your feature abstraction.",[29,3675,3676],{},[150,3677,3678],{},"WelcomePageGreetingFeature.cs",[506,3680,3682],{"className":508,"code":3681,"language":510,"meta":52,"style":52},"public class WelcomePageGreetingFeature : IFeature\u003CGreetingConfigurator>\n{\n    public void Configure(LayerConfigurator configurator)\n    {\n        ...\n    }\n}\n",[150,3683,3684,3704,3708,3724,3728,3734,3738],{"__ignoreMap":52},[37,3685,3686,3688,3690,3693,3695,3697,3699,3702],{"class":515,"line":516},[37,3687,1490],{"class":845},[37,3689,1493],{"class":845},[37,3691,3692],{"class":1496}," WelcomePageGreetingFeature",[37,3694,1500],{"class":523},[37,3696,3541],{"class":1496},[37,3698,1662],{"class":523},[37,3700,3701],{"class":1496},"GreetingConfigurator",[37,3703,1991],{"class":523},[37,3705,3706],{"class":515,"line":53},[37,3707,1508],{"class":523},[37,3709,3710,3712,3714,3716,3718,3720,3722],{"class":515,"line":282},[37,3711,1761],{"class":845},[37,3713,1881],{"class":845},[37,3715,2990],{"class":534},[37,3717,537],{"class":523},[37,3719,1447],{"class":1496},[37,3721,2997],{"class":519},[37,3723,2014],{"class":523},[37,3725,3726],{"class":515,"line":552},[37,3727,549],{"class":523},[37,3729,3730,3732],{"class":515,"line":561},[37,3731,555],{"class":543},[37,3733,558],{"class":523},[37,3735,3736],{"class":515,"line":567},[37,3737,1700],{"class":523},[37,3739,3740],{"class":515,"line":1703},[37,3741,1518],{"class":523},[196,3743,3745,3747],{"id":3744},"id-of-a-feature",[150,3746,1536],{}," of a Feature",[29,3749,3750,1542,3752,3754,3755,3757],{},[150,3751,3541],{},[150,3753,1536],{}," property which should be unique per ",[150,3756,474],{},"\ninstance. By default, value of this property is name of the implementing\nfeature.",[29,3759,3760,3761,3764],{},"You can override its value by implementing ",[150,3762,3763],{},"IFeature.Id"," property in feature\nimplementation class as shown below;",[506,3766,3768],{"className":508,"code":3767,"language":510,"meta":52,"style":52},"public class WelcomePageGreetingFeature : IFeature\u003CGreetingConfigurator>\n{\n    public string Id => \"CustomFeatureId\";\n    ...\n}\n",[150,3769,3770,3788,3792,3807,3811],{"__ignoreMap":52},[37,3771,3772,3774,3776,3778,3780,3782,3784,3786],{"class":515,"line":516},[37,3773,1490],{"class":845},[37,3775,1493],{"class":845},[37,3777,3692],{"class":1496},[37,3779,1500],{"class":523},[37,3781,3541],{"class":1496},[37,3783,1662],{"class":523},[37,3785,3701],{"class":1496},[37,3787,1991],{"class":523},[37,3789,3790],{"class":515,"line":53},[37,3791,1508],{"class":523},[37,3793,3794,3796,3798,3800,3802,3805],{"class":515,"line":282},[37,3795,1761],{"class":845},[37,3797,1593],{"class":845},[37,3799,1596],{"class":519},[37,3801,754],{"class":543},[37,3803,3804],{"class":1601}," \"CustomFeatureId\"",[37,3806,1410],{"class":523},[37,3808,3809],{"class":515,"line":552},[37,3810,1513],{"class":523},[37,3812,3813],{"class":515,"line":561},[37,3814,1518],{"class":523},[196,3816,3818],{"id":3817},"disabling-a-feature","Disabling a Feature",[29,3820,3821,3822,3825,3826,3829],{},"To allow a feature to be disabled, you can provide a ",[150,3823,3824],{},"Disable"," method in your\nconfigurator which returns ",[150,3827,3828],{},"Feature.Empty\u003CTConfigurator>()",", this feautre does\nnot configure any layers.",[29,3831,3832],{},[150,3833,3834],{},"GreetingConfigurator.cs",[506,3836,3838],{"className":508,"code":3837,"language":510,"meta":52,"style":52},"public class GreetingConfigurator\n{\n    public IFeature\u003CGreetingConfigurator> Disabled() =>\n        Feature.Empty\u003CGreetingConfigurator>();\n}\n",[150,3839,3840,3849,3853,3874,3891],{"__ignoreMap":52},[37,3841,3842,3844,3846],{"class":515,"line":516},[37,3843,1490],{"class":845},[37,3845,1493],{"class":845},[37,3847,3848],{"class":1496}," GreetingConfigurator\n",[37,3850,3851],{"class":515,"line":53},[37,3852,1508],{"class":523},[37,3854,3855,3857,3860,3862,3864,3866,3869,3872],{"class":515,"line":282},[37,3856,1761],{"class":845},[37,3858,3859],{"class":1496}," IFeature",[37,3861,1662],{"class":523},[37,3863,3701],{"class":1496},[37,3865,1668],{"class":523},[37,3867,3868],{"class":534},"Disabled",[37,3870,3871],{"class":523},"() ",[37,3873,2455],{"class":543},[37,3875,3876,3879,3881,3884,3886,3888],{"class":515,"line":552},[37,3877,3878],{"class":519},"        Feature",[37,3880,248],{"class":523},[37,3882,3883],{"class":534},"Empty",[37,3885,1662],{"class":523},[37,3887,3701],{"class":1496},[37,3889,3890],{"class":523},">();\n",[37,3892,3893],{"class":515,"line":561},[37,3894,1518],{"class":523},[113,3896,3898],{"id":3897},"configuring-layers","Configuring Layers",[29,3900,3901,3902,3905,3906,3909,3910,3912],{},"To configure layers, a ",[150,3903,3904],{},"LayerCofigurator"," instance is passed to the\n",[150,3907,3908],{},"Configure()"," method of the ",[150,3911,3541],{}," interface. Using extension methods on\nthe given configurator, a feature accesses configuration targets of layers.",[29,3914,3915],{},[150,3916,3678],{},[506,3918,3920],{"className":508,"code":3919,"language":510,"meta":52,"style":52},"public class WelcomePageGreetingFeature : IFeature\u003CGreetingConfigurator>\n{\n    public void Configure(LayerConfigurator configurator)\n    {\n        configurator.ConfigureMiddlewareCollection(middlewares =>\n        {\n            middlewares.Add(app => app.UseWelcomePage());\n        });\n    }\n}\n",[150,3921,3922,3940,3944,3960,3964,3981,3985,4009,4014,4018],{"__ignoreMap":52},[37,3923,3924,3926,3928,3930,3932,3934,3936,3938],{"class":515,"line":516},[37,3925,1490],{"class":845},[37,3927,1493],{"class":845},[37,3929,3692],{"class":1496},[37,3931,1500],{"class":523},[37,3933,3541],{"class":1496},[37,3935,1662],{"class":523},[37,3937,3701],{"class":1496},[37,3939,1991],{"class":523},[37,3941,3942],{"class":515,"line":53},[37,3943,1508],{"class":523},[37,3945,3946,3948,3950,3952,3954,3956,3958],{"class":515,"line":282},[37,3947,1761],{"class":845},[37,3949,1881],{"class":845},[37,3951,2990],{"class":534},[37,3953,537],{"class":523},[37,3955,1447],{"class":1496},[37,3957,2997],{"class":519},[37,3959,2014],{"class":523},[37,3961,3962],{"class":515,"line":552},[37,3963,549],{"class":523},[37,3965,3966,3969,3971,3974,3976,3979],{"class":515,"line":561},[37,3967,3968],{"class":519},"        configurator",[37,3970,248],{"class":523},[37,3972,3973],{"class":534},"ConfigureMiddlewareCollection",[37,3975,537],{"class":523},[37,3977,3978],{"class":519},"middlewares",[37,3980,544],{"class":543},[37,3982,3983],{"class":515,"line":567},[37,3984,2577],{"class":523},[37,3986,3987,3990,3992,3994,3996,3998,4000,4002,4004,4007],{"class":515,"line":1703},[37,3988,3989],{"class":519},"            middlewares",[37,3991,248],{"class":523},[37,3993,1417],{"class":534},[37,3995,537],{"class":523},[37,3997,540],{"class":519},[37,3999,754],{"class":543},[37,4001,2025],{"class":519},[37,4003,248],{"class":523},[37,4005,4006],{"class":534},"UseWelcomePage",[37,4008,765],{"class":523},[37,4010,4011],{"class":515,"line":1709},[37,4012,4013],{"class":523},"        });\n",[37,4015,4016],{"class":515,"line":1729},[37,4017,1700],{"class":523},[37,4019,4020],{"class":515,"line":1734},[37,4021,1518],{"class":523},[32,4023,4024,4028],{},[29,4025,4026],{},[37,4027,172],{},[29,4029,4030],{},"Layers allow up to three configuration targets per configuration action.",[29,4032,4033,4035,4036,4038,4039,4041],{},[150,4034,1444],{}," method will be called multiple times, each time to configure a\ndifferent part of the application. ",[150,4037,1447],{}," ensures that given\nconfiguration action is only applied to the related target, e.g.,\n",[150,4040,1078],{}," in the above code.",[29,4043,4044,4045,4047,4048,4050,4051,4053],{},"A layer might provide the same object in different configurators. For example,\n",[150,4046,1111],{}," implements ",[150,4049,1082],{}," but ",[150,4052,1020],{},"\nprovides it with its interface not its concrete type.",[32,4055,4056,4060],{},[29,4057,4058],{},[37,4059,1095],{},[29,4061,4062,4063,4066,4067,248],{},"Do ",[186,4064,4065],{},"NOT"," cast given configuration objects to their other interfaces. A\nlayer provides a separate extension method, e.g.,\n",[150,4068,4069],{},"ConfigureEndpointRouteBuilder()",[32,4071,4072,4076],{},[29,4073,4074],{},[37,4075,39],{},[29,4077,4078],{},"The order of the configuration calls does not have an effect in the outcome.\nFeel free to organize these calls in the way you like.",[196,4080,4082],{"id":4081},"using-phase-artifacts","Using Phase Artifacts",[29,4084,4085,4086,4088,4089,4092],{},"To access and use objects stored in application context in a feature,\n",[150,4087,1447],{}," provides ",[150,4090,4091],{},"Use\u003CT>"," helper which will invoke given\naction with context phase artifact.",[506,4094,4096],{"className":508,"code":4095,"language":510,"meta":52,"style":52},"configurator.ConfigureApiModel(api =>\n{\n    configurator.UseDomainModel(domain =>\n    {\n        ...\n    });\n});\n",[150,4097,4098,4115,4119,4135,4139,4145,4149],{"__ignoreMap":52},[37,4099,4100,4103,4105,4108,4110,4113],{"class":515,"line":516},[37,4101,4102],{"class":519},"configurator",[37,4104,248],{"class":523},[37,4106,4107],{"class":534},"ConfigureApiModel",[37,4109,537],{"class":523},[37,4111,4112],{"class":519},"api",[37,4114,544],{"class":543},[37,4116,4117],{"class":515,"line":53},[37,4118,1508],{"class":523},[37,4120,4121,4123,4125,4128,4130,4133],{"class":515,"line":282},[37,4122,3008],{"class":519},[37,4124,248],{"class":523},[37,4126,4127],{"class":534},"UseDomainModel",[37,4129,537],{"class":523},[37,4131,4132],{"class":519},"domain",[37,4134,544],{"class":543},[37,4136,4137],{"class":515,"line":552},[37,4138,549],{"class":523},[37,4140,4141,4143],{"class":515,"line":561},[37,4142,555],{"class":543},[37,4144,558],{"class":523},[37,4146,4147],{"class":515,"line":567},[37,4148,3047],{"class":523},[37,4150,4151],{"class":515,"line":1703},[37,4152,4153],{"class":523},"});\n",[32,4155,4156,4160],{},[29,4157,4158],{},[37,4159,1095],{},[29,4161,4162,4163,4165],{},"Unlike configuration targets, phase artifacts may or may not exist in the\napplication context or not configured properly at the moment\n",[150,4164,1447],{}," applies configurations. Phase execution orders and\nconfigurations should be taken into consideration when using phase artifacts.",[196,4167,4169],{"id":4168},"including-an-option","Including an Option",[29,4171,4172],{},"To include an option in a feature, take the option as a parameter in\nconfigurator extension and pass it to the feature implementation as shown\nbelow;",[29,4174,4175],{},[150,4176,3678],{},[506,4178,4180],{"className":508,"code":4179,"language":510,"meta":52,"style":52},"public class WelcomePageGreetingFeature(string _path)\n    : IFeature\u003CGreetingConfigurator>\n{\n    public void Configure(LayerConfigurator configurator)\n    {\n        configurator.ConfigureApplicationBuilder(app =>\n        {\n            app.UseWelcomePage(_path);\n        });\n    }\n}\n",[150,4181,4182,4200,4212,4216,4232,4236,4251,4255,4271,4275,4279],{"__ignoreMap":52},[37,4183,4184,4186,4188,4190,4192,4195,4198],{"class":515,"line":516},[37,4185,1490],{"class":845},[37,4187,1493],{"class":845},[37,4189,3692],{"class":1496},[37,4191,537],{"class":523},[37,4193,4194],{"class":845},"string",[37,4196,4197],{"class":519}," _path",[37,4199,2014],{"class":523},[37,4201,4202,4204,4206,4208,4210],{"class":515,"line":53},[37,4203,2149],{"class":523},[37,4205,3541],{"class":1496},[37,4207,1662],{"class":523},[37,4209,3701],{"class":1496},[37,4211,1991],{"class":523},[37,4213,4214],{"class":515,"line":282},[37,4215,1508],{"class":523},[37,4217,4218,4220,4222,4224,4226,4228,4230],{"class":515,"line":552},[37,4219,1761],{"class":845},[37,4221,1881],{"class":845},[37,4223,2990],{"class":534},[37,4225,537],{"class":523},[37,4227,1447],{"class":1496},[37,4229,2997],{"class":519},[37,4231,2014],{"class":523},[37,4233,4234],{"class":515,"line":561},[37,4235,549],{"class":523},[37,4237,4238,4240,4242,4245,4247,4249],{"class":515,"line":567},[37,4239,3968],{"class":519},[37,4241,248],{"class":523},[37,4243,4244],{"class":534},"ConfigureApplicationBuilder",[37,4246,537],{"class":523},[37,4248,540],{"class":519},[37,4250,544],{"class":543},[37,4252,4253],{"class":515,"line":1703},[37,4254,2577],{"class":523},[37,4256,4257,4260,4262,4264,4266,4269],{"class":515,"line":1709},[37,4258,4259],{"class":519},"            app",[37,4261,248],{"class":523},[37,4263,4006],{"class":534},[37,4265,537],{"class":523},[37,4267,4268],{"class":519},"_path",[37,4270,1931],{"class":523},[37,4272,4273],{"class":515,"line":1729},[37,4274,4013],{"class":523},[37,4276,4277],{"class":515,"line":1734},[37,4278,1700],{"class":523},[37,4280,4281],{"class":515,"line":1748},[37,4282,1518],{"class":523},[29,4284,4285],{},[150,4286,4287],{},"WelcomePageGreetingExtensions.cs",[506,4289,4291],{"className":508,"code":4290,"language":510,"meta":52,"style":52},"public static class WelcomePageGreetingExtensions\n{\n    public static WelcomePageGreetingFeature WelcomePage(\n        this GreetingConfigurator source,\n        string? path = default\n    ) => new(path ?? \"/\");\n}\n",[150,4292,4293,4305,4309,4323,4336,4352,4373],{"__ignoreMap":52},[37,4294,4295,4297,4300,4302],{"class":515,"line":516},[37,4296,1490],{"class":845},[37,4298,4299],{"class":845}," static",[37,4301,1493],{"class":845},[37,4303,4304],{"class":1496}," WelcomePageGreetingExtensions\n",[37,4306,4307],{"class":515,"line":53},[37,4308,1508],{"class":523},[37,4310,4311,4313,4315,4317,4320],{"class":515,"line":282},[37,4312,1761],{"class":845},[37,4314,4299],{"class":845},[37,4316,3692],{"class":1496},[37,4318,4319],{"class":534}," WelcomePage",[37,4321,4322],{"class":523},"(\n",[37,4324,4325,4328,4331,4334],{"class":515,"line":552},[37,4326,4327],{"class":845},"        this",[37,4329,4330],{"class":1496}," GreetingConfigurator",[37,4332,4333],{"class":519}," source",[37,4335,1079],{"class":523},[37,4337,4338,4341,4344,4347,4349],{"class":515,"line":561},[37,4339,4340],{"class":845},"        string",[37,4342,4343],{"class":523},"? ",[37,4345,4346],{"class":519},"path",[37,4348,1901],{"class":543},[37,4350,4351],{"class":845}," default\n",[37,4353,4354,4357,4359,4361,4363,4365,4368,4371],{"class":515,"line":567},[37,4355,4356],{"class":523},"    ) ",[37,4358,2792],{"class":543},[37,4360,1690],{"class":845},[37,4362,537],{"class":523},[37,4364,4346],{"class":519},[37,4366,4367],{"class":543}," ??",[37,4369,4370],{"class":1601}," \"/\"",[37,4372,1931],{"class":523},[37,4374,4375],{"class":515,"line":1703},[37,4376,1518],{"class":523},[1324,4378,4379],{},"html pre.shiki code .scz_3, html code.shiki .scz_3{--shiki-default:#569CD6}html pre.shiki code .sNl3T, html code.shiki .sNl3T{--shiki-default:#4EC9B0}html pre.shiki code .sMfK5, html code.shiki .sMfK5{--shiki-default:#E6E6E6}html pre.shiki code .sCudf, html code.shiki .sCudf{--shiki-default:#DCDCAA}html pre.shiki code .s3F5K, html code.shiki .s3F5K{--shiki-default:#9CDCFE}html pre.shiki code .sTNBD, html code.shiki .sTNBD{--shiki-default:#D4D4D4}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html pre.shiki code .sKc5r, html code.shiki .sKc5r{--shiki-default:#CE9178}",{"title":52,"searchDepth":53,"depth":53,"links":4381},[4382,4386,4391],{"id":1379,"depth":53,"text":1380,"children":4383},[4384,4385],{"id":198,"depth":282,"text":199},{"id":233,"depth":282,"text":234},{"id":3661,"depth":53,"text":3662,"children":4387},[4388,4390],{"id":3744,"depth":282,"text":4389},"Id of a Feature",{"id":3817,"depth":282,"text":3818},{"id":3897,"depth":53,"text":3898,"children":4392},[4393,4394],{"id":4081,"depth":282,"text":4082},{"id":4168,"depth":282,"text":4169},"architecture/feature","sR0W5aKWhppsS19UHvMuCw-EwUUUn8FkV0ArGsWw5TE"]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{baseURL:"/",githubURL:"/mouseless/baked",matrixURL:"#baked:mouseless.org",content:{wsUrl:""},mdc:{components:{prose:true,map:{}},headings:{anchorLinks:{h1:false,h2:false,h3:false,h4:false,h5:false,h6:true}}}},app:{baseURL:"/",buildId:"53ac06a3-5107-47eb-b9f0-629f6a51e8ef",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>