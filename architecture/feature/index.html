<!DOCTYPE html>
<html >
<head><meta charset="utf-8">
<title>Feature</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Do">
<meta property="og:description" content="An opinionated framework for .NET">
<meta property="og:image" content="https://do.mouseless.codes/favicon.ico">
<meta property="og:image:width" content="50">
<meta property="og:image:height" content="50">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
<link rel="stylesheet" type="text/css" href="https://mouseless.github.io/brand/assets/css/primary.css">
<meta property="og:title" content="Feature">
<meta name="description" content="Features consist of two parts; abstraction (port) and implementation (adapter).
Each adapter exposes a class that implements IFeature interface.">
<meta property="og:description" content="Features consist of two parts; abstraction (port) and implementation (adapter).
Each adapter exposes a class that implements IFeature interface."><link rel="preload" as="fetch" crossorigin="anonymous" href="/architecture/feature/_payload.json"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.42953906.js"><link rel="preload" as="style" href="/_nuxt/entry.7dae836b.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/default.8d57dab1.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/nuxt-link.0ac70c5f.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/pageStore.7288330c.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/query.060b90cc.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/utils.3c075076.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/preview.ed3c5a8f.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_...content-page_.519f4c5f.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRenderer.f0f7145b.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRendererMarkdown.4d1adc87.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.a6ef77ff.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentDoc.caac30c0.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentQuery.f4a10327.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/asyncData.c60e0214.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH1.70e41e76.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.b763e70e.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCodeInline.fbb512fb.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH2.157f71a9.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH3.7c5c6c5a.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseOl.e21c7baf.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseLi.410104c3.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseA.caa9f4a9.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCode.ac66eb66.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseBlockquote.ee010974.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseStrong.9c220c9c.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/error-component.540201be.js"><link rel="stylesheet" href="/_nuxt/entry.7dae836b.css"><style>.content[data-v-a76652f4],.full[data-v-a76652f4]{box-sizing:border-box;margin:1em auto auto;max-width:1768px;min-width:270px}@media (max-width:1818px){.content[data-v-a76652f4],.full[data-v-a76652f4]{max-width:1280px}}@media (max-width:1330px){.content[data-v-a76652f4],.full[data-v-a76652f4]{max-width:1024px}}@media (max-width:1074px){.content[data-v-a76652f4],.full[data-v-a76652f4]{max-width:768px}}@media (max-width:818px){.content[data-v-a76652f4],.full[data-v-a76652f4]{max-width:90%}}.content[data-v-a76652f4]{display:grid;grid-template-areas:"side content" "side content";grid-template-columns:250px;grid-template-rows:65px 1fr}.side[data-v-a76652f4]{grid-area:side}article[data-v-a76652f4]{grid-area:content}@media (max-width:1330px){.content[data-v-a76652f4]{margin-top:0}}@media (max-width:1074px){.side[data-v-a76652f4]{grid-column-end:content;z-index:2}article[data-v-a76652f4]{grid-column-start:side}}</style><style>div.top[data-v-5ed39e2c]{border-bottom:2px solid #222}header[data-v-5ed39e2c]{align-items:center;box-sizing:border-box;display:flex;flex-direction:row;justify-content:space-between;margin:auto;max-width:1768px;min-width:270px}@media (max-width:1818px){header[data-v-5ed39e2c]{max-width:1280px}}@media (max-width:1330px){header[data-v-5ed39e2c]{max-width:1024px}}@media (max-width:1074px){header[data-v-5ed39e2c]{max-width:768px}}@media (max-width:818px){header[data-v-5ed39e2c]{max-width:90%}}header .bars[data-v-5ed39e2c]{display:none}div.logo[data-v-5ed39e2c]{margin:20px 0}div.logo a[data-v-5ed39e2c]:has(img.logo){display:block;height:25px}div.logo a:has(img.logo) img.do[data-v-5ed39e2c]:is(.logo){display:inline-block;height:25px}a[data-v-5ed39e2c]{color:#9b9b9b;cursor:pointer}a[data-v-5ed39e2c]:hover{color:#fa465b}nav a[data-v-5ed39e2c]{margin:10px;text-decoration:none}nav a.close[data-v-5ed39e2c]{display:none}nav a.active[data-v-5ed39e2c]{border-bottom:2px solid #fa465b;padding-bottom:22px}@media (max-width:1074px){a.bars[data-v-5ed39e2c]{display:block}nav[data-v-5ed39e2c]{background:#000;border-left:2px solid #222;display:none;height:100%;padding:20px;position:fixed;right:0;top:0;width:320px;z-index:99}nav a[data-v-5ed39e2c],nav.active[data-v-5ed39e2c]{display:block}nav a[data-v-5ed39e2c]{height:2em}nav a.close[data-v-5ed39e2c]{display:block;margin-bottom:1em}nav a.close i[data-v-5ed39e2c]{font-size:larger}nav a.active[data-v-5ed39e2c]{border:0;border-left:2px solid #fa465b;margin-left:-22px;padding-bottom:0;padding-left:29px}}@media (max-width:818px){nav[data-v-5ed39e2c]{width:calc(270px - 2em)}}</style><style>nav[data-v-4bf6f484]{align-self:start;margin-top:2.5em;position:sticky;top:1.5em}nav h4[data-v-4bf6f484]{display:none}nav ul[data-v-4bf6f484]{margin:0;padding:0}nav ul li[data-v-4bf6f484]{line-height:24px;list-style:none;margin:0}nav ul li a[data-v-4bf6f484]{border-radius:5px;color:#9b9b9b;display:block;font-size:14.4px!important;padding:10px;text-decoration:none}nav ul li a[data-v-4bf6f484]:hover{color:#fa465b}nav ul li a.active[data-v-4bf6f484]{background-color:#222}@media (max-width:1330px){nav[data-v-4bf6f484]{margin-top:3.5em}}@media (max-width:1074px){nav[data-v-4bf6f484]{background-color:#000;border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-top-left-radius:10px;border-top-right-radius:10px;margin-top:0;top:0;width:50%}nav h4[data-v-4bf6f484]{display:block;font-size:80%;text-transform:uppercase}nav h4 a[data-v-4bf6f484]{padding-left:0}nav ul[data-v-4bf6f484]{background-color:#111;border:2px solid #222;border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-top-left-radius:10px;border-top-right-radius:10px;box-sizing:border-box;display:none;padding:.5em;position:absolute;width:200%}nav ul.active[data-v-4bf6f484]{display:block}}</style><style>.container[data-v-4240d3a7]{display:flex}.container .content[data-v-4240d3a7]{margin:0 4em;width:100%}@media (max-width:1330px){.container[data-v-4240d3a7]{flex-direction:column-reverse;margin-left:4em}.container .content[data-v-4240d3a7]{margin:0}.container .no-toc[data-v-4240d3a7]{margin-top:1em}}@media (max-width:1074px){.container[data-v-4240d3a7]{margin-left:0}}</style><style>.full .content{margin:0!important}@media (max-width:1330px){.full .container{margin-left:0}}</style><style>div.bottom[data-v-a6beed8c]{border-top:2px solid #222;margin-top:4em}footer[data-v-a6beed8c]{align-items:flex-start;box-sizing:border-box;display:flex;flex-direction:row;font-size:smaller;justify-content:space-between;margin:1em auto;max-width:1768px;min-width:270px}@media (max-width:1818px){footer[data-v-a6beed8c]{max-width:1280px}}@media (max-width:1330px){footer[data-v-a6beed8c]{max-width:1024px}}@media (max-width:1074px){footer[data-v-a6beed8c]{max-width:768px}}@media (max-width:818px){footer[data-v-a6beed8c]{max-width:90%}}footer[data-v-a6beed8c],footer *[data-v-a6beed8c]{color:#9b9b9b}div.logo[data-v-a6beed8c]{margin:20px 0}div.logo a[data-v-a6beed8c]:has(img.logo){display:block;height:15px}div.logo a:has(img.logo) img.do[data-v-a6beed8c]:is(.logo){display:inline-block;height:15px;opacity:.5}div.logo span[data-v-a6beed8c]{display:inline-block;margin-top:1em}nav[data-v-a6beed8c]{text-align:right}nav a[data-v-a6beed8c]{display:block;margin:5px;text-decoration:none}nav a[data-v-a6beed8c]:hover,nav a:hover i[data-v-a6beed8c]{color:#fa465b}@media (max-width:818px){footer[data-v-a6beed8c]{display:block}footer nav[data-v-a6beed8c]{text-align:left}footer nav a[data-v-a6beed8c]{margin-left:0}}</style><style>.navigation-buttons-container[data-v-89494b79]{margin-top:4em}.navigation-buttons-container .button[data-v-89494b79]{margin-top:.9em;padding-left:.4em;padding-right:.4em}.navigation-buttons-container .button a[data-v-89494b79]{text-decoration:none}.navigation-buttons-container .button.left[data-v-89494b79]{float:left;text-align:left}.navigation-buttons-container .button.right[data-v-89494b79]{float:right;text-align:end}.navigation-buttons-container .button .link-text[data-v-89494b79]{color:#9b9b9b;font-size:.75em}.navigation-buttons-container .button .link-text h3[data-v-89494b79]{color:#fa465b;margin-top:.1em}.navigation-buttons-container .button .link-text i[data-v-89494b79]{color:#9b9b9b}</style><style>h4[data-v-bf4f74b1]{margin-bottom:.5em;padding-left:1em}nav[data-v-bf4f74b1]{text-wrap:nowrap;align-self:start;font-size:12.8px;margin-top:2.5em;overflow:hidden;position:sticky;top:1.5em;width:250px}nav ul[data-v-bf4f74b1]{margin:0;padding-left:0}nav ul li[data-v-bf4f74b1]{line-height:24px;list-style:none;margin:0}nav ul li a[data-v-bf4f74b1]{border-left:3px solid transparent;color:#9b9b9b;cursor:pointer;display:block;margin-top:.25em;overflow:hidden;padding-left:1em;text-decoration:none;text-overflow:ellipsis}nav ul li a[data-v-bf4f74b1]:hover{color:#fa465b}nav ul li a.active[data-v-bf4f74b1]{border-left-color:#fa465b}nav ul li a.return-to-top[data-v-bf4f74b1]{margin-top:.5em}nav ul li ul[data-v-bf4f74b1]{margin-bottom:.25em}nav ul li ul a[data-v-bf4f74b1]{padding-left:2em}@media (max-width:1818px){a[data-v-bf4f74b1]{font-size:12.8px!important}}@media (max-width:1330px){nav[data-v-bf4f74b1]{background-color:#000;box-shadow:0 5px 5px 0 #000;margin:0 0 -2.5em;text-align:right;top:0;width:100%}nav h4 a[data-v-bf4f74b1]{display:inline-block;padding-left:0;padding-right:0}nav>ul[data-v-bf4f74b1]{background-color:#111;border:2px solid #222;border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-top-left-radius:10px;border-top-right-radius:10px;display:none;margin-bottom:2.5em;padding:1em 1em 1em 0;text-align:left}nav>ul.active[data-v-bf4f74b1]{display:block}nav ul li a.active[data-v-bf4f74b1]:before{left:0}}</style><style>a[data-v-beca98b0]{font-family:Open Sans}i[data-v-beca98b0]{margin-left:.3em}</style><style>pre code .line{display:block;min-height:1rem}</style><style>blockquote[data-v-24cf15be]{align-items:flex-start;border:2px solid;border-radius:10px;display:flex;flex-direction:row;justify-content:flex-start;margin:15px 0;padding:0 1em}blockquote i[data-v-24cf15be]{padding-right:1em;padding-top:1.2em}blockquote div[data-v-24cf15be]{width:100%}blockquote.info[data-v-24cf15be]{background-color:#001c78;border-color:#0028ab;color:#f8f9ff}blockquote.info i[data-v-24cf15be]{color:#7898ff}blockquote.warning[data-v-24cf15be]{background-color:#312b00;border-color:#645800;color:#fff5b1}blockquote.warning i[data-v-24cf15be]{color:#ffe631}blockquote.tip[data-v-24cf15be]{background-color:#003600;border-color:#006900;color:#b6ffb6}blockquote.tip i[data-v-24cf15be]{color:#36ff36}blockquote.danger[data-v-24cf15be]{background-color:#4c0000;border-color:#7f0000;color:#fcc}blockquote.danger i[data-v-24cf15be]{color:#ff4c4c}blockquote.default[data-v-24cf15be]{background-color:#232323;border-color:#3d3d3d;color:#e2e2e2}blockquote.default i[data-v-24cf15be]{color:#a3a3a3}</style></head>
<body ><div id="__nuxt"><div data-v-a76652f4><div class="top" data-v-a76652f4 data-v-5ed39e2c><header data-v-5ed39e2c><div class="logo" data-v-5ed39e2c><a href="/" class="" data-v-5ed39e2c><img class="do logo" data-v-5ed39e2c></a></div><a class="bars" data-v-5ed39e2c><i class="fa-solid fa-bars" data-v-5ed39e2c></i></a><nav class="" data-v-5ed39e2c><a class="close" data-v-5ed39e2c><i class="fa-solid fa-close" data-v-5ed39e2c></i></a><!--[--><a href="/blueprints" class="" data-v-5ed39e2c>Blueprints</a><a href="/features" class="" data-v-5ed39e2c>Features</a><a href="/layers" class="" data-v-5ed39e2c>Layers</a><a href="/architecture" class="active" data-v-5ed39e2c>Architecture</a><a href="/release-notes" class="" data-v-5ed39e2c>Release Notes</a><!--]--><a href="https://github.com/mouseless/do" rel="noopener noreferrer" target="_blank" data-v-5ed39e2c><i class="fa-brands fa-github" data-v-5ed39e2c></i></a></nav></header></div><div class="content" data-v-a76652f4><nav class="side" data-v-a76652f4 data-v-4bf6f484><h4 data-v-4bf6f484><a data-v-4bf6f484>Pages</a></h4><ul class="" data-v-4bf6f484><li data-v-4bf6f484><!--[--><!--]--></li></ul></nav><article data-v-a76652f4><!--[--><!--[--><div class="container" data-v-4240d3a7><div class="content" data-v-4240d3a7><div class="toc-root" data-v-4240d3a7><h1 id="feature"><!--[-->Feature<!--]--></h1><p><!--[-->Features consist of two parts; abstraction (port) and implementation (adapter).
Each adapter exposes a class that implements <code><!--[-->IFeature<!--]--></code> interface.<!--]--></p><h2 id="conventions"><!--[-->Conventions<!--]--></h2><p><!--[-->For a consistent developer experience, follow below conventions when
implementing a new feature;<!--]--></p><h3 id="abstraction"><!--[-->Abstraction<!--]--></h3><ol><!--[--><li><!--[-->Place all abstraction classes under a folder named after feature, e.g.,
<code><!--[-->Greeting/<!--]--></code>.<!--]--></li><li><!--[-->Provide a configurator and an extension class for abstraction part, e.g.,
<code><!--[-->Greeting/GreetingConfigurator.cs<!--]--></code>, <code><!--[-->Greeting/GreetingExtensions.cs<!--]--></code>.<!--]--></li><li><!--[-->Provide an <code><!--[-->Add<!--]--></code> method to add feature to an application, e.g.,
<code><!--[-->AddGreeting()<!--]--></code>.<!--]--></li><!--]--></ol><h3 id="implementation"><!--[-->Implementation<!--]--></h3><ol><!--[--><li><!--[-->Place all implementation classes under their own folder in the abstraction
folder, e.g., <code><!--[-->Greeting/WelcomePage/<!--]--></code>.<!--]--></li><li><!--[-->Provide an extension method with the implementation name to allow adding
that implementation, e.g., <code><!--[-->WelcomePage()<!--]--></code>.<ol><!--[--><li><!--[-->This method should be in an extension class under <code><!--[-->Do<!--]--></code> namespace, e.g.,
<code><!--[-->Greeting/WelcomePage/WelcomePageGreetingExtensions.cs<!--]--></code>.<!--]--></li><!--]--></ol><!--]--></li><li><!--[-->Name feature class after implementation name with abstraction name as a
suffix, e.g., <code><!--[-->WelcomePageGreetingFeature<!--]--></code>.<!--]--></li><li><!--[-->Features depend on other features through their abstraction parts. Direct
dependency between feature implementations is forbidden.<!--]--></li><li><!--[-->To create a configuration overrider, add an extension and feature class
directly under the feature folder, e.g.,
<code><!--[-->ConfigurationOverrider/ConfigurationOverriderExtensions.cs<!--]--></code> and
<code><!--[-->ConfigurationOverrider/ConfigurationOverriderFeature.cs<!--]--></code>.<ol><!--[--><li><!--[-->Unlike regular features, provide <code><!--[-->AddConfigurationOverrider()<!--]--></code> extension
method directly to allow <code><!--[-->app.Features.AddConfigurationOverrider()<!--]--></code>
usage.<!--]--></li><li><!--[-->Implement <code><!--[-->IFeature<!--]--></code> in <code><!--[-->ConfigurationOverriderFeature<!--]--></code> where you add
all your configuration overrides.<!--]--></li><!--]--></ol><!--]--></li><!--]--></ol><p><!--[-->Please refer to existing features in <a href="https://github.com/mouseless/do" rel="nofollow" target="_blank" data-v-beca98b0><!--[-->github.com/mouseless/do<!--]--><i class="fa-solid fa-arrow-up-right-from-square" data-v-beca98b0></i></a> for examples.<!--]--></p><h2 id="creating-a-feature"><!--[-->Creating A Feature<!--]--></h2><p><!--[-->To create a feature implementation, create a class using above conventions and
implement <code><!--[-->IFeature&lt;TConfigurator&gt;<!--]--></code> where <code><!--[-->TConfigurator<!--]--></code> is the configurator
class of your feature abstraction.<!--]--></p><p><!--[--><code><!--[-->WelcomePageGreetingFeature.cs<!--]--></code><!--]--></p><!--[--><pre><code><span class="line" line="1"><span class="ct-cf5874">public</span><span class="ct-d94424"> </span><span class="ct-cf5874">class</span><span class="ct-d94424"> </span><span class="ct-f56f79">WelcomePageGreetingFeature</span><span class="ct-d94424"> : </span><span class="ct-f56f79">IFeature</span><span class="ct-d94424">&lt;</span><span class="ct-f56f79">GreetingConfigurator</span><span class="ct-d94424">&gt;
</span></span><span class="line" line="2"><span class="ct-d94424">{
</span></span><span class="line" line="3"><span class="ct-d94424">    </span><span class="ct-cf5874">public</span><span class="ct-d94424"> </span><span class="ct-cf5874">void</span><span class="ct-d94424"> </span><span class="ct-e06acd">Configure</span><span class="ct-d94424">(</span><span class="ct-f56f79">LayerConfigurator</span><span class="ct-d94424"> </span><span class="ct-2392fa">configurator</span><span class="ct-d94424">)
</span></span><span class="line" line="4"><span class="ct-d94424">    {
</span></span><span class="line" line="5"><span class="ct-d94424">        ...
</span></span><span class="line" line="6"><span class="ct-d94424">    }
</span></span><span class="line" line="7"><span class="ct-d94424">}</span></span></code></pre><!--]--><h3 id="id-of-a-feature"><!--[--><code><!--[-->Id<!--]--></code> of a Feature<!--]--></h3><p><!--[--><code><!--[-->IFeature<!--]--></code> has an <code><!--[-->Id<!--]--></code> property which should be unique per <code><!--[-->Application<!--]--></code>
instance. By default, value of this property is name of the implementing
feature.<!--]--></p><p><!--[-->You can override its value by implementing <code><!--[-->IFeature.Id<!--]--></code> property in feature
implementation class as shown below;<!--]--></p><!--[--><pre><code><span class="line" line="1"><span class="ct-cf5874">public</span><span class="ct-d94424"> </span><span class="ct-cf5874">class</span><span class="ct-d94424"> </span><span class="ct-f56f79">WelcomePageGreetingFeature</span><span class="ct-d94424"> : </span><span class="ct-f56f79">IFeature</span><span class="ct-d94424">&lt;</span><span class="ct-f56f79">GreetingConfigurator</span><span class="ct-d94424">&gt;
</span></span><span class="line" line="2"><span class="ct-d94424">{
</span></span><span class="line" line="3"><span class="ct-d94424">    </span><span class="ct-cf5874">public</span><span class="ct-d94424"> </span><span class="ct-cf5874">string</span><span class="ct-d94424"> </span><span class="ct-2392fa">Id</span><span class="ct-d94424"> =&gt; </span><span class="ct-43250b">&quot;CustomFeatureId&quot;</span><span class="ct-d94424">;
</span></span><span class="line" line="4"><span class="ct-d94424">    ...
</span></span><span class="line" line="5"><span class="ct-d94424">}</span></span></code></pre><!--]--><h3 id="disabling-a-feature"><!--[-->Disabling a Feature<!--]--></h3><p><!--[-->To allow a feature to be disabled, you can provide a <code><!--[-->Disable<!--]--></code> method in your
configurator which returns <code><!--[-->Feature.Empty&lt;TConfigurator&gt;()<!--]--></code>.<!--]--></p><p><!--[--><code><!--[-->GreetingConfigurator.cs<!--]--></code><!--]--></p><!--[--><pre><code><span class="line" line="1"><span class="ct-cf5874">public</span><span class="ct-d94424"> </span><span class="ct-cf5874">class</span><span class="ct-d94424"> </span><span class="ct-f56f79">GreetingConfigurator
</span></span><span class="line" line="2"><span class="ct-d94424">{
</span></span><span class="line" line="3"><span class="ct-d94424">    </span><span class="ct-cf5874">public</span><span class="ct-d94424"> </span><span class="ct-f56f79">IFeature</span><span class="ct-d94424">&lt;</span><span class="ct-f56f79">GreetingConfigurator</span><span class="ct-d94424">&gt; </span><span class="ct-e06acd">Disabled</span><span class="ct-d94424">() =&gt;
</span></span><span class="line" line="4"><span class="ct-d94424">        </span><span class="ct-2392fa">Feature</span><span class="ct-d94424">.</span><span class="ct-e06acd">Empty</span><span class="ct-d94424">&lt;</span><span class="ct-f56f79">GreetingConfigurator</span><span class="ct-d94424">&gt;();
</span></span><span class="line" line="5"><span class="ct-d94424">}</span></span></code></pre><!--]--><h2 id="configuring-layers"><!--[-->Configuring Layers<!--]--></h2><p><!--[-->To configure layers, a <code><!--[-->LayerCofigurator<!--]--></code> instance is passed to the
<code><!--[-->Configure()<!--]--></code> method of the <code><!--[-->IFeature<!--]--></code> interface. Using extension methods on
the given configurator, a feature accesses configuration targets of layers.<!--]--></p><p><!--[--><code><!--[-->WelcomePageGreetingFeature.cs<!--]--></code><!--]--></p><!--[--><pre><code><span class="line" line="1"><span class="ct-cf5874">public</span><span class="ct-d94424"> </span><span class="ct-cf5874">class</span><span class="ct-d94424"> </span><span class="ct-f56f79">WelcomePageGreetingFeature</span><span class="ct-d94424"> : </span><span class="ct-f56f79">IFeature</span><span class="ct-d94424">&lt;</span><span class="ct-f56f79">GreetingConfigurator</span><span class="ct-d94424">&gt;
</span></span><span class="line" line="2"><span class="ct-d94424">{
</span></span><span class="line" line="3"><span class="ct-d94424">    </span><span class="ct-cf5874">public</span><span class="ct-d94424"> </span><span class="ct-cf5874">void</span><span class="ct-d94424"> </span><span class="ct-e06acd">Configure</span><span class="ct-d94424">(</span><span class="ct-f56f79">LayerConfigurator</span><span class="ct-d94424"> </span><span class="ct-2392fa">configurator</span><span class="ct-d94424">)
</span></span><span class="line" line="4"><span class="ct-d94424">    {
</span></span><span class="line" line="5"><span class="ct-d94424">        </span><span class="ct-2392fa">configurator</span><span class="ct-d94424">.</span><span class="ct-e06acd">ConfigureMiddlewareCollection</span><span class="ct-d94424">(</span><span class="ct-2392fa">middlewares</span><span class="ct-d94424"> =&gt;
</span></span><span class="line" line="6"><span class="ct-d94424">        {
</span></span><span class="line" line="7"><span class="ct-d94424">            </span><span class="ct-2392fa">middlewares</span><span class="ct-d94424">.</span><span class="ct-e06acd">Add</span><span class="ct-d94424">(</span><span class="ct-2392fa">app</span><span class="ct-d94424"> =&gt; </span><span class="ct-2392fa">app</span><span class="ct-d94424">.</span><span class="ct-e06acd">UseWelcomePage</span><span class="ct-d94424">());
</span></span><span class="line" line="8"><span class="ct-d94424">        });
</span></span><span class="line" line="9"><span class="ct-d94424">    }
</span></span><span class="line" line="10"><span class="ct-d94424">}</span></span></code></pre><!--]--><blockquote class="info" data-v-24cf15be><i class="fa fa-circle-info" data-v-24cf15be></i><div data-v-24cf15be><!--[--><p><!--[-->Layers allow up to three configuration targets per configuration action.<!--]--></p><!--]--></div></blockquote><p><!--[--><code><!--[-->Configure<!--]--></code> method will be called multiple times, each time to configure a
different part of the application. <code><!--[-->LayerConfigurator<!--]--></code> ensures that given
configuration action is only applied to the related target, e.g.,
<code><!--[-->IMiddlewareCollection<!--]--></code> in the above code.<!--]--></p><p><!--[-->A layer might provide the same object in different configurators. For example,
<code><!--[-->WebApplication<!--]--></code> implements <code><!--[-->IEndpointRouteBuilder<!--]--></code> but <code><!--[-->HttpServerLayer<!--]--></code>
provides it with its interface not its concrete type.<!--]--></p><blockquote class="warning" data-v-24cf15be><i class="fa fa-warning" data-v-24cf15be></i><div data-v-24cf15be><!--[--><p><!--[-->Do <strong><!--[-->NOT<!--]--></strong> cast given configuration objects to their other interfaces. A
layer provides a separate extension method, e.g.,
<code><!--[-->ConfigureEndpointRouteBuilder()<!--]--></code>.<!--]--></p><!--]--></div></blockquote><blockquote class="tip" data-v-24cf15be><i class="fa fa-lightbulb" data-v-24cf15be></i><div data-v-24cf15be><!--[--><p><!--[-->The order of the configuration calls does not have an effect in the outcome.
Feel free to organize these calls in the way you like.<!--]--></p><!--]--></div></blockquote><h3 id="including-an-option"><!--[-->Including an Option<!--]--></h3><p><!--[-->To include an option in a feature, take the option as a parameter in
configurator extension and pass it to the feature implementation as shown
below;<!--]--></p><p><!--[--><code><!--[-->WelcomePageGreetingFeature.cs<!--]--></code><!--]--></p><!--[--><pre><code><span class="line" line="1"><span class="ct-cf5874">public</span><span class="ct-d94424"> </span><span class="ct-cf5874">class</span><span class="ct-d94424"> </span><span class="ct-f56f79">WelcomePageGreetingFeature</span><span class="ct-d94424"> : </span><span class="ct-f56f79">IFeature</span><span class="ct-d94424">&lt;</span><span class="ct-f56f79">GreetingConfigurator</span><span class="ct-d94424">&gt;
</span></span><span class="line" line="2"><span class="ct-d94424">{
</span></span><span class="line" line="3"><span class="ct-d94424">    </span><span class="ct-cf5874">readonly</span><span class="ct-d94424"> </span><span class="ct-cf5874">string</span><span class="ct-d94424"> </span><span class="ct-2392fa">_path</span><span class="ct-d94424">;
</span></span><span class="line" line="4"><span>
</span></span><span class="line" line="5"><span class="ct-d94424">    </span><span class="ct-cf5874">public</span><span class="ct-d94424"> </span><span class="ct-e06acd">WelcomePageGreetingFeature</span><span class="ct-d94424">(</span><span class="ct-cf5874">string</span><span class="ct-d94424"> </span><span class="ct-2392fa">path</span><span class="ct-d94424">) =&gt; </span><span class="ct-2392fa">_path</span><span class="ct-d94424"> = </span><span class="ct-2392fa">path</span><span class="ct-d94424">;
</span></span><span class="line" line="6"><span>
</span></span><span class="line" line="7"><span class="ct-d94424">    </span><span class="ct-cf5874">public</span><span class="ct-d94424"> </span><span class="ct-cf5874">void</span><span class="ct-d94424"> </span><span class="ct-e06acd">Configure</span><span class="ct-d94424">(</span><span class="ct-f56f79">LayerConfigurator</span><span class="ct-d94424"> </span><span class="ct-2392fa">configurator</span><span class="ct-d94424">)
</span></span><span class="line" line="8"><span class="ct-d94424">    {
</span></span><span class="line" line="9"><span class="ct-d94424">        </span><span class="ct-2392fa">configurator</span><span class="ct-d94424">.</span><span class="ct-e06acd">ConfigureApplicationBuilder</span><span class="ct-d94424">(</span><span class="ct-2392fa">app</span><span class="ct-d94424"> =&gt;
</span></span><span class="line" line="10"><span class="ct-d94424">        {
</span></span><span class="line" line="11"><span class="ct-d94424">            </span><span class="ct-2392fa">app</span><span class="ct-d94424">.</span><span class="ct-e06acd">UseWelcomePage</span><span class="ct-d94424">(</span><span class="ct-2392fa">_path</span><span class="ct-d94424">);
</span></span><span class="line" line="12"><span class="ct-d94424">        });
</span></span><span class="line" line="13"><span class="ct-d94424">    }
</span></span><span class="line" line="14"><span class="ct-d94424">}</span></span></code></pre><!--]--><p><!--[--><code><!--[-->WelcomePageGreetingExtensions.cs<!--]--></code><!--]--></p><!--[--><pre><code><span class="line" line="1"><span class="ct-cf5874">public</span><span class="ct-d94424"> </span><span class="ct-cf5874">static</span><span class="ct-d94424"> </span><span class="ct-cf5874">class</span><span class="ct-d94424"> </span><span class="ct-f56f79">WelcomePageGreetingExtensions
</span></span><span class="line" line="2"><span class="ct-d94424">{
</span></span><span class="line" line="3"><span class="ct-d94424">    </span><span class="ct-cf5874">public</span><span class="ct-d94424"> </span><span class="ct-cf5874">static</span><span class="ct-d94424"> </span><span class="ct-f56f79">WelcomePageGreetingFeature</span><span class="ct-d94424"> </span><span class="ct-e06acd">WelcomePage</span><span class="ct-d94424">(
</span></span><span class="line" line="4"><span class="ct-d94424">        </span><span class="ct-cf5874">this</span><span class="ct-d94424"> </span><span class="ct-f56f79">GreetingConfigurator</span><span class="ct-d94424"> </span><span class="ct-2392fa">source</span><span class="ct-d94424">,
</span></span><span class="line" line="5"><span class="ct-d94424">        </span><span class="ct-cf5874">string</span><span class="ct-d94424">? </span><span class="ct-2392fa">path</span><span class="ct-d94424"> = </span><span class="ct-2392fa">default
</span></span><span class="line" line="6"><span class="ct-d94424">    ) =&gt; </span><span class="ct-e06acd">new</span><span class="ct-d94424">(</span><span class="ct-2392fa">path</span><span class="ct-d94424"> ?? </span><span class="ct-43250b">&quot;/&quot;</span><span class="ct-d94424">);
</span></span><span class="line" line="7"><span class="ct-d94424">}</span></span></code></pre><!--]--><style>.ct-43250b{color:#CE9178}
.ct-2392fa{color:#9CDCFE}
.ct-e06acd{color:#DCDCAA}
.ct-f56f79{color:#4EC9B0}
.ct-d94424{color:#D4D4D4}
.ct-cf5874{color:#569CD6}</style></div><div class="navigation-buttons-container" data-v-4240d3a7 data-v-89494b79><div class="button left" data-v-89494b79><a href="/architecture/layer" class="" data-v-89494b79><div class="link-text" data-v-89494b79><i class="fa-solid fa-caret-left" data-v-89494b79></i> Previous <h3 data-v-89494b79>Layer</h3></div></a></div><!----></div></div><nav data-v-4240d3a7 data-v-bf4f74b1><h4 data-v-bf4f74b1><a data-v-bf4f74b1>On This Page</a></h4><ul class="" data-v-bf4f74b1><!--[--><li data-v-bf4f74b1><a aria-current="page" href="/architecture/feature#conventions" class="router-link-active router-link-exact-active" data-v-bf4f74b1>Conventions</a><ul data-v-bf4f74b1><!--[--><li data-v-bf4f74b1><a aria-current="page" href="/architecture/feature#abstraction" class="router-link-active router-link-exact-active" data-v-bf4f74b1>Abstraction</a></li><li data-v-bf4f74b1><a aria-current="page" href="/architecture/feature#implementation" class="router-link-active router-link-exact-active" data-v-bf4f74b1>Implementation</a></li><!--]--></ul></li><li data-v-bf4f74b1><a aria-current="page" href="/architecture/feature#creating-a-feature" class="router-link-active router-link-exact-active" data-v-bf4f74b1>Creating A Feature</a><ul data-v-bf4f74b1><!--[--><li data-v-bf4f74b1><a aria-current="page" href="/architecture/feature#id-of-a-feature" class="router-link-active router-link-exact-active" data-v-bf4f74b1>Id of a Feature</a></li><li data-v-bf4f74b1><a aria-current="page" href="/architecture/feature#disabling-a-feature" class="router-link-active router-link-exact-active" data-v-bf4f74b1>Disabling a Feature</a></li><!--]--></ul></li><li data-v-bf4f74b1><a aria-current="page" href="/architecture/feature#configuring-layers" class="router-link-active router-link-exact-active" data-v-bf4f74b1>Configuring Layers</a><ul data-v-bf4f74b1><!--[--><li data-v-bf4f74b1><a aria-current="page" href="/architecture/feature#including-an-option" class="router-link-active router-link-exact-active" data-v-bf4f74b1>Including an Option</a></li><!--]--></ul></li><!--]--><li data-v-bf4f74b1><a class="return-to-top" href="#" data-v-bf4f74b1>Return to top</a></li></ul></nav></div><!--]--><!--]--></article></div><div class="bottom" data-v-a76652f4 data-v-a6beed8c><footer data-v-a6beed8c><div class="logo" data-v-a6beed8c><a href="/" class="" data-v-a6beed8c><img class="do logo white" data-v-a6beed8c></a><span data-v-a6beed8c>Copyright (c) 2023 Mouseless - MIT License</span></div><nav data-v-a6beed8c><!--[--><a href="/blueprints" class="" data-v-a6beed8c>Blueprints</a><a href="/features" class="" data-v-a6beed8c>Features</a><a href="/layers" class="" data-v-a6beed8c>Layers</a><a href="/architecture" class="active" data-v-a6beed8c>Architecture</a><a href="/release-notes" class="" data-v-a6beed8c>Release Notes</a><!--]--><a href="https://github.com/mouseless/do" rel="noopener noreferrer" target="_blank" data-v-a6beed8c><i class="fa-brands fa-github" data-v-a6beed8c></i> /mouseless/do</a></nav></footer></div></div></div><script type="application/json" id="__NUXT_DATA__" data-ssr="true" data-src="/architecture/feature/_payload.json">[{"state":1,"_errors":3,"serverRendered":6,"pinia":7,"prerenderedAt":43},["Reactive",2],{},["Reactive",4],{"content-query-AEJqHXpcLj":5},null,true,["Reactive",8],{"sectionStore":9,"pageStore":27},{"sections":10},[11,15,18,21,24],{"_path":12,"_dir":13,"title":14},"/blueprints","","Blueprints",{"_path":16,"_dir":13,"title":17},"/features","Features",{"_path":19,"_dir":13,"title":20},"/layers","Layers",{"_path":22,"_dir":13,"title":23},"/architecture","Architecture",{"_path":25,"_dir":13,"title":26},"/release-notes","Release Notes",{"pages":28},[29,34,37,40],{"_path":22,"title":23,"pages":30},[31,32,33],"application","layer","feature",{"_path":35,"title":36},"/architecture/application","Application",{"_path":38,"title":39},"/architecture/layer","Layer",{"_path":41,"title":42},"/architecture/feature","Feature",1694958290002]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{content:{locales:[],defaultLocale:"",integrity:1694958272019,experimental:{stripQueryParameters:false,clientDB:false,advancedIgnoresPattern:false},api:{baseURL:"/api/_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{theme:"dark-plus",preload:["diff","ts","js","css","java","markdown","sql","xml","json","csharp","md","bash"]},wsUrl:"",documentDriven:false,host:"",trailingSlash:false,anchorLinks:{depth:0,exclude:[1]}},baseURL:"",githubURL:"/mouseless/do"},app:{baseURL:"/",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script><script type="module" src="/_nuxt/entry.42953906.js" crossorigin></script></body>
</html>