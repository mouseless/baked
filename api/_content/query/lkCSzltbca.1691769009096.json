{"_path":"/features/mock-overrider","_dir":"features","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Mock Overrider","description":"This feature provides an overrider mechanism for overriding default components\nregistered in IServiceColleciton.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"mock-overrider"},"children":[{"type":"text","value":"Mock Overrider"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This feature provides an overrider mechanism for overriding default components\nregistered in "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"IServiceColleciton"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Add this feature using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"AddMockOverrrider()"}]},{"type":"text","value":" extension;"}]},{"type":"element","tag":"code","props":{"code":"app.Features.AddMockOverrider(...);\n","language":"csharp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"Features"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4d6436"},"children":[{"type":"text","value":"AddMockOverrider"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"(...);"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"first-interface"},"children":[{"type":"text","value":"First Interface"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This feature implementation provides a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"IMockOverrider"}]},{"type":"text","value":"implementation which\noverrides components with mocks added to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"MockDescriptor"}]},{"type":"text","value":" collection\naccording to their type's first interface."}]},{"type":"element","tag":"code","props":{"code":"public class MockOverrider{\n\n    ...\n\n    public void Override(object mocked)\n    {\n        _overrides.TryAdd(mocked.GetType().GetInterfaces().First(), mocked);\n    }\n}\n","language":"csharp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-2fd4d2"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2fd4d2"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-24580c"},"children":[{"type":"text","value":"MockOverrider"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"    ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2fd4d2"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2fd4d2"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4d6436"},"children":[{"type":"text","value":"Override"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2fd4d2"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"mocked"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"_overrides"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4d6436"},"children":[{"type":"text","value":"TryAdd"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"mocked"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4d6436"},"children":[{"type":"text","value":"GetType"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-4d6436"},"children":[{"type":"text","value":"GetInterfaces"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-4d6436"},"children":[{"type":"text","value":"First"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"(), "}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"mocked"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Than all components are added to service collection during "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"AddServices"}]},{"type":"text","value":" phase of\ntesting layer."}]},{"type":"element","tag":"code","props":{"code":"foreach (var mock in _configuration.Mocks)\n{\n    if (mock.Singleton)\n    {\n        services.AddSingleton(mock.Type, sp => _configuration.MockFactory.Create(sp, mock));\n    }\n    else\n    {\n        services.AddTransient(mock.Type, sp => _configuration.MockFactory.Create(sp, mock));\n    }\n}\n","language":"csharp","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-198696"},"children":[{"type":"text","value":"foreach"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-2fd4d2"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"mock"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-198696"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"_configuration"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"Mocks"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-198696"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"mock"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"Singleton"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"services"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4d6436"},"children":[{"type":"text","value":"AddSingleton"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"mock"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"sp"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":" => "}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"_configuration"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"MockFactory"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4d6436"},"children":[{"type":"text","value":"Create"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"sp"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"mock"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-198696"},"children":[{"type":"text","value":"else\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"services"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4d6436"},"children":[{"type":"text","value":"AddTransient"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"mock"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"Type"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"sp"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":" => "}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"_configuration"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"MockFactory"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4d6436"},"children":[{"type":"text","value":"Create"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"sp"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7772b4"},"children":[{"type":"text","value":"mock"}]},{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"));\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-299036"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-198696{color:#C586C0}\n.ct-24580c{color:#4EC9B0}\n.ct-2fd4d2{color:#569CD6}\n.ct-4d6436{color:#DCDCAA}\n.ct-299036{color:#D4D4D4}\n.ct-7772b4{color:#9CDCFE}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"first-interface","depth":2,"text":"First Interface"}]}},"_type":"markdown","_id":"content:features:mock-overrider.md","_source":"content","_file":"features/mock-overrider.md","_extension":"md"}