{"_path":"/architecture/layer","_dir":"architecture","_draft":false,"_partial":false,"_locale":"","title":"Layer","description":"Each ILayer implementation represents an internal system component of the\nsoftware you develop. A layer provides application features with configuration\nof this system component so that the features can bind domain objects and\nsystem components together.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"layer"},"children":[{"type":"text","value":"Layer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Each "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ILayer"}]},{"type":"text","value":" implementation represents an internal system component of the\nsoftware you develop. A layer provides application features with configuration\nof this system component so that the features can bind domain objects and\nsystem components together."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's take relational database as an example. A relational database is treated\nas an internal system component and is introduced by the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DataAccessLayer"}]},{"type":"text","value":" along\nwith a configuration API. This API enables a feature to map your domain entities\nto database tables."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Another good example is the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"HttpServerLayer"}]},{"type":"text","value":". This layer introduces the ASP.NET\nCore framework into your application. It provides three phases, as mentioned in\n"},{"type":"element","tag":"a","props":{"href":"./application"},"children":[{"type":"text","value":"Application"}]},{"type":"text","value":", along with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"IMiddlewareCollection"}]},{"type":"text","value":" and\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"IEndpointRouteBuilder"}]},{"type":"text","value":" objects as its configuration API. This way, any feature\nhas the ability to use a middleware or add routes to the application."}]},{"type":"element","tag":"h2","props":{"id":"conventions"},"children":[{"type":"text","value":"Conventions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For a consistent developer experience, follow below conventions when\nimplementing a new layer;"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Place all layer related classes under the same folder named after layer,\ne.g., "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DependencyInjection/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Layer"}]},{"type":"text","value":" suffix in layer class name, e.g.,\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DependencyInjection/DependencyInjectionLayer.cs"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Provide extension methods in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Do"}]},{"type":"text","value":" namespace, e.g.,\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DependencyInjection/DependencyInjectionExtensions.cs"}]},{"type":"text","value":";\n"},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Add"}]},{"type":"text","value":" extension to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"List<ILayer>"}]},{"type":"text","value":", e.g., "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AddDependencyInjection()"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Get"}]},{"type":"text","value":" extensions to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ApplicationContext"}]},{"type":"text","value":", e.g.,\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"GetWebApplicationBuilder()"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"GetWebApplication()"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Configure"}]},{"type":"text","value":" extensions to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LayerConfigurator"}]},{"type":"text","value":" per configuration\ntarget(s), e.g., "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ConfigureServiceCollection()"}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Place phase implementations as nested classes under the layer class"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Don't use any suffix for phases and use method-like names, e.g., "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Build"}]},{"type":"text","value":" and\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Run"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Please refer to existing layers in "},{"type":"element","tag":"a","props":{"href":"https://github.com/mouseless/do","rel":["nofollow"]},"children":[{"type":"text","value":"github.com/mouseless/do"}]},{"type":"text","value":" for examples."}]},{"type":"element","tag":"h2","props":{"id":"creating-a-layer"},"children":[{"type":"text","value":"Creating A Layer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To create a layer, create a class using above conventions and extend\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LayerBase"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class LayerX : LayerBase\n{\n    ...\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" LayerX"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"LayerBase\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"!TIP"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can directly implement provided interface "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ILayer"}]},{"type":"text","value":", however we've created\nsome base classes to make it easier for you to create layers. All examples\ndemonstrate usage of these base classes."}]}]},{"type":"element","tag":"h3","props":{"id":"id-of-a-layer"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Id"}]},{"type":"text","value":" of a Layer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ILayer"}]},{"type":"text","value":" has an "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Id"}]},{"type":"text","value":" property which should be a unique per "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Application"}]},{"type":"text","value":"\ninstance. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LayerBase"}]},{"type":"text","value":" sets the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Id"}]},{"type":"text","value":" as name of the concrete class e.g.,\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LayerX"}]},{"type":"text","value":" at above example."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can override its value in layer implementation class as shown below;"}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class LayerX : LayerBase\n{\n    protected override string Id => \"CustomUniqueId\"\n    ...\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" LayerX"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"LayerBase\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    protected"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" override"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" Id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"CustomUniqueId\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    .."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":".\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"adding-phases"},"children":[{"type":"text","value":"Adding Phases"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By default "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LayerBase"}]},{"type":"text","value":" returns no phases. To add one or more phases into the\napplication, you need to override "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"GetPhases()"}]},{"type":"text","value":" method as shown below;"}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class SampleLayer : LayerBase\n{\n    protected override IEnumerable<IPhase> GetPhases()\n    {\n        yield return new DoA();\n        yield return new DoB();\n    }\n\n    public class DoA : PhaseBase { ... }\n    public class DoB : PhaseBase { ... }\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" SampleLayer"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"LayerBase\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    protected"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" override"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" IEnumerable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"IPhase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"GetPhases"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"        yield"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":" return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" DoA"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"        yield"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":" return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" DoB"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" DoA"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"PhaseBase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" { ... }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" DoB"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"PhaseBase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" { ... }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"SampleLayer"}]},{"type":"text","value":" adds two phases, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DoA"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DoB"}]},{"type":"text","value":", to the application."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"!TIP"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By convention place the phase implementations as a nested class in the layer\nit is added."}]}]},{"type":"element","tag":"h3","props":{"id":"initializing-a-phase"},"children":[{"type":"text","value":"Initializing a Phase"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PhaseBase"}]},{"type":"text","value":" class has "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Initialize()"}]},{"type":"text","value":" method to override so that it can add an\nobject to the application context via "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Context"}]},{"type":"text","value":" property. Base "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Initialize()"}]},{"type":"text","value":"\nmethod does not add any objects to the application. Below, you can see how\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"CreateBuilder"}]},{"type":"text","value":" phase adds "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"WebApplicationBuilder"}]},{"type":"text","value":" to the context;"}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class CreateBuilder : PhaseBase\n{\n    protected override void Initialize()\n    {\n        var build = WebApplication.CreateBuilder();\n\n        Context.Add(build);\n    }\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" CreateBuilder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"PhaseBase\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    protected"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" override"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" void"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" Initialize"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"        var"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" WebApplication"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"CreateBuilder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        Context"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"!TIP"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can directly implement provided interface "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"IPhase"}]},{"type":"text","value":", however we've created\nsome base classes to make it easier for you to create phases. All examples\ndemonstrate usage of these base classes."}]}]},{"type":"element","tag":"h3","props":{"id":"readiness-via-dependencies"},"children":[{"type":"text","value":"Readiness via Dependencies"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can define context dependencies via generic "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PhaseBase<>"}]},{"type":"text","value":" classes to make\nthe phase wait until context is ready to provide that dependency. For example,\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Build"}]},{"type":"text","value":" depends on the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"WebApplicationBuilder"}]},{"type":"text","value":" instance as shown below;"}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class Build : PhaseBase<WebApplicationBuilder>\n{\n    protected override void Initialize(WebApplicationBuilder build)\n    {\n        var app = build.Build();\n\n        Context.Add(app);\n    }\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" Build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"PhaseBase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"WebApplicationBuilder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    protected"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" override"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" void"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" Initialize"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"WebApplicationBuilder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"        var"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        Context"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PhaseBase<T>"}]},{"type":"text","value":" class requires "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Initialize(T t)"}]},{"type":"text","value":" method to be implemented."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"!NOTE"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can provide more than one dependency for a phase. E.g., "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Phase<X, Y>"}]},{"type":"text","value":"\nwill require "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Initialize(X x, Y y)"}]},{"type":"text","value":" method to be implemented."}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"!WARNING"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Type of the dependency provided, must be exactly the same as the type of\ndependency in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ApplicationContext"}]},{"type":"text","value":". For more information\n"},{"type":"element","tag":"a","props":{"href":"../architecture/application#running-an-application"},"children":[{"type":"text","value":"Running an Application"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Phases can also define context dependencies from other phase artifacts. For\nexample "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"HttpServerLayer.Build"}]},{"type":"text","value":" phase can require "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"IServiceCollection"}]},{"type":"text","value":" which\nwill be provided during "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DependencyInjectionLayer.AddServices"}]},{"type":"text","value":" phase."}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"// DependencyInjectionLayer\npublic class AddServices(IServiceCollection _services)\n    : PhaseBase(PhaseOrder.Early)\n{\n    protected override void Initialize()\n    {\n        Context.Add(_services);\n    }\n}\n\n// HttpServerLayer\npublic class Build()\n    : PhaseBase<WebApplicationBuilder, IServiceCollection>(PhaseOrder.Latest)\n{\n    protected override void Initialize(WebApplicationBuilder build, IServiceCollection services)\n    {\n        ...\n    }\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"// DependencyInjectionLayer\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" AddServices"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"IServiceCollection"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" _services"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"PhaseBase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"PhaseOrder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"Early"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    protected"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" override"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" void"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" Initialize"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        Context"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"_services"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"// HttpServerLayer\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" Build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"PhaseBase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"WebApplicationBuilder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"IServiceCollection"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":">("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"PhaseOrder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"Latest"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    protected"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" override"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" void"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" Initialize"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"WebApplicationBuilder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"IServiceCollection"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" services"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        .."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":".\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"⚠️"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This type of artifact requirement will create a dependency between phases\nwhich results to a layer to layer dependency. In the above example "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Build"}]},{"type":"text","value":"\nphase will never execute unless "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DependencyLayer"}]},{"type":"text","value":" is added to the application"}]}]},{"type":"element","tag":"h3","props":{"id":"order-of-a-phase"},"children":[{"type":"text","value":"Order of a Phase"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PhaseBase"}]},{"type":"text","value":" classes has "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"order"}]},{"type":"text","value":" parameter in their constructors. Default order\nis "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PhaseOrder.Normal"}]},{"type":"text","value":". If you need to change the order, pass the desired order\nto this parameter as shown below;"}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class DoThisEarlyOn()\n    : PhaseBase(PhaseOrder.Early)\n{ }\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" DoThisEarlyOn"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"PhaseBase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"PhaseOrder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"Early"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{ }\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"providing-configuration"},"children":[{"type":"text","value":"Providing Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Layers provide configuration objects phase by phase. This means a layer can\nprovide two different configuration objects for two different phases. For this\nreason, a layer returns "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PhaseContext"}]},{"type":"text","value":" instance per phase to which it provides\nconfiguration."}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class LayerX : LayerBase<AddServices>\n{\n    readonly LayerXConfiguration _configuration = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContext(_configuration);\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" LayerX"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"LayerBase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"AddServices"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    readonly"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" LayerXConfiguration"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" _configuration"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    protected"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" override"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" PhaseContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" GetContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"AddServices"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" phase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        phase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"CreateContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"_configuration"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this example, you see a layer named "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LayerX"}]},{"type":"text","value":" providing a\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LayerXConfiguration"}]},{"type":"text","value":" instance during "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AddServices"}]},{"type":"text","value":" phase."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"!NOTE"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By default, a layer returns "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PhaseContext.Empty"}]},{"type":"text","value":" instance for the phases it\ndoes not provide a configuration. This means "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Application"}]},{"type":"text","value":" skips that layer\nfor the phases it doesn't have anything to configure."}]}]},{"type":"element","tag":"h3","props":{"id":"using-non-generic-layerbase"},"children":[{"type":"text","value":"Using non-generic "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LayerBase"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LayerBase<>"}]},{"type":"text","value":" classes allow up to three generic arguments. If you need to\nimplement a layer that has things to configure during more than three phases,\nuse non-generic "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LayerBase"}]},{"type":"text","value":" class, override "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"GetContext(IPhase phase)"}]},{"type":"text","value":" method\nand switch given phase according to its type;"}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class MyLayer : LayerBase\n{\n    protected override PhaseContext GetContext(IPhase phase) =>\n        phase switch\n        {\n            PhaseA => phase.CreateContext(...),\n            PhaseB => phase.CreateContext(...),\n            _ => base.GetContext(phase)\n        };\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" MyLayer"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"LayerBase\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    protected"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" override"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" PhaseContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" GetContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"IPhase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" phase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        phase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":" switch\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"        {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"            PhaseA"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" phase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"CreateContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":".."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":".),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"            PhaseB"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" phase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"CreateContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":".."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":".),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"            _"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" base"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"GetContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"phase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"        };\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"before-and-after-a-phase"},"children":[{"type":"text","value":"Before and After a Phase"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Layers might need to do some standard stuff before and after a phase is applied\nto all features for all layers. Use "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"GetContext()"}]},{"type":"text","value":" method to do stuff before,\nand "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"onDispose:"}]},{"type":"text","value":" delegate to do stuff after."}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class LayerX : LayerBase<AddServices>\n{\n    readonly LayerXConfiguration _configuration = new();\n\n    protected override PhaseContext GetContext(AddServices phase)\n    {\n        var services = Context.Get<IServiceCollection>();\n\n        services.AddStandardStuffBefore();\n\n        phase.CreateContext(_configuration,\n            onDispose: () => services.AddStandardStuffAfter()\n        );\n    }\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" LayerX"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"LayerBase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"AddServices"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    readonly"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" LayerXConfiguration"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" _configuration"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    protected"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" override"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" PhaseContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" GetContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"AddServices"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" phase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"        var"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" services"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" Context"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Get"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"IServiceCollection"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":">();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        services"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"AddStandardStuffBefore"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        phase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"CreateContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"_configuration"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"            onDispose"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":": () "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" services"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"AddStandardStuffAfter"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"        );\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"!NOTE"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Notice that a layer has access to the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ApplicationContext"}]},{"type":"text","value":" instance through\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Context"}]},{"type":"text","value":" property provided in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LayerBase"}]},{"type":"text","value":" base class."}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"!WARNING"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"GetContext()"}]},{"type":"text","value":" method is called for every layer before applying any of them\nto features. And "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"onDispose:"}]},{"type":"text","value":" actions are called after applying these\ncontexts to all features."}]}]},{"type":"element","tag":"h3","props":{"id":"providing-multiple-targets"},"children":[{"type":"text","value":"Providing Multiple Targets"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It is possible to provide up to three configuration objects for the same phase.\nThere are two ways of providing multiple targets; at once or one by one."}]},{"type":"element","tag":"h4","props":{"id":"at-once"},"children":[{"type":"text","value":"At Once"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Below code demonstrates providing two configuration objects at once;"}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class LayerX : LayerBase<AddServices>\n{\n    readonly Configuration1 _configuration1 = new();\n    readonly Configuration2 _configuration2 = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContext(_configuration1, _configuration2);\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" LayerX"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"LayerBase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"AddServices"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    readonly"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" Configuration1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" _configuration1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    readonly"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" Configuration2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" _configuration2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    protected"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" override"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" PhaseContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" GetContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"AddServices"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" phase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        phase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"CreateContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"_configuration1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"_configuration2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This phase context will require an action with two parameter in a feature;"}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"...\npublic void Configure(LayerConfigurator configurator)\n{\n    configurator.Configure((Configuration1 configuration1, Configuration2 configuration2) =>\n    {\n        // use both objects to configure\n    });\n}\n...\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":".."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":".\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" void"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" Configure"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"LayerConfigurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" configurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    configurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Configure"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"Configuration1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" configuration1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"Configuration2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" configuration2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"        // use both objects to configure\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":".."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":".\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See "},{"type":"element","tag":"a","props":{"href":"./feature"},"children":[{"type":"text","value":"Feature"}]},{"type":"text","value":" for more information on using layer configurators\nfor features."}]},{"type":"element","tag":"h4","props":{"id":"one-by-one"},"children":[{"type":"text","value":"One by One"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Below code demonstrates providing configuration objects one by one;"}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class LayerX : LayerBase<AddServices>\n{\n    readonly Configuration1 _configuration1 = new();\n    readonly Configuration2 _configuration2 = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContextBuilder()\n            .Add(_configuration1)\n            .Add(_configuration2)\n            .Build()\n        ;\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" LayerX"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"LayerBase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"AddServices"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    readonly"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" Configuration1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" _configuration1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    readonly"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" Configuration2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" _configuration2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    protected"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" override"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" PhaseContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" GetContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"AddServices"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" phase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        phase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"CreateContextBuilder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"            ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"_configuration1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"            ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"_configuration2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"            ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"        ;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This phase context will require two different actions in a feature;"}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"...\npublic void Configure(LayerConfigurator configurator)\n{\n    configurator.Configure((Configuration1 configuration1) =>\n    {\n        // configure one by one\n    });\n\n    configurator.Configure((Configuration2 configuration2) =>\n    {\n        // configure one by one\n    });\n}\n...\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":".."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":".\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" void"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" Configure"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"LayerConfigurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" configurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    configurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Configure"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"Configuration1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" configuration1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"        // configure one by one\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    configurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Configure"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"Configuration2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" configuration2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"        // configure one by one\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":".."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":".\n"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"!TIP"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"phase.CreateContext()"}]},{"type":"text","value":" is a helper method that utilizes\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"phase.CreateContextBuilder()"}]},{"type":"text","value":" behind the scenes."}]}]},{"type":"element","tag":"h4","props":{"id":"using-in-combination"},"children":[{"type":"text","value":"Using in Combination"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You may combine these two ways to provide configuration;"}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class LayerX : LayerBase<AddServices>\n{\n    readonly Configuration1 _configuration1 = new();\n    readonly Configuration2 _configuration2 = new();\n    readonly Configuration3 _configuration3 = new();\n\n    protected override PhaseContext GetContext(AddServices phase) =>\n        phase.CreateContextBuilder()\n            .Add(_configuration1, _configuration2)\n            .Add(_configuration3)\n            .Build()\n        ;\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" LayerX"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"LayerBase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"AddServices"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    readonly"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" Configuration1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" _configuration1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    readonly"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" Configuration2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" _configuration2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    readonly"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" Configuration3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" _configuration3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    protected"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" override"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" PhaseContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" GetContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"AddServices"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" phase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        phase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"CreateContextBuilder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"            ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"_configuration1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"_configuration2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"            ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"_configuration3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"            ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"        ;\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This phase context will require two different actions;"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"For the first two configuration objects: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"(Configuration1 configuration1, Configuration2 configuration2)"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"For the last configuration object: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"(Configuration3 configuration3)"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"conventions","depth":2,"text":"Conventions"},{"id":"creating-a-layer","depth":2,"text":"Creating A Layer","children":[{"id":"id-of-a-layer","depth":3,"text":"Id of a Layer"}]},{"id":"adding-phases","depth":2,"text":"Adding Phases","children":[{"id":"initializing-a-phase","depth":3,"text":"Initializing a Phase"},{"id":"readiness-via-dependencies","depth":3,"text":"Readiness via Dependencies"},{"id":"order-of-a-phase","depth":3,"text":"Order of a Phase"}]},{"id":"providing-configuration","depth":2,"text":"Providing Configuration","children":[{"id":"using-non-generic-layerbase","depth":3,"text":"Using non-generic LayerBase"},{"id":"before-and-after-a-phase","depth":3,"text":"Before and After a Phase"},{"id":"providing-multiple-targets","depth":3,"text":"Providing Multiple Targets"}]}]}},"_type":"markdown","_id":"content:architecture:layer.md","_source":"content","_file":"architecture/layer.md","_extension":"md"}