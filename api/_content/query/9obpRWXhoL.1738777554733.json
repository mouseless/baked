{"_path":"/architecture/feature","_dir":"architecture","_draft":false,"_partial":false,"_locale":"","title":"Feature","description":"Features consist of two parts; abstraction (port) and implementation (adapter).\nEach adapter exposes a class that implements IFeature interface.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"feature"},"children":[{"type":"text","value":"Feature"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Features consist of two parts; abstraction (port) and implementation (adapter).\nEach adapter exposes a class that implements "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"IFeature"}]},{"type":"text","value":" interface."}]},{"type":"element","tag":"h2","props":{"id":"conventions"},"children":[{"type":"text","value":"Conventions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For a consistent developer experience, follow below conventions when\nimplementing a new feature;"}]},{"type":"element","tag":"h3","props":{"id":"abstraction"},"children":[{"type":"text","value":"Abstraction"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Place all abstraction classes under a folder named after feature, e.g.,\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Greeting/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Provide a configurator and an extension class for abstraction part, e.g.,\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Greeting/GreetingConfigurator.cs"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Greeting/GreetingExtensions.cs"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Provide an "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Add"}]},{"type":"text","value":" method to add feature to an application, e.g.,\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AddGreeting()"}]},{"type":"text","value":".\n"},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If feature allows multiple implementations, indicate this with a plural\nadd method, e.g., "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AddCodingStyles()"}]},{"type":"text","value":". Also accept a list of features\ninstead of a single feature."}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"implementation"},"children":[{"type":"text","value":"Implementation"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Place all implementation classes under their own folder in the abstraction\nfolder, e.g., "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Greeting/WelcomePage/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Provide an extension method with the implementation name to allow adding\nthat implementation, e.g., "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"WelcomePage()"}]},{"type":"text","value":".\n"},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"This method should be in an extension class under "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Baked"}]},{"type":"text","value":" namespace, e.g.,\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Greeting/WelcomePage/WelcomePageGreetingExtensions.cs"}]},{"type":"text","value":"."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Name feature class after implementation name with abstraction name as a\nsuffix, e.g., "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"WelcomePageGreetingFeature"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Features depend on other features through their abstraction parts. Direct\ndependency between feature implementations is forbidden."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"To create a configuration overrider, add an extension and feature class\ndirectly under the feature folder, e.g.,\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ConfigurationOverrider/ConfigurationOverriderExtensions.cs"}]},{"type":"text","value":" and\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ConfigurationOverrider/ConfigurationOverriderFeature.cs"}]},{"type":"text","value":".\n"},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Unlike regular features, provide "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"AddConfigurationOverrider()"}]},{"type":"text","value":" extension\nmethod directly to allow "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"app.Features.AddConfigurationOverrider()"}]},{"type":"text","value":"\nusage."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Implement "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"IFeature"}]},{"type":"text","value":" in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ConfigurationOverriderFeature"}]},{"type":"text","value":" where you add\nall your configuration overrides."}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Please refer to existing features in "},{"type":"element","tag":"a","props":{"href":"https://github.com/mouseless/baked","rel":["nofollow"]},"children":[{"type":"text","value":"github.com/mouseless/baked"}]},{"type":"text","value":" for\nexamples."}]},{"type":"element","tag":"h2","props":{"id":"creating-a-feature"},"children":[{"type":"text","value":"Creating A Feature"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To create a feature implementation, create a class using above conventions and\nimplement "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"IFeature<TConfigurator>"}]},{"type":"text","value":" where "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"TConfigurator"}]},{"type":"text","value":" is the configurator\nclass of your feature abstraction."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"WelcomePageGreetingFeature.cs"}]}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class WelcomePageGreetingFeature : IFeature<GreetingConfigurator>\n{\n    public void Configure(LayerConfigurator configurator)\n    {\n        ...\n    }\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" WelcomePageGreetingFeature"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"IFeature"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"GreetingConfigurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" void"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" Configure"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"LayerConfigurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" configurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        .."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":".\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"id-of-a-feature"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Id"}]},{"type":"text","value":" of a Feature"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"IFeature"}]},{"type":"text","value":" has an "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Id"}]},{"type":"text","value":" property which should be unique per "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Application"}]},{"type":"text","value":"\ninstance. By default, value of this property is name of the implementing\nfeature."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can override its value by implementing "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"IFeature.Id"}]},{"type":"text","value":" property in feature\nimplementation class as shown below;"}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class WelcomePageGreetingFeature : IFeature<GreetingConfigurator>\n{\n    public string Id => \"CustomFeatureId\";\n    ...\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" WelcomePageGreetingFeature"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"IFeature"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"GreetingConfigurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" Id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"CustomFeatureId\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"disabling-a-feature"},"children":[{"type":"text","value":"Disabling a Feature"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To allow a feature to be disabled, you can provide a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Disable"}]},{"type":"text","value":" method in your\nconfigurator which returns "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Feature.Empty<TConfigurator>()"}]},{"type":"text","value":", this feautre does\nnot configure any layers."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"GreetingConfigurator.cs"}]}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class GreetingConfigurator\n{\n    public IFeature<GreetingConfigurator> Disabled() =>\n        Feature.Empty<GreetingConfigurator>();\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" GreetingConfigurator\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" IFeature"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"GreetingConfigurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"> "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Disabled"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        Feature"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Empty"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"GreetingConfigurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":">();\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"configuring-layers"},"children":[{"type":"text","value":"Configuring Layers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To configure layers, a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LayerCofigurator"}]},{"type":"text","value":" instance is passed to the\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Configure()"}]},{"type":"text","value":" method of the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"IFeature"}]},{"type":"text","value":" interface. Using extension methods on\nthe given configurator, a feature accesses configuration targets of layers."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"WelcomePageGreetingFeature.cs"}]}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class WelcomePageGreetingFeature : IFeature<GreetingConfigurator>\n{\n    public void Configure(LayerConfigurator configurator)\n    {\n        configurator.ConfigureMiddlewareCollection(middlewares =>\n        {\n            middlewares.Add(app => app.UseWelcomePage());\n        });\n    }\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" WelcomePageGreetingFeature"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":" : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"IFeature"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"GreetingConfigurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" void"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" Configure"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"LayerConfigurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" configurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        configurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"ConfigureMiddlewareCollection"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"middlewares"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" =>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"        {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"            middlewares"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"UseWelcomePage"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"());\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"        });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"!NOTE"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Layers allow up to three configuration targets per configuration action."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Configure"}]},{"type":"text","value":" method will be called multiple times, each time to configure a\ndifferent part of the application. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LayerConfigurator"}]},{"type":"text","value":" ensures that given\nconfiguration action is only applied to the related target, e.g.,\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"IMiddlewareCollection"}]},{"type":"text","value":" in the above code."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A layer might provide the same object in different configurators. For example,\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"WebApplication"}]},{"type":"text","value":" implements "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"IEndpointRouteBuilder"}]},{"type":"text","value":" but "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"HttpServerLayer"}]},{"type":"text","value":"\nprovides it with its interface not its concrete type."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"!WARNING"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Do "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"NOT"}]},{"type":"text","value":" cast given configuration objects to their other interfaces. A\nlayer provides a separate extension method, e.g.,\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ConfigureEndpointRouteBuilder()"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"!TIP"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The order of the configuration calls does not have an effect in the outcome.\nFeel free to organize these calls in the way you like."}]}]},{"type":"element","tag":"h3","props":{"id":"using-phase-artifacts"},"children":[{"type":"text","value":"Using Phase Artifacts"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To access and use objects stored in application context in a feature,\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LayerConfigurator"}]},{"type":"text","value":" provides "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Use<T>"}]},{"type":"text","value":" helper which will invoke given\naction with context phase artifact."}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"configurator.ConfigureApiModel(api =>\n{\n    configurator.UseDomainModel(domain =>\n    {\n        ...\n    });\n});\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"configurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"ConfigureApiModel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"api"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" =>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    configurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"UseDomainModel"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"domain"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" =>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        .."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":".\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"});\n"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"!WARNING"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Unlike configuration targets, phase artifacts may or may not exist in the\napplication context or not configured properly at the moment\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LayerConfigurator"}]},{"type":"text","value":" applies configurations. Phase execution orders and\nconfigurations should be taken into consideration when using phase artifacts."}]}]},{"type":"element","tag":"h3","props":{"id":"including-an-option"},"children":[{"type":"text","value":"Including an Option"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To include an option in a feature, take the option as a parameter in\nconfigurator extension and pass it to the feature implementation as shown\nbelow;"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"WelcomePageGreetingFeature.cs"}]}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public class WelcomePageGreetingFeature(string _path)\n    : IFeature<GreetingConfigurator>\n{\n    public void Configure(LayerConfigurator configurator)\n    {\n        configurator.ConfigureApplicationBuilder(app =>\n        {\n            app.UseWelcomePage(_path);\n        });\n    }\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" WelcomePageGreetingFeature"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" _path"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    : "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"IFeature"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"GreetingConfigurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" void"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" Configure"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"LayerConfigurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" configurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        configurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"ConfigureApplicationBuilder"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" =>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"        {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"            app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"UseWelcomePage"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"_path"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"        });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"WelcomePageGreetingExtensions.cs"}]}]},{"type":"element","tag":"pre","props":{"className":"language-csharp shiki shiki-themes slack-dark","code":"public static class WelcomePageGreetingExtensions\n{\n    public static WelcomePageGreetingFeature WelcomePage(\n        this GreetingConfigurator source,\n        string? path = default\n    ) => new(path ?? \"/\");\n}\n","language":"csharp","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" static"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" WelcomePageGreetingExtensions\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    public"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" static"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" WelcomePageGreetingFeature"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" WelcomePage"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"        this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" GreetingConfigurator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" source"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"        string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"? "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" default\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"    ) "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ??"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \"/\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":");\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E6E6E6"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"conventions","depth":2,"text":"Conventions","children":[{"id":"abstraction","depth":3,"text":"Abstraction"},{"id":"implementation","depth":3,"text":"Implementation"}]},{"id":"creating-a-feature","depth":2,"text":"Creating A Feature","children":[{"id":"id-of-a-feature","depth":3,"text":"Id of a Feature"},{"id":"disabling-a-feature","depth":3,"text":"Disabling a Feature"}]},{"id":"configuring-layers","depth":2,"text":"Configuring Layers","children":[{"id":"using-phase-artifacts","depth":3,"text":"Using Phase Artifacts"},{"id":"including-an-option","depth":3,"text":"Including an Option"}]}]}},"_type":"markdown","_id":"content:architecture:feature.md","_source":"content","_file":"architecture/feature.md","_stem":"architecture/feature","_extension":"md"}