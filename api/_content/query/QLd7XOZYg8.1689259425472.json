{"_path":"/architecture","_dir":"","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Architecture","description":"DO is designed to be a framework that allows us to build software with any\narchitectural style. Core idea is to have good separation of concerns without\ncausing any repetitive work. To achieve this we need to break down an\napplication into its individual components such as features, layers and domain\nlogic.","position":4,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"architecture"},"children":[{"type":"text","value":"Architecture"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"DO is designed to be a framework that allows us to build software with any\narchitectural style. Core idea is to have good separation of concerns without\ncausing any repetitive work. To achieve this we need to break down an\napplication into its individual components such as features, layers and domain\nlogic."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":":information_source:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"DO is inspired by "},{"type":"element","tag":"a","props":{"href":"https://learn.microsoft.com/en-us/dotnet/architecture/modern-web-apps-azure/common-web-application-architectures#clean-architecture","rel":["nofollow"]},"children":[{"type":"text","value":"Clean Architecture"}]},{"type":"text","value":", but it has its own approach to the\nconcept."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let's dive into each type of software component to have a better understanding\nof how DO is structured."}]},{"type":"element","tag":"h2","props":{"id":"domain"},"children":[{"type":"text","value":"Domain"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"At the core of an application lies its domain logic. By this we understand the\nvery reason for an application to exist. Everything else exists only to expose\nthis domain to outside world. So first part is the domain layer."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"diagram","src":"./README-1.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This layer contains all of the business code of your application. Now we have a\nbasic definition of what a domain is, but we need to clarify what a layer is."}]},{"type":"element","tag":"h2","props":{"id":"layer"},"children":[{"type":"text","value":"Layer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Each layer in DO introduces a new technology, such as a database server,\nmessage queue server or a framework, into your application architecture. These\nlayers are named after the domain of their technology."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"diagram","src":"./README-2.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this example, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Do.Web"}]},{"type":"text","value":" introduces the concept of web as a layer through the\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"ASP.NET Core"}]},{"type":"text","value":" technology. Also, "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Do.Database"}]},{"type":"text","value":" introduces the concept of\nrelational databases as a layer through the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"EF Core"}]},{"type":"text","value":" framework."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":":information_source:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Domain"}]},{"type":"text","value":" differs from other layers like "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Web"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Database"}]},{"type":"text","value":". It is a special\nkind of layer that processes your domain assemblies to create an application\nschema out of your domain objects so that they can be used in creating\nconfiguration, conventions and/or generating source code."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"But your domain objects would not just be exposed as API endpoints and mapped\nonto a relational database. For that, we need to be able to configure those\nlayers so that they know how to interpret your domain objects."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is why every layer comes with its own configuration that is specific to\nthe technology it uses. This configuration may contain a set of helper classes\nand/or facade methods that makes it easy to build a certain type of\nconfiguration, but they do "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"not"}]},{"type":"text","value":" have opinions upfront."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In other words;"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If it introduces an internal system component like a database, message queue\nserver, web server, a framework; then it "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"is"}]},{"type":"text","value":" a layer."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If it is an external system component such as a cloud service, then it should\n"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"not"}]},{"type":"text","value":" be a layer. External system components are defined as feature\nimplementations (adapters) which we'll cover in the next section."}]}]},{"type":"element","tag":"h2","props":{"id":"feature"},"children":[{"type":"text","value":"Feature"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A feature is an ability for a domain logic to use in order to access other\nsoftware components. Every feature consists of two parts; abstraction (port)\nand implementation (adapter)."}]},{"type":"element","tag":"h3","props":{"id":"abstraction"},"children":[{"type":"text","value":"Abstraction"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"An abstraction is the library that contains all common classes, interfaces,\nattributes, if any, for a feature. It is the only accessible part of a feature\nfrom the domain layer or from other feature implementations."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":":information_source:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Each feature has only one abstraction, named after the ability it provides,\ne.g. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Do.Fs"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Do.Orm"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Do.Logging"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Do.Auth"}]},{"type":"text","value":" etc."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"diagram","src":"./README-3.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"implementation"},"children":[{"type":"text","value":"Implementation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is the implementation part of a feature that provides concrete\nimplementations for the interfaces defined in the abstraction, along with\nopinionated configurations using the configuration API of the corresponding\nlayer."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":":information_source:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A feature may configure multiple layers to achieve its functionality."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Features may have multiple implementations, each named after its corresponding\ndesign or technology, e.g. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Do.Api.Rest"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Do.Auth.Auth0"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Do.Fs.Aws"}]},{"type":"text","value":",\n"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Do.Orm.EfCore"}]},{"type":"text","value":"."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":":bulb:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Do.Fs"}]},{"type":"text","value":" represents file system feature that provides an API to your domain\nlogic to read/write files. "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Do.Fs.Local"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"Do.Fs.AwsS3"}]},{"type":"text","value":" are two different\nimplementations that provides the same functionality through different system\ncomponents."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In conclusion, feature implementations serve as bridges, connecting the domain\nlayer to other layers through their opinionated configurations. Below is a\ncomplete sample architecture, showcasing the integration of layers, features\nand the domain layer;"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"diagram","src":"./README-4.png"},"children":[]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"domain","depth":2,"text":"Domain"},{"id":"layer","depth":2,"text":"Layer"},{"id":"feature","depth":2,"text":"Feature","children":[{"id":"abstraction","depth":3,"text":"Abstraction"},{"id":"implementation","depth":3,"text":"Implementation"}]}]}},"_type":"markdown","_id":"content:architecture:index.md","_source":"content","_file":"architecture/index.md","_extension":"md"}