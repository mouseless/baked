{
  "type": "SimplePage",
  "schema": {
    "title": {
      "type": "PageTitle",
      "schema": {
        "title": "Form",
        "description": "Showcases action, form components and events",
        "actions": [
          {
            "type": "Button",
            "schema": {
              "icon": "pi pi-plus",
              "label": "New Parent"
            },
            "action": {
              "type": "Local",
              "composable": "useRedirect",
              "options": {
                "type": "Inline",
                "value": {
                  "route": "/form-sample/parents/new"
                }
              }
            }
          },
          {
            "type": "SimpleForm",
            "schema": {
              "title": "Clear Parents",
              "submit": {
                "label": "Clear Parents",
                "severity": "danger"
              },
              "inputs": [],
              "dialogOptions": {
                "open": {
                  "icon": "pi pi-trash",
                  "label": "Clear Parents"
                },
                "cancel": {
                  "label": "Cancel",
                  "variant": "text"
                },
                "message": "Are you sure?"
              }
            },
            "action": {
              "type": "Remote",
              "path": "form-sample/parents",
              "method": "DELETE",
              "postAction": {
                "type": "Publish",
                "event": "clear-parents"
              }
            }
          }
        ]
      }
    },
    "contents": [
      {
        "component": {
          "type": "DataPanel",
          "schema": {
            "title": {
              "type": "Inline",
              "value": "GetParents"
            },
            "localizeTitle": true,
            "inputs": [],
            "content": {
              "type": "DataTable",
              "schema": {
                "columns": [
                  {
                    "key": "name",
                    "component": {
                      "type": "NavLink",
                      "schema": {
                        "path": "/parents/[id]",
                        "params": {
                          "type": "Context",
                          "key": "parent",
                          "prop": "row.id",
                          "targetProp": "id"
                        }
                      },
                      "data": {
                        "type": "Context",
                        "key": "parent",
                        "prop": "row.name"
                      }
                    },
                    "title": "Name",
                    "minWidth": true,
                    "exportable": true,
                    "frozen": true
                  },
                  {
                    "key": "surname",
                    "component": {
                      "type": "Text",
                      "schema": {},
                      "data": {
                        "type": "Context",
                        "key": "parent",
                        "prop": "row.surname"
                      }
                    },
                    "title": "Surname",
                    "exportable": true
                  },
                  {
                    "key": "description",
                    "component": {
                      "type": "Dialog",
                      "schema": {
                        "content": {
                          "type": "Text",
                          "schema": {},
                          "data": {
                            "type": "Context",
                            "key": "parent",
                            "prop": "data"
                          }
                        },
                        "open": {
                          "icon": "pi pi-eye",
                          "label": "",
                          "variant": "text",
                          "rounded": true
                        },
                        "header": "Description"
                      },
                      "data": {
                        "type": "Context",
                        "key": "parent",
                        "prop": "row.description"
                      }
                    },
                    "title": "Description",
                    "exportable": true
                  }
                ],
                "dataKey": "id",
                "paginator": true,
                "rows": 5,
                "exportOptions": {
                  "csvSeparator": ";",
                  "fileName": "GetParents.ExportFileName",
                  "formatter": "useCsvFormatter",
                  "buttonIcon": "pi pi-download",
                  "buttonLabel": "Export as CSV",
                  "appendParameters": true,
                  "parameterSeparator": "_",
                  "parameterFormatter": "useLocaleParameterFormatter"
                },
                "actions": {
                  "key": "Actions",
                  "component": {
                    "type": "Composite",
                    "schema": {
                      "parts": [
                        {
                          "type": "SimpleForm",
                          "schema": {
                            "title": "Update",
                            "submit": {
                              "label": "Update",
                              "severity": "primary"
                            },
                            "inputs": [
                              {
                                "name": "name",
                                "component": {
                                  "type": "InputText",
                                  "schema": {
                                    "label": "Name"
                                  }
                                }
                              },
                              {
                                "name": "surname",
                                "component": {
                                  "type": "InputText",
                                  "schema": {
                                    "label": "Surname"
                                  }
                                }
                              },
                              {
                                "name": "description",
                                "component": {
                                  "type": "InputText",
                                  "schema": {
                                    "label": "Description"
                                  }
                                }
                              }
                            ],
                            "dialogOptions": {
                              "open": {
                                "icon": "pi pi-pencil",
                                "label": "",
                                "variant": "text",
                                "rounded": true
                              },
                              "cancel": {
                                "label": "Cancel",
                                "variant": "text"
                              }
                            }
                          },
                          "action": {
                            "type": "Remote",
                            "path": "parent/{id}",
                            "method": "PUT",
                            "params": {
                              "type": "Context",
                              "key": "parent",
                              "prop": "row"
                            },
                            "body": {
                              "type": "Context",
                              "key": "model"
                            },
                            "postAction": {
                              "type": "Publish",
                              "event": "update"
                            }
                          }
                        },
                        {
                          "type": "SimpleForm",
                          "schema": {
                            "title": "Delete",
                            "submit": {
                              "label": "Delete",
                              "severity": "danger"
                            },
                            "inputs": [],
                            "dialogOptions": {
                              "open": {
                                "icon": "pi pi-trash",
                                "label": "",
                                "variant": "text",
                                "rounded": true
                              },
                              "cancel": {
                                "label": "Cancel",
                                "variant": "text"
                              },
                              "message": "Are you sure?"
                            }
                          },
                          "action": {
                            "type": "Remote",
                            "path": "parent/{id}",
                            "method": "DELETE",
                            "params": {
                              "type": "Context",
                              "key": "parent",
                              "prop": "row"
                            },
                            "postAction": {
                              "type": "Publish",
                              "event": "delete"
                            }
                          }
                        }
                      ]
                    }
                  },
                  "alignRight": true,
                  "exportable": false,
                  "frozen": true
                }
              },
              "data": {
                "type": "Remote",
                "path": "form-sample/parents",
                "query": {
                  "type": "Computed",
                  "composable": "useNuxtRoute",
                  "options": {
                    "type": "Inline",
                    "value": {
                      "property": "query"
                    }
                  }
                }
              },
              "reactions": {
                "reload": {
                  "type": "Composite",
                  "parts": [
                    {
                      "type": "On",
                      "on": "update"
                    },
                    {
                      "type": "On",
                      "on": "delete"
                    },
                    {
                      "type": "On",
                      "on": "clear-parents"
                    }
                  ]
                }
              }
            }
          }
        },
        "key": "get-parents"
      }
    ],
    "path": "form-sample"
  }
}